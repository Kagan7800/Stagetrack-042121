{"version":3,"sources":["components/WhiteboardBrushColorItem/WhiteboardBrushColorItem.module.scss","components/WhiteboardMenuContent/WhiteboardMenuContent.module.scss","components/Skeleton/Skeleton.module.scss","components/ActiveVideoSkeleton/ActiveVideoSkeleton.module.scss","pages/PrivacyEdit/PrivacyEdit.module.scss","pages/Privacy/Privacy.module.scss","components/Footer/Footer.module.scss","components/Input/Input.module.scss","components/RaiseHand/RaiseHand.module.scss","components/WhiteboardBrushColor/WhiteboardBrushColor.module.scss","components/WhiteboardMenu/WhiteboardMenu.module.scss","components/Whiteboard/Whiteboard.module.scss","../node_modules/@ionic/core/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ include: //.entry/.js$/ exclude: //.system/.entry/.js$/ groupOptions: {} namespace object","../node_modules/ionicons/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ include: //.entry/.js$/ exclude: //.system/.entry/.js$/ groupOptions: {} namespace object","../node_modules/peerjs/dist sync","serviceWorker.ts","services/ServiceWorkerService.ts","components/Header/Header.tsx","components/Container/Container.tsx","components/FloatingAnimation/FloatingAnimation.tsx","components/Copyright/Copyright.tsx","components/Footer/Footer.tsx","components/App/App.state.ts","components/Alert/Alert.state.ts","pages/Install/Install.state.ts","pages/AdminSignIn/AdminSignIn.state.ts","pages/Meeting/Meeting.state.ts","pages/Join/Join.state.ts","pages/Start/Start.state.ts","components/HostCreate/HostCreate.state.ts","pages/Hosts/Hosts.state.ts","pages/Privacy/Privacy.state.ts","pages/PrivacyEdit/PrivacyEdit.state.ts","components/Whiteboard/Whiteboard.state.ts","store.ts","services/AlertService.ts","components/Alert/Alert.tsx","components/Page/Page.tsx","pages/Preload/Preload.tsx","components/Button/Button.tsx","pages/Home/Home.tsx","components/Input/Input.tsx","pages/Join/Join.tsx","services/StorageService.ts","components/App/App.storage.ts","services/RequestService.ts","pages/Start/Start.request.ts","pages/Start/Start.tsx","services/PeerService.ts","services/AuthService.ts","services/MeetingService.ts","services/MediaService.ts","repositories/MeetingRepository.ts","services/StreamTrackService.ts","services/VideoService.ts","services/NotificationService.ts","services/Whiteboard/WhiteboardCanvasService.ts","services/Whiteboard/WhiteboardDrawingService.ts","services/ScreenCaptureService.ts","services/SocketService.ts","pages/Meeting/Meeting.socket.ts","services/RTPSenderService.ts","middleware/HostMiddleware.ts","components/MenuToggle/MenuToggle.tsx","components/MenuItem/MenuItem.tsx","components/MenuItems/MenuItems.tsx","components/Menu/Menu.tsx","components/Video/Video.tsx","components/FloatButton/FloatButton.tsx","components/RaiseHand/RaiseHand.tsx","components/VideoBlock/VideoBlock.tsx","services/Whiteboard/WhiteboardBrushService.ts","components/WhiteboardCanvas/WhiteboardCanvas.tsx","components/WhiteboardMenuItem/WhiteboardMenuItem.tsx","components/WhiteboardBrushColorItem/WhiteboardBrushColorItem.tsx","components/WhiteboardBrushColor/WhiteboardBrushColor.tsx","components/WhiteboardBrushSize/WhiteboardBrushSize.tsx","components/WhiteboardMenuContent/WhiteboardMenuContent.tsx","components/WhiteboardMenu/WhiteboardMenu.tsx","components/Whiteboard/Whiteboard.tsx","components/ActiveVideo/ActiveVideo.tsx","components/Skeleton/Skeleton.tsx","components/ActiveVideoSkeleton/ActiveVideoSkeleton.tsx","pages/Meeting/Meeting.tsx","pages/Install/Install.request.ts","pages/Install/Install.tsx","pages/AdminSignIn/AdminSignIn.request.ts","pages/AdminSignIn/AdminSignIn.tsx","middleware/AdminMiddleware.ts","pages/Hosts/Hosts.request.ts","components/AdminMenu/AdminMenu.tsx","components/HostCreate/HostCreate.tsx","components/Host/Host.tsx","components/HostSkeleton/HostSkeleton.tsx","pages/Hosts/Hosts.tsx","services/Editor/EditorService.ts","pages/PrivacyEdit/PrivacyEdit.request.ts","pages/PrivacyEdit/PrivacyEdit.tsx","pages/Privacy/Privacy.request.ts","components/PrivacySkeleton/PrivacySkeleton.tsx","pages/Privacy/Privacy.tsx","pages/NotFound/NotFound.tsx","routes.ts","components/Provider/Provider.tsx","components/App/App.tsx","index.tsx","components/Alert/Alert.module.scss","components/Host/Host.module.scss","components/AdminMenu/AdminMenu.module.scss","components/Header/Header.module.scss","components/Copyright/Copyright.module.scss","components/Page/Page.module.scss","components/MenuToggle/MenuToggle.module.scss","components/MenuItems/MenuItems.module.scss","components/VideoBlock/VideoBlock.module.scss","components/ActiveVideo/ActiveVideo.module.scss","components/MenuItem/MenuItem.module.scss","components/FloatButton/FloatButton.module.scss","components/WhiteboardBrushSize/WhiteboardBrushSize.module.scss","pages/Meeting/Meeting.module.scss","components/HostSkeleton/HostSkeleton.module.scss","pages/NotFound/NotFound.module.scss","components/Container/Container.module.scss","components/FloatingAnimation/FloatingAnimation.module.scss","components/Button/Button.module.scss","components/Menu/Menu.module.scss","components/Video/Video.module.scss","components/WhiteboardMenuItem/WhiteboardMenuItem.module.scss"],"names":["module","exports","map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","keys","Object","webpackEmptyContext","isLocalhost","Boolean","window","location","hostname","match","register","config","navigator","URL","process","href","origin","addEventListener","swUrl","fetch","headers","response","contentType","get","status","indexOf","serviceWorker","ready","registration","unregister","reload","registerValidSW","catch","console","log","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","error","ServiceWorkerService","some","ignorePlatforms","platform","isPlatform","Header","this","props","visibility","className","styles","header","to","routes","home","path","logo","src","alt","taglineClass","invert","invertClass","tagline","Component","Container","children","width","widthClass","container","FloatingAnimation","flipClass","flip","floatingAnimation","Copyright","link","privacy","text","dangerouslySetInnerHTML","copyright","year","Date","getFullYear","__html","Footer","footer","floatingAnimationFlip","copyrightInvert","app","auth","type","actions","authType","alert","message","handleProceed","timeoutId","replaceMessage","replaceHandleProceed","replaceTimeoutId","selectors","cloneDeep","install","username","password","confirmPassword","adminSignIn","meeting","connectionId","videos","mediaStream","MediaStream","screenStream","calls","whiteboardDrawings","whiteboardEnabled","menuExpanded","replaceId","replaceConnectionId","replaceVideos","replaceMediaStream","replaceScreenStream","replaceVideoStream","stream","payload","replaceVideoKind","kind","replaceVideoRaiseHand","raiseHand","replaceVideoActive","active","replaceWhiteboardDrawings","replaceWhiteboardEnabled","enabled","replaceVideoStreamMutedVideo","muted","replaceVideoStreamMutedAudio","updateVideoRenderId","pushVideo","video","pushCall","call","pushWhiteboardDrawing","whiteboardDrawing","pushMenuExpanded","pullVideo","pullMenuExpanded","reset","join","meetingId","replaceMeetingId","replaceMeetingMeetingId","meetingActions","start","replaceUsername","replacePassword","replaceAppAuthType","appActions","hostCreate","name","hosts","privacyEdit","whiteboard","activeMenu","brushSize","brushColor","reducers","combineReducers","action","find","activeVideo","targetVideo","streamMuted","audio","renderId","nanoid","isExists","push","stringifyDrawing","drawing","JSON","stringify","drawings","existingIndex","findIndex","reject","pull","unshift","host","createStore","composeWithDevTools","applyMiddleware","AlertService","alertSelectors","store","getState","clearTimeout","dispatch","alertActions","setTimeout","clearAutoClose","timeout","setAutoClose","Alert","handleClick","bind","handleCancelClick","handleProceedClick","onClick","content","icon","alertCircleOutline","cursorClass","cursor","cancel","proceed","connect","Page","page","mainClassName","headerVisibility","containerVisibility","footerVisibility","footerInvert","containerClass","main","Preload","history","Plugins","App","addListener","data","slug","url","split","pop","isJoin","startsWith","isStart","includes","preventAutoRoute","autoRoute","handleDeeplinkOpen","withRouter","Button","button","shape","expand","Home","handleStartClick","handleJoinClick","Input","input","value","placeholder","onChange","handleChange","autoComplete","Join","handleInputChange","event","target","trim","search","qs","parse","ignoreQueryPrefix","setMeetingIdFromUrl","clearForm","StorageService","storage","Storage","isElectron","key","localStorage","getItem","setItem","set","removeItem","remove","AppStorage","storageService","pwaInstallPrompted","accessToken","callback","pwaPromptedValue","pwaPrompted","RequestService","appStorage","getAccessToken","client","axios","create","baseURL","Authorization","getClient","handleError","post","patch","delete","StartRequest","requestService","hostId","credentials","setAccessToken","updateLastMeetingAt","Start","request","Request","signIn","PeerService","Peer","options","on","getErrorMessage","localConnectionId","localStream","answer","remoteStream","remoteConnectionId","peer","destroy","secure","AuthService","MeetingService","authService","isHostAuth","meetingSelectors","setMeetingId","setConnectionId","getMeetingId","isHostMeeting","isExistsUserVideo","MediaService","meetingService","getUserMedia","mediaDevices","constraints","setMediaStream","audioStream","track","first","getVideoTracks","getAudioTracks","MeetingRepository","getVideo","StreamTrackService","meetingRepository","tracks","getTracks","forEach","stop","getUserVideo","VideoService","streamTrackService","isUserMeeting","memberRemove","canMemberRemove","createVideo","userVideo","NotificationService","Howl","play","canNotifyHost","playNotification","canNotifyMember","WhiteboardCanvasService","instance","canvas","fabric","Canvas","isDrawingMode","height","setDimensions","existingZoom","getZoom","setZoom","clear","WhiteboardDrawingService","whiteboardCanvasService","util","enlivenObjects","getDrawings","add","getObjects","getCanvas","ScreenCaptureService","contraints","mediaService","messages","wildcardMessage","undefined","suppressMessage","getAudioStream","audioTracks","addTrack","getDisplayMedia","attachAudioTracks","setScreenStream","handleDisplayMediaError","SocketService","endpoint","Client","channel","subscribe","unsubscribe","publish","conferenceCall","remoteDisconnect","rtpTrackReplaced","whiteboardDrawingSync","whiteboardSync","whiteboardDrawingAdd","whiteboardCanvasClear","RTPSenderService","getConnectionId","MeetingSocket","getCalls","senders","peerConnection","getSenders","audioSender","videoSender","audioTrack","videoTrack","replaceTrack","publishRTCTrackReplacedSocket","HostMiddleware","MenuToggle","position","notch","positionClass","menuToggle","isPosition","isExpanded","chevronUp","chevronDown","MenuItem","icons","invite","personAddOutline","handRightOutline","end","closeCircleOutline","videocamOutline","micOutline","screenShare","laptopOutline","easelOutline","personRemoveOutline","menuItem","iconClass","activeClass","MenuItems","menuItems","top","canScreenShare","screenShareVisibility","handleScreenShareClick","canWhiteboardEnable","handleWhiteboardClick","handleMemberRemoveClick","bottom","canInviteMember","handleInviteMemberClick","canRaiseHand","handleRaiseHandClick","canEndMeeting","handleEndMeetingClick","canVideoMute","handleVideoClick","canAudioMute","handleAudioClick","mobileClass","mobile","items","item","Menu","handleToggleChange","setState","inviteText","SocialSharing","share","copyToClipboard","postion","menu","Video","setSource","element","srcObject","hasChangedRenderId","autoPlay","playsInline","ref","filpClass","horizontalFlip","FloatButton","colors","removeHost","floatButton","color","size","RaiseHand","VideoBlock","ratioClass","ratio","videoBlock","WhiteboardBrushService","brush","parseInt","freeDrawingBrush","WhiteboardCanvas","innerWidth","mobileHeight","desktopHeight","innerHeight","initialize","onMouseDown","onTouchStart","WhiteboardMenuItem","colorPaletteOutline","brushOutline","zoomIn","addOutline","zoomOut","removeOutline","trashOutline","whiteboardMenuItem","WhiteboardBrushColorItem","style","whiteboardBrushColorItem","background","hex","WhiteboardBrushColor","whiteboardBrushService","whiteboardBrushColor","isActiveColor","WhiteboardBrushSize","whiteboardBrushSize","sizeInput","min","max","WhiteboardMenuContent","brushSizeWrapperClass","isActive","brushSizeWrapper","whiteboardMenuContent","handleBrushColorChange","handleBrushSizeChange","WhiteboardMenu","handleItemClick","handleActiveMenuClick","clearMenu","zoom","handleCanvasClearClick","replaceActiveMenu","zoomCanvas","clearCanvas","whiteboardMenu","Whiteboard","whiteboardDrawingService","handleCanvasClick","handleAdd","handleDrawingAdd","setColor","replaceColor","setSize","replaceSize","_set","handleAddDrawing","syncDrawing","setPresets","ActiveVideo","visibilityClass","hide","videoBlockClassName","handleVideoBlockClick","handleWhiteboardCanvasClearClick","handleWhiteboardDrawingAdd","Skeleton","marginTop","marginBottom","paddingBottom","shapeClass","skeleton","defaultProps","ActiveVideoSkeleton","activeVideoSkeleton","skeletonHeight","Meeting","peerService","videoService","notificationService","screenCaptureService","rtpSenderService","hostMiddleware","handleMenuRaiseHandClick","handleMenuEndMeetingClick","handleMenuVideoClick","handleMenuAudioClick","handleMenuScreenShareClick","handleMenuWhiteboardClick","handleMenuMemberRemoveClick","handleMenuToggleChange","getScreenStream","onended","switchUserStreamToMedia","getStream","getMediaStream","replaceUserStream","replaceStream","handleStreamStop","socket","disconnect","toggleVideoMute","toggleAudioMute","switchUserStreamToScreen","isMenuExpanded","raiseHandTimeout","setHostVideoActive","exitMeeting","notifyMember","canConferenceCall","handleCallStreaming","videoColumnSize","onDisconnect","stopUserVideo","resetMeeting","socketUnsubscribe","resetType","removeAccessToken","createMediaVideo","localVideo","onCalling","remoteVideo","onReceiveCall","answerCall","notifyHost","isMemberMeeting","handleErrors","onOpen","setId","handleRemoteRaiseHand","handleRemoteMemberRemove","handleDisconnect","handleUserStream","handleReceiveCall","joinMeeting","handleRemoteDisconnect","handleRemoteRTPTrackReplacement","handleRemoteConferenceCall","handleRemoteWhiteboardEnabled","handleRemoteWhiteboardDrawingAdd","handleRemoteWhiteboardDrawingSync","handleRemoteWhiteboardCanvasClear","handleMeeting","activeVideoBlock","activeVideoSkeletonVisibility","menuTopSpaceClass","canMenuTopSpace","menuTopSpace","filter","every","InstallRequest","admin","Install","handleCreateClick","validateInstall","replaceConfirmPassword","createAdmin","AdminSignInRequest","AdminSignIn","handleSignInClick","AdminMiddleware","HostsRequest","AdminMenu","handleSignOutClick","adminMenu","activeClassName","HostCreate","handleCreateHostClick","replaceName","appUrl","copyCredentials","Host","handleDeleteClick","user","lastMeeting","heading","time","lastMeetingAt","moment","format","HostSkeleton","minWidth","maxWidth","random","randomWidth","Hosts","adminMiddleware","handleHostDeleteClick","listHosts","replaceHosts","pullHost","deleteHost","sizeSm","pushHost","setHosts","hostSkeletons","isEmpty","range","skeletonsLength","hostSkeleton","EditorService","editor","clipboard","convert","root","innerHTML","Quill","delta","getDelta","setContents","getContent","list","align","modules","toolbar","toolbarOptions","matchVisual","theme","PrivacyEditRequest","body","PrivacyEdit","editorService","handleSaveClick","read","replacePrivacy","setContent","onContentChange","update","setPrivacy","handlePrivacyChange","save","PrivacyRequest","PrivacySkeleton","lines","line","paragraph","Privacy","privacyHTML","skeletonVisibility","NotFound","handleReturnHomeClick","notFound","description","preload","component","Provider","LocalStorage","setupConfig","mode","deferredPrompt","prompt","userChoice","choiceResult","outcome","checkPwaPrompted","preventDefault","setPwaInstallPrompted","handlePwaInstall","promptPwaInstall","exact","ReactDOM","render","document","getElementById","registerWorker"],"mappings":"yFACAA,EAAOC,QAAU,CAAC,yBAA2B,2DAA2D,OAAS,2C,oBCAjHD,EAAOC,QAAU,CAAC,sBAAwB,qDAAqD,iBAAmB,kD,oBCAlHD,EAAOC,QAAU,CAAC,SAAW,2BAA2B,cAAgB,gCAAgC,MAAQ,0B,oBCAhHD,EAAOC,QAAU,CAAC,oBAAsB,iDAAiD,KAAO,oC,oBCAhGD,EAAOC,QAAU,CAAC,YAAc,iCAAiC,KAAO,4B,oBCAxED,EAAOC,QAAU,CAAC,QAAU,yBAAyB,QAAU,2B,oBCA/DD,EAAOC,QAAU,CAAC,OAAS,yB,oBCA3BD,EAAOC,QAAU,CAAC,MAAQ,uB,oBCA1BD,EAAOC,QAAU,CAAC,UAAY,+B,oBCA9BD,EAAOC,QAAU,CAAC,qBAAuB,qD,oBCAzCD,EAAOC,QAAU,CAAC,eAAiB,yC,oBCAnCD,EAAOC,QAAU,CAAC,WAAa,iC,0DCD/B,IAAIC,EAAM,CACT,8BAA+B,CAC9B,IACA,GAED,uBAAwB,CACvB,IACA,GAED,uBAAwB,CACvB,IACA,GAED,0BAA2B,CAC1B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,wBAAyB,CACxB,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,sBAAuB,CACtB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,qBAAsB,CACrB,IACA,IAED,mCAAoC,CACnC,IACA,IAED,uBAAwB,CACvB,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,wBAAyB,CACxB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,wBAAyB,CACxB,IACA,IAED,uBAAwB,CACvB,IACA,GAED,uBAAwB,CACvB,IACA,IAED,yBAA0B,CACzB,IACA,GAED,8BAA+B,CAC9B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,sBAAuB,CACtB,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,wBAAyB,CACxB,IACA,IAED,gCAAiC,CAChC,IACA,KAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAOG,QAAQC,UAAUC,MAAK,WAC7B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBP,EAAM,KAEjD,MADAM,EAAEE,KAAO,mBACHF,KAIR,IAAIG,EAAMX,EAAIE,GAAMU,EAAKD,EAAI,GAC7B,OAAOR,EAAoBK,EAAEG,EAAI,IAAIJ,MAAK,WACzC,OAAOJ,EAAoBS,MAG7BX,EAAoBY,KAAO,WAC1B,OAAOC,OAAOD,KAAKb,IAEpBC,EAAoBW,GAAK,IACzBd,EAAOC,QAAUE,G,oBChMjB,IAAID,EAAM,CACT,sBAAuB,CACtB,IACA,KAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAOG,QAAQC,UAAUC,MAAK,WAC7B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBP,EAAM,KAEjD,MADAM,EAAEE,KAAO,mBACHF,KAIR,IAAIG,EAAMX,EAAIE,GAAMU,EAAKD,EAAI,GAC7B,OAAOR,EAAoBK,EAAEG,EAAI,IAAIJ,MAAK,WACzC,OAAOJ,EAAoBS,MAG7BX,EAAoBY,KAAO,WAC1B,OAAOC,OAAOD,KAAKb,IAEpBC,EAAoBW,GAAK,IACzBd,EAAOC,QAAUE,G,kBCxBjB,SAASc,EAAoBb,GAC5B,IAAIM,EAAI,IAAIC,MAAM,uBAAyBP,EAAM,KAEjD,MADAM,EAAEE,KAAO,mBACHF,EAEPO,EAAoBF,KAAO,WAAa,MAAO,IAC/CE,EAAoBT,QAAUS,EAC9BjB,EAAOC,QAAUgB,EACjBA,EAAoBH,GAAK,K,2LCInBI,EAAcC,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DASC,SAASC,EAAUC,GACxB,GAA6C,kBAAmBC,UAAW,CAMzE,GAJkB,IAAIC,IACpBC,GACAR,OAAOC,SAASQ,MAEJC,SAAWV,OAAOC,SAASS,OAIvC,OAGFV,OAAOW,iBAAiB,QAAQ,WAC9B,IAAMC,EAAK,UAAMJ,GAAN,sBAEPV,IAgEV,SAAkCc,EAAeP,GAE/CQ,MAAMD,EAAO,CACXE,QAAS,CAAE,iBAAkB,YAE5BzB,MAAK,SAAA0B,GAEJ,IAAMC,EAAcD,EAASD,QAAQG,IAAI,gBAEnB,MAApBF,EAASG,QACO,MAAfF,IAA8D,IAAvCA,EAAYG,QAAQ,cAG5Cb,UAAUc,cAAcC,MAAMhC,MAAK,SAAAiC,GACjCA,EAAaC,aAAalC,MAAK,WAC7BW,OAAOC,SAASuB,eAKpBC,EAAgBb,EAAOP,MAG1BqB,OAAM,WACLC,QAAQC,IACN,oEAvFAC,CAAwBjB,EAAOP,GAI/BC,UAAUc,cAAcC,MAAMhC,MAAK,WACjCsC,QAAQC,IACN,iHAMJH,EAAgBb,EAAOP,OAM/B,SAASoB,EAAiBb,EAAeP,GACvCC,UAAUc,cACPhB,SAASQ,GACTvB,MAAK,SAAAiC,GACJA,EAAaQ,cAAgB,WAC3B,IAAMC,EAAmBT,EAAaU,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiBG,QACf5B,UAAUc,cAAce,YAI1BR,QAAQC,IACN,iHAKEvB,GAAUA,EAAO+B,UACnB/B,EAAO+B,SAASd,KAMlBK,QAAQC,IAAI,sCAGRvB,GAAUA,EAAOgC,WACnBhC,EAAOgC,UAAUf,WAO5BI,OAAM,SAAAY,GACLX,QAAQW,MAAM,4CAA6CA,M,ICnG5CC,E,8GAISC,eACxBD,EAAqBE,iBACrB,SAACC,GAAD,OAAyBC,YAAWD,OAEdtB,Q,KARPmB,EACJE,gBAA+B,CAAC,UAAW,Y,mFCKvCG,E,uKAYjB,OAAOC,KAAKC,MAAMC,YAChB,yBAAKC,UAAWC,IAAOC,QACrB,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAMC,GAAIC,GAAOC,KAAKC,MACpB,yBACEN,UAAWC,IAAOM,KAClBC,IAAKX,KAAKU,KACVE,IAAKjD,uBAET,yBAAKwC,UAAWH,KAAKa,cAClBlD,oD,2BAtBb,IAAM+C,EAAOV,KAAKC,MAAMa,OAAS,iBAAmB,WACpD,MAAM,gBAAN,OAAuBJ,K,mCAIvB,IAAMK,EAAcf,KAAKC,MAAMa,QAAUV,IAAOU,OAChD,MAAM,GAAN,OAAUV,IAAOY,QAAjB,YAA4BD,O,GARIE,a,iBCDfC,E,uKAQjB,OAAOlB,KAAKC,MAAMC,YAChB,yBAAKC,UAAWH,KAAKG,WAClBH,KAAKC,MAAMkB,Y,gCATA,IACRC,EAAUpB,KAAKC,MAAfmB,MACFC,EAAaD,GAAShB,IAAOgB,GACnC,MAAM,GAAN,OAAUhB,IAAOkB,UAAjB,YAA8BD,O,GAJKJ,a,iBCHlBM,E,uKAOjB,OACE,yBACEpB,UAAWH,KAAKG,UAChBQ,IAAI,yBACJC,IAAI,yB,gCATR,IAAMY,EAAYxB,KAAKC,MAAMwB,MAAQrB,IAAOqB,KAC5C,MAAM,GAAN,OAAUrB,IAAOsB,kBAAjB,YAAsCF,O,GAHKP,a,iBCE1BU,E,uKAcjB,OACE,yBAAKxB,UAAWH,KAAKG,WACnB,kBAAC,IAAD,CACEA,UAAWC,IAAOwB,KAClBtB,GAAIC,GAAOsB,QAAQpB,MAFrB,kBAKA,uBACEN,UAAWC,IAAO0B,KAClBC,wBAAyB/B,KAAKgC,e,gCArBpC,IAAMjB,EAAcf,KAAKC,MAAMa,QAAUV,IAAOU,OAChD,MAAM,GAAN,OAAUV,IAAO4B,UAAjB,YAA8BjB,K,gCAI9B,IACMkB,GAAO,IAAIC,MAAOC,cAExB,MAAO,CAAEC,OADC,iBAFMzE,oBAEN,YAAwBsE,Q,GATChB,a,kBCClBoB,E,uKAUjB,OAAOrC,KAAKC,MAAMC,YAChB,yBAAKC,UAAWC,IAAOkC,QACrB,kBAAC,EAAD,CAAmBb,KAAMzB,KAAKuC,wBAC9B,kBAAC,EAAD,CAAWzB,OAAQd,KAAKwC,qB,4CAX5B,OAAQxC,KAAKC,MAAMa,S,sCAInB,OAAO5D,QAAQ8C,KAAKC,MAAMa,Y,GANMG,a,wCCK9BwB,EAAgB,CACpBC,KAAM,CACJC,KAAM,OAIGC,EAAsB,SAChBC,GACf,MAAO,CAAEF,KAAM,wBAAyBE,aCf5C,IAAMC,EAAoB,CACxBC,QAAS,GACTC,cAAe,KACfC,UAAW,GAGAL,EAAU,CACrBM,eADqB,SACLH,GACd,MAAO,CAAEJ,KAAM,wBAAyBI,YAE1CI,qBAJqB,SAICH,GACpB,MAAO,CAAEL,KAAM,+BAAgCK,kBAEjDI,iBAPqB,SAOHH,GAChB,MAAO,CAAEN,KAAM,2BAA4BM,eAqBxC,SAASI,EAAWhE,GACzB,OAAOiE,oBAAUjE,EAAMyD,OC7BzB,IAAMS,EAAwB,CAC5BC,SAAU,GACVC,SAAU,GACVC,gBAAiB,ICLnB,IAAMC,EAAgC,CACpCH,SAAU,GACVC,SAAU,I,YCkDNG,EAAwB,CAC5B/G,GAAI,GACJgH,aAAc,GACdC,OAAQ,GACRC,YAAa,IAAIC,YACjBC,aAAc,IAAID,YAClBE,MAAO,GACPC,mBAAoB,GACpBC,mBAAmB,EACnBC,aAAc,CAAC,MAAO,WAGXzB,EAA0B,CACrC0B,UADqC,SAC1BzH,GACT,MAAO,CAAE8F,KAAM,qBAAsB9F,OAEvC0H,oBAJqC,SAIhBV,GACnB,MAAO,CAAElB,KAAM,gCAAiCkB,iBAElDW,cAPqC,SAOtBV,GACb,MAAO,CAAEnB,KAAM,yBAA0BmB,WAE3CW,mBAVqC,SAUjBV,GAClB,MAAO,CAAEpB,KAAM,+BAAgCoB,gBAEjDW,oBAbqC,SAahBT,GACnB,MAAO,CAAEtB,KAAM,gCAAiCsB,iBAElDU,mBAhBqC,SAgBjBd,EAAce,GAEhC,MAAO,CAAEjC,KAAM,+BAAgCkC,QAD/B,CAAEhB,eAAce,YAGlCE,iBApBqC,SAoBnBjB,EAAckB,GAE9B,MAAO,CAAEpC,KAAM,6BAA8BkC,QAD7B,CAAEhB,eAAckB,UAGlCC,sBAxBqC,SAwBdnB,EAAcoB,GAEnC,MAAO,CAAEtC,KAAM,mCAAoCkC,QADnC,CAAEhB,eAAcoB,eAGlCC,mBA5BqC,SA4BjBrB,EAAcsB,GAEhC,MAAO,CAAExC,KAAM,+BAAgCkC,QAD/B,CAAEhB,eAAcsB,YAGlCC,0BAhCqC,SAgCVjB,GACzB,MAAO,CAAExB,KAAM,sCAAuCwB,uBAExDkB,yBAnCqC,SAmCXC,GACxB,MAAO,CAAE3C,KAAM,qCAAsC2C,YAEvDC,6BAtCqC,SAsCP1B,EAAc2B,GAE1C,MAAO,CAAE7C,KAAM,2CAA4CkC,QAD3C,CAAEhB,eAAc2B,WAGlCC,6BA1CqC,SA0CP5B,EAAc2B,GAE1C,MAAO,CAAE7C,KAAM,2CAA4CkC,QAD3C,CAAEhB,eAAc2B,WAGlCE,oBA9CqC,SA8ChB7B,GACnB,MAAO,CAAElB,KAAM,iCAAkCkB,iBAEnD8B,UAjDqC,SAiD1BC,GACT,MAAO,CAAEjD,KAAM,qBAAsBiD,UAEvCC,SApDqC,SAoD3BC,GACR,MAAO,CAAEnD,KAAM,oBAAqBmD,SAEtCC,sBAvDqC,SAuDdC,GACrB,MAAO,CAAErD,KAAM,kCAAmCqD,sBAEpDC,iBA1DqC,SA0DnB5B,GAChB,MAAO,CAAE1B,KAAM,6BAA8B0B,iBAE/C6B,UA7DqC,SA6D1BrC,GACT,MAAO,CAAElB,KAAM,qBAAsBkB,iBAEvCsC,iBAhEqC,SAgEnB9B,GAChB,MAAO,CAAE1B,KAAM,6BAA8B0B,iBAE/C+B,MAnEqC,WAoEnC,MAAO,CAAEzD,KAAM,mBAwHZ,SAASU,EAAWhE,GACzB,OAAOiE,oBAAUjE,EAAMuE,SC7PzB,IAAMyC,GAAkB,CACtBC,UAAW,IAGA1D,GAAuB,CAClC2D,iBADkC,SAChBD,GAChB,MAAO,CAAE3D,KAAM,0BAA2B2D,cAE5CE,wBAJkC,SAITF,GACvB,OAAOG,EAAenC,UAAUgC,KCPpC,IAAMI,GAAoB,CACxBlD,SAAU,GACVC,SAAU,IAGCb,GAAwB,CACnC+D,gBADmC,SAClBnD,GACf,MAAO,CAAEb,KAAM,yBAA0Ba,aAE3CoD,gBAJmC,SAIlBnD,GACf,MAAO,CAAEd,KAAM,yBAA0Bc,aAE3CoD,mBAPmC,SAOflE,GAClB,OAAOmE,EAA2BnE,KCbtC,IAAMoE,GAA8B,CAClCC,KAAM,GACNxD,SAAU,GACVC,SAAU,ICIZ,IAAMwD,GAAoB,CACxBA,MAAO,ICZT,IAAMpF,GAAwB,CAC5BA,QAAS,ICDX,IAAMqF,GAAgC,CACpCrF,QAAS,ICIX,IAAMsF,GAA8B,CAClCC,WAAY,KACZC,UAAW,IACXC,WAAY,WCHd,IAAMC,GAAWC,0BAAgB,CAC/B/E,IZUK,WAA8C,IAA3BpD,EAA0B,uDAAlBoD,EAAKgF,EAAa,uCAClD,OAAQA,EAAO9E,MACb,IAAK,wBAEH,OADAF,EAAIC,KAAKC,KAAO8E,EAAO5E,SAChBS,oBAAUb,GACnB,QACE,OAAOpD,IYfXyD,MXQK,WAAgD,IAA7BzD,EAA4B,uDAApByD,EAAO2E,EAAa,uCACpD,OAAQA,EAAO9E,MACb,IAAK,wBAEH,OADAG,EAAMC,QAAU0E,EAAO1E,QAChBO,oBAAUR,GACnB,IAAK,+BAEH,OADAA,EAAME,cAAgByE,EAAOzE,cACtBM,oBAAUR,GACnB,IAAK,2BAEH,OADAA,EAAMG,UAAYwE,EAAOxE,UAClBK,oBAAUR,GAEnB,QACE,OAAOzD,IWpBXkE,QVcK,WAAkD,IAA/BlE,EAA8B,uDAAtBkE,EAASkE,EAAa,uCACtD,OAAQA,EAAO9E,MACb,IAAK,2BAEH,OADAY,EAAQC,SAAWiE,EAAOjE,SACnBF,oBAAUC,GACnB,IAAK,2BAEH,OADAA,EAAQE,SAAWgE,EAAOhE,SACnBH,oBAAUC,GACnB,IAAK,mCAEH,OADAA,EAAQG,gBAAkB+D,EAAO/D,gBAC1BJ,oBAAUC,GACnB,QACE,OAAOlE,IUzBXsE,YTOK,WAAsD,IAAnCtE,EAAkC,uDAA1BsE,EAAa8D,EAAa,uCAC1D,OAAQA,EAAO9E,MACb,IAAK,iCAEH,OADAgB,EAAYH,SAAWiE,EAAOjE,SACvBF,oBAAUK,GACnB,IAAK,iCAEH,OADAA,EAAYF,SAAWgE,EAAOhE,SACvBH,oBAAUK,GACnB,QACE,OAAOtE,ISfXgH,KPKK,WAA+C,IAA5BhH,EAA2B,uDAAnBgH,GAAMoB,EAAa,uCACnD,OAAQA,EAAO9E,MACb,IAAK,0BAEH,OADA0D,GAAKC,UAAYmB,EAAOnB,UACjBhD,oBAAU+C,IACnB,QACE,OAAOhH,IOVXqH,MNUK,WAAgD,IAA7BrH,EAA4B,uDAApBqH,GAAOe,EAAa,uCACpD,OAAQA,EAAO9E,MACb,IAAK,yBAEH,OADA+D,GAAMlD,SAAWiE,EAAOjE,SACjBF,oBAAUoD,IACnB,IAAK,yBAEH,OADAA,GAAMjD,SAAWgE,EAAOhE,SACjBH,oBAAUoD,IACnB,QACE,OAAOrH,IMlBXuE,QR8HK,WAAkD,IAA/BvE,EAA8B,uDAAtBuE,EAAS6D,EAAa,uCACtD,OAAQA,EAAO9E,MACb,IAAK,qBAEH,OADAiB,EAAQ/G,GAAK4K,EAAO5K,GACbyG,oBAAUM,GACnB,IAAK,gCAEH,OADAA,EAAQC,aAAe4D,EAAO5D,aACvBP,oBAAUM,GACnB,IAAK,yBAEH,OADAA,EAAQE,OAAS2D,EAAO3D,OACjBR,oBAAUM,GACnB,IAAK,+BAEH,OADAA,EAAQG,YAAc0D,EAAO1D,YACtBT,oBAAUM,GAEnB,IAAK,gCAEH,OADAA,EAAQK,aAAewD,EAAOxD,aACvBX,oBAAUM,GAEnB,IAAK,+BAAiC,IAAD,EACF6D,EAAO5C,QAAhChB,EAD2B,EAC3BA,aAAce,EADa,EACbA,OAChBgB,EAAQ8B,eAAK9D,EAAQE,OAAQ,CAAEjH,GAAIgH,IAEzC,OADI+B,IAAOA,EAAMhB,OAASA,GACnBtB,oBAAUM,GAEnB,IAAK,6BAA+B,IAAD,EACF6D,EAAO5C,QAA9BhB,EADyB,EACzBA,aAAckB,EADW,EACXA,KAChBa,EAAQ8B,eAAK9D,EAAQE,OAAQ,CAAEjH,GAAIgH,IAEzC,OADI+B,IAAOA,EAAMb,KAAOA,GACjBzB,oBAAUM,GAEnB,IAAK,mCAAqC,IAAD,EACH6D,EAAO5C,QAAnChB,EAD+B,EAC/BA,aAAcoB,EADiB,EACjBA,UAChBW,EAAQ8B,eAAK9D,EAAQE,OAAQ,CAAEjH,GAAIgH,IAEzC,OADI+B,IAAOA,EAAMX,UAAYA,GACtB3B,oBAAUM,GAEnB,IAAK,+BAAiC,IAAD,EACF6D,EAAO5C,QAAhChB,EAD2B,EAC3BA,aAAcsB,EADa,EACbA,OAChBwC,EAAcD,eAAK9D,EAAQE,OAAQ,CAAEqB,WACrCyC,EAAcF,eAAK9D,EAAQE,OAAQ,CAAEjH,GAAIgH,IAG/C,OAFI8D,IAAaA,EAAYxC,QAAUA,GACnCyC,IAAaA,EAAYzC,OAASA,GAC/B7B,oBAAUM,GAEnB,IAAK,sCAEH,OADAA,EAAQO,mBAAqBsD,EAAOtD,mBAC7Bb,oBAAUM,GACnB,IAAK,qCAEH,OADAA,EAAQQ,kBAAoBqD,EAAOnC,QAC5BhC,oBAAUM,GAEnB,IAAK,2CAA6C,IAAD,EACX6D,EAAO5C,QAArBhI,EADyB,EACvCgH,aAAkB2B,EADqB,EACrBA,MACpBI,EAAQ8B,eAAK9D,EAAQE,OAAQ,CAAEjH,OAErC,OADI+I,IAAOA,EAAMiC,YAAYjC,MAAQJ,GAC9BlC,oBAAUM,GAEnB,IAAK,2CAA6C,IAAD,EACX6D,EAAO5C,QAArBhI,EADyB,EACvCgH,aAAkB2B,EADqB,EACrBA,MACpBI,EAAQ8B,eAAK9D,EAAQE,OAAQ,CAAEjH,OAErC,OADI+I,IAAOA,EAAMiC,YAAYC,MAAQtC,GAC9BlC,oBAAUM,GAEnB,IAAK,iCAAmC,IAChB/G,EAAO4K,EAArB5D,aACF+B,EAAQ8B,eAAK9D,EAAQE,OAAQ,CAAEjH,OAErC,OADI+I,IAAOA,EAAMmC,SAAWC,eACrB1E,oBAAUM,GAEnB,IAAK,qBACH,IAAMqE,EAAWtI,eAAKiE,EAAQE,OAAQ,CAAEjH,GAAI4K,EAAO7B,MAAM/I,KAEzD,OADKoL,GAAUrE,EAAQE,OAAOoE,KAAKT,EAAO7B,OACnCtC,oBAAUM,GAEnB,IAAK,oBAEH,OADAA,EAAQM,MAAMgE,KAAKT,EAAO3B,MACnBxC,oBAAUM,GAEnB,IAAK,kCACH,IAAMuE,EAAmB,SAACC,GAAD,OAA4CC,KAAKC,UAAUF,IAC5EpC,EAAsByB,EAAtBzB,kBACFuC,EAAWtM,cAAI2H,EAAQO,mBAAoBgE,GAC3CK,EAAgBC,oBAAUF,GAAU,SAAAH,GACxC,OAAOA,IAAYC,KAAKC,UAAUtC,MAE9BiC,EAAWO,GAAiB,EAElC,OADKP,GAAUrE,EAAQO,mBAAmB+D,KAAKlC,GACxC1C,oBAAUM,GAEnB,IAAK,6BAEH,OADAA,EAAQS,aAAa6D,KAAKT,EAAOpD,cAC1Bf,oBAAUM,GACnB,IAAK,qBAAuB,IACJ/G,EAAO4K,EAArB5D,aACFoE,EAAWtI,eAAKiE,EAAQE,OAAQ,CAAEjH,OAIxC,OAHIoL,IACFrE,EAAQE,OAAS4E,iBAAO9E,EAAQE,OAAQ,CAAEjH,QAErCyG,oBAAUM,GAEnB,IAAK,6BAEH,OADA+E,eAAK/E,EAAQS,aAAcoD,EAAOpD,cAC3Bf,oBAAUM,GACnB,IAAK,gBAKH,OAJAA,EAAQ/G,GAAK,GACb+G,EAAQC,aAAe,GACvBD,EAAQE,OAAS,GACjBF,EAAQS,aAAe,CAAC,MAAO,UACxBf,oBAAUM,GAEnB,QACE,OAAOvE,IQ7OX0H,WLSK,WAAqD,IAAlC1H,EAAiC,uDAAzB0H,GAAYU,EAAa,uCACzD,OAAQA,EAAO9E,MACb,IAAK,2BAEH,OADAoE,GAAWC,KAAOS,EAAOT,KAClB1D,oBAAUyD,IACnB,IAAK,+BAEH,OADAA,GAAWvD,SAAWiE,EAAOjE,SACtBF,oBAAUyD,IACnB,IAAK,+BAEH,OADAA,GAAWtD,SAAWgE,EAAOhE,SACtBH,oBAAUyD,IACnB,QACE,OAAO1H,IKpBX4H,MJaK,WAAgD,IAA7B5H,EAA4B,uDAApB4H,GAAOQ,EAAa,uCACpD,OAAQA,EAAO9E,MACb,IAAK,sBAEH,OADAsE,GAAMA,MAAQQ,EAAOR,MACd3D,oBAAU2D,IACnB,IAAK,kBAEH,OADAA,GAAMA,MAAM2B,QAAQnB,EAAOoB,MACpBvF,oBAAU2D,IACnB,IAAK,kBAAoB,IACfpK,EAAO4K,EAAP5K,GACFoL,EAAWtI,eAAKsH,GAAMA,MAAO,CAAEpK,OAIrC,OAHIoL,IACFhB,GAAMA,MAAQyB,iBAAOzB,GAAMA,MAAO,CAAEpK,QAE/ByG,oBAAU2D,IAEnB,QACE,OAAO5H,II7BXwC,QHLK,WAAkD,IAA/BxC,EAA8B,uDAAtBwC,GAAS4F,EAAa,uCACtD,OAAQA,EAAO9E,MACb,IAAK,0BAEH,OADAd,GAAQA,QAAU4F,EAAO5F,QAClByB,oBAAUzB,IACnB,QACE,OAAOxC,IGAX6H,YFNK,WAAsD,IAAnC7H,EAAkC,uDAA1B6H,GAAaO,EAAa,uCAC1D,OAAQA,EAAO9E,MACb,IAAK,+BAEH,OADAuE,GAAYrF,QAAU4F,EAAO5F,QACtByB,oBAAU4D,IACnB,QACE,OAAO7H,IECX8H,WDMK,WAAqD,IAAlC9H,EAAiC,uDAAzB8H,GAAYM,EAAa,uCACzD,OAAQA,EAAO9E,MACb,IAAK,iCAEH,OADAwE,GAAWC,WAAaK,EAAOL,WACxB9D,oBAAU6D,IACnB,IAAK,gCAEH,OADAA,GAAWE,UAAYI,EAAOJ,UACvB/D,oBAAU6D,IACnB,IAAK,iCAEH,OADAA,GAAWG,WAAaG,EAAOH,WACxBhE,oBAAU6D,IACnB,QACE,OAAO9H,MCfEyJ,yBAAYvB,GAAUwB,8BAAoBC,8BCzBpCC,G,8GAGqB,IAC9BhG,EAAciG,EAAeC,GAAMC,YAAnCnG,UACRoG,aAAapG,GACbkG,GAAMG,SAASC,EAAanG,iBAAiB,M,qCAGT,IAAD,OAC7BH,EAAoB9F,OAAOqM,YAAW,WAC1CL,GAAMG,SAASC,EAAarG,eAAe,KAC3C,EAAKuG,mBACJzJ,KAAK0J,SACRP,GAAMG,SAASC,EAAanG,iBAAiBH,M,2BAGlCF,EAAiBC,GAC5BhD,KAAK2I,OACLQ,GAAMG,SAASC,EAAarG,eAAeH,IACvCC,EACFmG,GAAMG,SAASC,EAAapG,qBAAqBH,IAC5ChD,KAAK2J,iB,6BAIZ3J,KAAKyJ,iBACLN,GAAMG,SAASC,EAAarG,eAAe,KAC3CiG,GAAMG,SAASC,EAAapG,qBAAqB,W,KA5BhC8F,GACJS,QAAkB,I,wBCG7BE,G,kDACJ,WAAa3J,GAAoB,IAAD,8BAC9B,cAAMA,IACD4J,YAAc,EAAKA,YAAYC,KAAjB,gBACnB,EAAKC,kBAAoB,EAAKA,kBAAkBD,KAAvB,gBACzB,EAAKE,mBAAqB,EAAKA,mBAAmBF,KAAxB,gBAJI,E,0DA6BzB9J,KAAKC,MAAM+C,eAAeiG,GAAaN,S,0CAI5CM,GAAaN,S,2CAIT3I,KAAKC,MAAM+C,gBACbhD,KAAKC,MAAM+C,gBACXiG,GAAaN,U,+BAKf,OACE3I,KAAKC,MAAM8C,SACT,yBACE5C,UAAWH,KAAKG,UAChB8J,QAASjK,KAAK6J,aACd,yBAAK1J,UAAWC,KAAO8J,SACrB,kBAAC,IAAD,CACE/J,UAAWC,KAAO+J,KAClBA,KAAMC,MACR,0BAAMjK,UAAWC,KAAO2C,SAAU/C,KAAKC,MAAM8C,UAE9C/C,KAAK4C,W,gCA/CZ,IAAMyH,GAAerK,KAAKC,MAAM+C,eAAiB5C,KAAOkK,OACxD,MAAM,GAAN,OAAUlK,KAAO0C,MAAjB,YAA0BuH,K,8BAI1B,OAAOrK,KAAKC,MAAM+C,eAChB,yBAAK7C,UAAWC,KAAOwC,SACrB,yBACEzC,UAAWC,KAAOmK,OAClBN,QAASjK,KAAK+J,mBAFhB,MAKA,yBACE5J,UAAWC,KAAOoK,QAClBP,QAASjK,KAAKgK,oBAFhB,Y,GArBY/I,aA8DLwJ,eAAQpH,EAAWT,EAAnB6H,CAA4Bb,I,oBC5DtBc,G,uKAwBjB,OACE,yBAAKvK,UAAWC,KAAOuK,MACrB,yBAAKxK,UAAWH,KAAK4K,eACnB,kBAAC,EAAD,CACE1K,WAAYF,KAAK6K,iBACjB/J,OAAQd,KAAKC,MAAMa,SACrB,kBAAC,EAAD,CACEZ,WAAYF,KAAK8K,oBACjB1J,MAAOpB,KAAKC,MAAMqB,WACjBtB,KAAKC,MAAMkB,WAGhB,kBAAC,EAAD,CACEjB,WAAYF,KAAK+K,iBACjBjK,OAAQd,KAAKgL,eACf,kBAAC,GAAD,S,oCArCJ,IAAMjK,EAAcf,KAAKC,MAAMa,QAAUV,KAAOU,OAC1CmK,EAAiB7K,KAAOJ,KAAKC,MAAMqB,WACzC,MAAM,GAAN,OAAUlB,KAAO8K,KAAjB,YAAyBnK,EAAzB,YAAwCkK,K,uCAIxC,MAAgC,SAAzBjL,KAAKC,MAAMqB,Y,0CAIlB,OAAQtB,KAAKC,MAAMa,S,uCAInB,MAAgC,UAAzBd,KAAKC,MAAMqB,Y,mCAIlB,OAAQtB,KAAKC,MAAMa,W,GApBWG,aCF5BkK,G,kDAIJ,WAAalL,GAAsB,IAAD,8BAChC,cAAMA,IAJRyJ,aAGkC,IAFlCzG,eAEkC,EAEhC,EAAKyG,QAAU,IACf,EAAKzG,UAAY,KAHe,E,wDAMpB,IAAD,OACXjD,KAAKiD,UAAY9F,OAAOqM,YACtB,kBAAM,EAAKvJ,MAAMmL,QAAQlD,KAAK3H,GAAOC,KAAKC,QAC1CT,KAAK0J,W,yCAKH1J,KAAKiD,WAAWoG,aAAarJ,KAAKiD,a,2CAGjB,IAAD,OACpBoI,IAAQC,IAAIC,YAAY,cAAc,SAACC,GACrC,IAAMC,EAAOD,EAAKE,IAAIC,MAAMhO,kCAA4BiO,MAClDC,EAASC,qBAAWL,EAAM,aAC1BM,EAAUC,mBAAS,CAAC,SAAU,WAAYP,IAC5CI,GAAUE,KACZ,EAAKE,mBACL,EAAKhM,MAAMmL,QAAQlD,KAAKuD,S,0CAM5BzL,KAAKkM,YACLlM,KAAKmM,uB,+BAIL,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,GAAD,CACErL,QAAQ,EACRQ,UAAU,gB,GA5CAL,aAmDPmL,eAAWjB,I,oBCpDLkB,G,uKAEjB,OACE,yBAAKlM,UAAWC,KAAOkM,QACrB,kBAAC,IAAD,CACEnM,UAAWC,KAAO8J,QAClBqC,MAAM,QACNC,OAAO,QACPvC,QAASjK,KAAKC,MAAM4J,aACnB7J,KAAKC,MAAM6B,W,GATcb,aCA9BwL,G,kDACJ,WAAaxM,GAAmB,IAAD,8BAC7B,cAAMA,IACDyM,iBAAmB,EAAKA,iBAAiB5C,KAAtB,gBACxB,EAAK6C,gBAAkB,EAAKA,gBAAgB7C,KAArB,gBAHM,E,+DAO7B9J,KAAKC,MAAMmL,QAAQlD,KAAK3H,GAAOmG,MAAMjG,Q,wCAIrCT,KAAKC,MAAMmL,QAAQlD,KAAK3H,GAAO8F,KAAK5F,Q,+BAIpC,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,GAAD,CACEK,QAAQ,EACRQ,UAAU,SACV,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,GAAD,CACEQ,KAAK,kBACL+H,YAAa7J,KAAK0M,mBACpB,kBAAC,GAAD,CACE5K,KAAK,iBACL+H,YAAa7J,KAAK2M,4B,GA9BnB1L,aAyCJmL,eAAWK,I,0CCvCLG,G,uKAEjB,OACE,2BACEzM,UAAWC,KAAOyM,MAClB7F,KAAMhH,KAAKC,MAAM+G,KACjBrE,KAAM3C,KAAKC,MAAM0C,KACjBmK,MAAO9M,KAAKC,MAAM6M,MAClBC,YAAa/M,KAAKC,MAAM8M,YACxBC,SAAUhN,KAAKC,MAAMgN,aACrBC,aAAa,Y,GAVcjM,aCI7BkM,G,kDACJ,WAAalN,GAAa,IAAD,8BACvB,cAAMA,IACDmN,kBAAoB,EAAKA,kBAAkBtD,KAAvB,gBACzB,EAAK6C,gBAAkB,EAAKA,gBAAgB7C,KAArB,gBAHA,E,8DAMNuD,GACjB,IAAMC,EAASD,EAAMC,OACbR,EAAgBQ,EAAhBR,MACK,cADWQ,EAATtG,MACWhH,KAAKC,MAAMsG,iBAAiBuG,K,wCAItD,IAAMxG,EAAYiH,eAAKvN,KAAKC,MAAMqG,WAClC,IAAKA,EAAW,CAEd,OAAO2C,GAAaf,KADJ,yCAGlBlI,KAAKC,MAAMuG,wBAAwBF,GACnCtG,KAAKC,MAAMmL,QAAQlD,KAAK3H,GAAOqD,QAAQnD,Q,4CAGjB,IACd+M,EAAWxN,KAAKC,MAAMmL,QAAQhO,SAA9BoQ,OAEFlH,EADQmH,KAAGC,MAAMF,EAAQ,CAAEG,mBAAmB,IAC5B9Q,GACpByJ,GAAWtG,KAAKC,MAAMsG,iBAAiBD,K,kCAI3CtG,KAAKC,MAAMsG,iBAAiB,M,0CAI5BvG,KAAK4N,wB,6CAIL5N,KAAK6N,c,+BAIL,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,GAAD,CACE/M,QAAQ,EACRQ,UAAU,SACV,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,GAAD,CACE0F,KAAK,YACLrE,KAAK,OACLmK,MAAO9M,KAAKC,MAAMqG,UAClByG,YAAY,aACZE,aAAcjN,KAAKoN,oBACrB,kBAAC,GAAD,CACEtL,KAAK,eACL+H,YAAa7J,KAAK2M,4B,GA5DnB1L,aAuEJmL,eAAW3B,aflDnB,SAAoBpL,GACzB,OAAOiE,oBAAUjE,EAAMgH,QeiDoBzD,GAAnB6H,CAA4B0C,K,qBCnFjCW,G,iDACTC,QAAyB1C,IAAQ2C,Q,KAEjCC,WAAsBnO,YAAW,Y,yFAEhCoO,G,6EACLlO,KAAKiO,W,yCACA9Q,OAAOgR,aAAaC,QAAQF,I,uBAEXlO,KAAK+N,QAAQ3P,IAAI,CAAE8P,Q,uBAAnCpB,E,EAAAA,M,kBACDA,G,0KAIAoB,EAAapB,G,qEAClB9M,KAAKiO,W,gBACP9Q,OAAOgR,aAAaE,QAAQH,EAAKpB,G,sCAE3B9M,KAAK+N,QAAQO,IAAI,CAAEJ,MAAKpB,U,+KAIpBoB,G,qEACRlO,KAAKiO,W,gBACP9Q,OAAOgR,aAAaI,WAAWL,G,sCAEzBlO,KAAK+N,QAAQS,OAAO,CAAEN,Q,8GCnBbO,G,WAInB,aAAgB,yBAHRP,SAGO,OAFPQ,oBAEO,EACb1O,KAAKkO,IAAM,CACTS,mBAAoB,qBACpBC,YAAa,eAEf5O,KAAK0O,eAAiB,IAAIZ,G,sGAGJe,G,yFACS7O,KAAK0O,eACjCtQ,IAAI4B,KAAKkO,IAAIS,oB,OADVG,E,OAEAC,IAAcD,GAChB5R,QAAQmL,KAAKqF,MAAMoB,IAEvBD,EAASE,G,4LAGkBF,G,8EACrBE,EAAc1G,KAAKC,WAAU,G,SAC7BtI,KAAK0O,eAAeJ,IAAItO,KAAKkO,IAAIS,mBAAoBI,G,OAC3DF,I,qLAGoBA,G,uFACM7O,KAAK0O,eAAetQ,IAAI4B,KAAKkO,IAAIU,a,OAArDA,E,OACNC,EAASD,G,qLAGWA,EAAqBC,G,iFACnC7O,KAAK0O,eAAeJ,IAAItO,KAAKkO,IAAIU,YAAaA,G,OACpDC,I,0LAGuBA,G,iFACjB7O,KAAK0O,eAAeF,OAAOxO,KAAKkO,IAAIU,a,OAC1CC,I,8GC3CiBG,G,WAGnB,aAAgB,yBAFRC,gBAEO,EACbjP,KAAKiP,WAAa,IAAIR,G,sDAGLI,GACjB7O,KAAKiP,WAAWC,gBAAe,SAAAN,GAC7B,IAAMO,EAASC,KAAMC,OAAO,CAC1BC,QAAQ,WAAD,OAAa3R,kCACpBM,QAAS,CAAEsR,cAAc,UAAD,OAAYX,MAEtCC,EAASM,Q,kCAIQ1P,GACnB,IACMsD,EADetD,EAAMvB,UAAYuB,EAAMvB,SAASsN,KAAKzI,SAC5BtD,EAAMsD,QACrCkG,GAAaf,KAAKnF,K,0BAGftC,EAAcoO,GAAkC,IAAD,OAClD7O,KAAKwP,WAAU,SAAAL,GACbA,EAAO/Q,IAAIqC,GACRjE,MAAK,SAAA0B,GAAQ,OAAI2Q,EAAS3Q,EAASsN,SACnC3M,OAAM,SAAAY,GACLoP,EAAS,MACT,EAAKY,YAAYhQ,W,2BAKnBgB,EAAcoE,EAAcgK,GAAkC,IAAD,OACjE7O,KAAKwP,WAAU,SAAAL,GACbA,EAAOO,KAAKjP,EAAMoE,GACfrI,MAAK,SAAA0B,GAAQ,OAAI2Q,EAAS3Q,EAASsN,SACnC3M,OAAM,SAAAY,GACLoP,EAAS,MACT,EAAKY,YAAYhQ,W,4BAKlBgB,EAAcoE,EAAcgK,GAA4C,IAAD,OAC5E7O,KAAKwP,WAAU,SAAAL,GACbA,EAAOQ,MAAMlP,EAAMoE,GAChBrI,MAAK,SAAA0B,GAAQ,OAAI2Q,EAAS3Q,EAASsN,SACnC3M,OAAM,SAAAY,GACLoP,EAAS,MACT,EAAKY,YAAYhQ,W,6BAKjBgB,EAAcoE,EAAcgK,GAA4C,IAAD,OAC7E7O,KAAKwP,WAAU,SAAAL,GACbA,EAAOS,OAAOnP,EAAM,CAAE+K,KAAM3G,IACzBrI,MAAK,SAAA0B,GAAQ,OAAI2Q,EAAS3Q,EAASsN,SACnC3M,OAAM,SAAAY,GACLoP,EAAS,MACT,EAAKY,YAAYhQ,a,KCxDNoQ,G,WAInB,aAAgB,yBAHRC,oBAGO,OAFPb,gBAEO,EACbjP,KAAK8P,eAAiB,IAAId,GAC1BhP,KAAKiP,WAAa,IAAIR,G,gEAGKsB,EAAgBlB,GAC3C,IAAMhG,EAAgC,CAAEhM,GAAIkT,GAC5C/P,KAAK8P,eAAeH,MAAM,sBAAuB9G,GAAM,SAAA3K,GACjDA,GAAU2Q,S,6BAIVmB,EAAgCnB,GAAuB,IAAD,OAC5D7O,KAAK8P,eAAeJ,KAAK,eAAgBM,GAAa,SAAA9R,GACpD,GAAIA,EAAU,CAAC,IACLrB,EAAoBqB,EAApBrB,GAAI+R,EAAgB1Q,EAAhB0Q,YACZ,EAAKK,WAAWgB,eAAerB,GAAa,WAC1C,EAAKsB,oBAAoBrT,EAAIgS,c,KCpBjCsB,G,kDAGJ,WAAalQ,GAAa,IAAD,8BACvB,cAAMA,IAHRmQ,aAEyB,EAEvB,EAAKA,QAAU,IAAIC,GACnB,EAAKjD,kBAAoB,EAAKA,kBAAkBtD,KAAvB,gBACzB,EAAK4C,iBAAmB,EAAKA,iBAAiB5C,KAAtB,gBAJD,E,8DAONuD,GACjB,IAAMC,EAASD,EAAMC,OACbR,EAAgBQ,EAAhBR,MACR,OADwBQ,EAATtG,MAEb,IAAK,WACHhH,KAAKC,MAAM0G,gBAAgBmG,GAC3B,MACF,IAAK,WACH9M,KAAKC,MAAM2G,gBAAgBkG,M,yCAKZ,IAAD,SACa9M,KAAKC,MAC9B+P,EAAc,CAAExM,SAFJ,EACVA,SACwBC,SAFd,EACAA,UAElBzD,KAAKoQ,QAAQE,OAAON,GAAa,WAC/B,EAAK/P,MAAM4G,mBAAmB,QAC9B,EAAK5G,MAAMmL,QAAQlD,KAAK3H,GAAOqD,QAAQnD,W,kCAKzCT,KAAKC,MAAM0G,gBAAgB,IAC3B3G,KAAKC,MAAM2G,gBAAgB,M,6CAI3B5G,KAAK6N,c,+BAIL,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,GAAD,CACE/M,QAAQ,EACRQ,UAAU,SACV,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,GAAD,CACE0F,KAAK,WACLrE,KAAK,OACLmK,MAAO9M,KAAKC,MAAMuD,SAClBuJ,YAAY,WACZE,aAAcjN,KAAKoN,oBACrB,kBAAC,GAAD,CACEpG,KAAK,WACLrE,KAAK,WACLmK,MAAO9M,KAAKC,MAAMwD,SAClBsJ,YAAY,WACZE,aAAcjN,KAAKoN,oBACrB,kBAAC,GAAD,CACEtL,KAAK,gBACL+H,YAAa7J,KAAK0M,6B,GAjElBzL,aA4ELmL,eAAW3B,anB5CnB,SAAoBpL,GACzB,OAAOiE,oBAAUjE,EAAMqH,SmB2CoB9D,GAAnB6H,CAA4B0F,K,qBCnFjCI,G,WASnB,aAAe,yBAFPpB,YAEM,EACZnP,KAAKmP,OAAS,IAAIqB,KAAKD,EAAYE,S,4DAGb9N,GACtB,OAAQA,GACN,IAAK,uBACH,MAAO,gCACT,IAAK,eACH,MAAO,+BACT,IAAK,aACH,MAAO,wBACT,IAAK,cACH,MAAO,kBACT,IAAK,UACH,MAAO,qCACT,IAAK,mBACH,MAAO,2BACT,IAAK,kBACH,MAAO,6BACT,IAAK,eACH,MAAO,yBACT,IAAK,eACH,MAAO,0BACT,IAAK,gBACH,MAAO,2BACT,IAAK,iBACH,MAAO,8BACT,IAAK,SACH,MAAO,gCACT,QACE,MAAO,0B,mCAIAyI,GAAmB,IAAD,OAC7BpL,KAAKmP,OAAOuB,GAAG,SAAS,SAACjR,GAAW,IAC1BkD,EAASlD,EAATkD,KACFI,EAAU,EAAK4N,gBAAgBhO,GACrCsG,GAAaf,KAAKnF,GAEDiJ,mBADO,CAAC,UAAW,eAAgB,oBACTrJ,IAC7ByI,EAAQlD,KAAK3H,GAAOC,KAAKC,W,6BAIpCoO,GACL7O,KAAKmP,OAAOuB,GAAG,QAAQ,SAACE,GAAD,OAAuB/B,EAAS+B,Q,2BAGpDtK,EAAmB1B,EAAqBiK,GAC3C,IAAM/I,EAAO9F,KAAKmP,OAAOrJ,KAAKQ,EAAW1B,GACzCiK,EAAS/I,K,oCAGG+I,GACZ7O,KAAKmP,OAAOuB,GAAG,QAAQ,SAAC5K,GAAD,OAAU+I,EAAS/I,Q,iCAGjCA,EAAuB+K,GAChC/K,EAAKgL,OAAOD,K,gCAGJ/K,EAAuB+I,GAC/B/I,EAAK4K,GAAG,UAAU,SAACK,GACjB,IAAMC,EAAqBlL,EAAKmL,KAChCpC,EAASmC,EAAoBD,Q,mCAK/B/Q,KAAKmP,OAAO+B,Y,mCAGDrC,GACX7O,KAAKmP,OAAOuB,GAAG,SAAS,kBAAM7B,W,KApFb0B,GACJE,QAAU,CACvB5H,KAAMlL,iCACN8C,KAAM,QACN0Q,QAAQ,G,ICPSC,G,qGACK,I3BiCC/R,E2B/BvB,MAAsB,U3B+BCA,E2BhCO8J,GAAMC,W3BiC/B9F,oBAAUjE,EAAMoD,M2BjCbC,KACKC,O,kCAIbwG,GAAMG,SAASxC,EAA2B,W,KCDzBuK,G,WAGnB,aAAgB,yBAFNC,iBAEK,EACbtR,KAAKsR,YAAc,IAAIF,G,yDAGD9K,GAClBtG,KAAKsR,YAAYC,cACnBpI,GAAMG,SAAS7C,EAAenC,UAAUgC,M,sCAIjBzC,GACzBsF,GAAMG,SAAS7C,EAAelC,oBAAoBV,M,wCAGjCA,GAAuB,IAChCC,EAAW0N,EAAiBrI,GAAMC,YAAlCtF,OAER,OADwBnE,eAAKmE,EAAQ,CAAEjH,GAAIgH,M,4BAItCA,EAAsBgL,GAC3B7O,KAAKyR,aAAa5N,GAClB7D,KAAK0R,gBAAgB7N,GAErBgL,EADkB7O,KAAK2R,kB,qCAIT5N,GACdoF,GAAMG,SAAS7C,EAAehC,mBAAmBV,M,sCAGlCE,GACfkF,GAAMG,SAAS7C,EAAe/B,oBAAoBT,M,uCAIlD,OAAOuN,EAAiBrI,GAAMC,YAAYrF,c,wCAI1C,OAAOyN,EAAiBrI,GAAMC,YAAYnF,e,qCAI1C,OAAOuN,EAAiBrI,GAAMC,YAAYvM,K,wCAI1C,OAAO2U,EAAiBrI,GAAMC,YAAYvF,e,iCAI1C,OAAO2N,EAAiBrI,GAAMC,YAAYlF,Q,oCAG7BL,GAEb,OAD0B2N,EAAiBrI,GAAMC,YAAzCvM,KACcgH,I,sCAGPA,GACf,OAAQ7D,KAAK4R,cAAc/N,K,oCAGdA,GAEb,OAAQA,IADqB2N,EAAiBrI,GAAMC,YAA5CvF,e,sCAIOA,GACf,OAAO7D,KAAKsR,YAAYC,eAAiBvR,KAAK4R,cAAc/N,K,wCAG3CA,GACjB,OAAQ7D,KAAK4R,cAAc/N,KAAkB7D,KAAK6R,kBAAkBhO,K,qCAIpEsF,GAAMG,SAAS7C,EAAeL,W,+BAGtBN,GACRqD,GAAMG,SAAS7C,EAAeZ,SAASC,Q,KCxFtBgM,G,WAGnB,aAAgB,yBAFRC,oBAEO,EACb/R,KAAK+R,eAAiB,IAAIV,G,+FAGXjG,EAAkByD,G,2FAEvBmD,EAAiBvU,UAAUwU,aAA3BD,aACFE,EAAc,CAAEtM,OAAO,EAAMkC,OAAO,G,SACHkK,EAAaE,G,OAA9CrB,E,OACN7Q,KAAK+R,eAAeI,eAAetB,GACnChC,EAASgC,G,kDAET5H,GAAaf,KAAK,iCAClBkD,EAAQlD,KAAK3H,GAAOC,KAAKC,M,iMAIPoO,G,yFAEZqD,EAAc,CAAEpK,OAAO,EAAMlC,OAAO,G,SACHnI,UAAUwU,aAC9CD,aAAaE,G,OADVE,E,OAENvD,EAASuD,G,gDAETnJ,GAAaf,KAAK,wC,sJAILtD,GACf,IAAMyN,EAAQC,gBAAM1N,EAAO2N,kBAE3B,OADIF,IAAOA,EAAM/M,SAAW+M,EAAM/M,WAC3B+M,GAAQA,EAAM/M,U,sCAGNV,GACf,IAAMyN,EAAQC,gBAAM1N,EAAO4N,kBAE3B,OADIH,IAAOA,EAAM/M,SAAW+M,EAAM/M,WAC3B+M,GAAQA,EAAM/M,Y,KC1CJmN,G,iGACT5O,GAA+C,IAC/CC,EAAWT,EAAU8F,GAAMC,YAA3BtF,OACR,OAAO4D,eAAK5D,GAAQ,SAAA8B,GAAK,OAAIA,EAAM/I,KAAOgH,O,qCAGH,IAC/BA,EAAiBR,EAAU8F,GAAMC,YAAjCvF,aACR,OAAO7D,KAAK0S,SAAS7O,K,2CAGM,IACfyC,EAAcjD,EAAU8F,GAAMC,YAAlCvM,GACRsM,GAAMG,SAAS1G,EAAQsC,mBAAmBoB,GAAW,Q,KCdpCqM,G,WAGnB,aAAgB,yBAFRC,uBAEO,EACb5S,KAAK4S,kBAAoB,IAAIH,G,iDAGzB7N,GACJ,IAAMiO,EAASjO,EAAOkO,YACtBC,kBAAQF,GAAQ,SAAAR,GAAK,OAAIA,EAAMW,Y,qCAI/B,IAAMpN,EAAQ5F,KAAK4S,kBAAkBK,eAC/BZ,EAAQzM,GAAS0M,gBAAM1M,EAAMhB,OAAO2N,kBAC1C,OAAOrV,QAAQmV,GAASA,EAAM/M,W,qCAI9B,IAAMM,EAAQ5F,KAAK4S,kBAAkBK,eAC/BZ,EAAQzM,GAAS0M,gBAAM1M,EAAMhB,OAAO4N,kBAC1C,OAAOtV,QAAQmV,GAASA,EAAM/M,a,KCTb4N,G,WAOnB,aAAgB,yBANNnB,oBAMK,OAJPoB,wBAIO,OAFPP,uBAEO,EACb5S,KAAK+R,eAAiB,IAAIV,GAC1BrR,KAAKmT,mBAAqB,IAAIR,GAC9B3S,KAAK4S,kBAAoB,IAAIH,G,qDAGrB5O,GAAgC,IAChCC,EAAW0N,EAAiBrI,GAAMC,YAAlCtF,OACR,OAAOnE,eAAKmE,EAAQ,CAAEjH,GAAIgH,M,kCAI1BA,EACAe,EACAG,EACA8J,GACA,IAAMrJ,EAAQxF,KAAK+R,eAAeqB,cAAcvP,GAehDgL,EAdc,CACZhS,GAAIgH,EACJe,SACAG,OACAE,WAAW,EACXoO,aAAcrT,KAAK+R,eAAeuB,gBAAgBzP,GAClDsB,OAAQnF,KAAK+R,eAAeH,cAAc/N,GAC1C2B,QACAqC,YAAa,CACXjC,OAAO,EACPkC,OAAO,GAETC,SAAUC,kB,uCAMZnE,EACAe,EACAiK,GACA7O,KAAKuT,YAAY1P,EAAce,EAAQ,QAASiK,K,gCAGvCjJ,GACTuD,GAAMG,SAAS7C,EAAed,UAAUC,IACxC4D,YAAW,WACTL,GAAMG,SAAS7C,EAAef,oBAAoBE,EAAM/I,OACvD,O,gCAGMgH,GACTsF,GAAMG,SAAS7C,EAAeP,UAAUrC,M,sCAIxC,IAAM2P,EAAYxT,KAAK4S,kBAAkBK,eACrCO,GAAWxT,KAAKmT,mBAAmBH,KAAKQ,EAAU5O,U,wCAGrCA,EAAqBG,GAAuB,IACrDlB,EAAiB2N,EAAiBrI,GAAMC,YAAxCvF,aACRsF,GAAMG,SAAS7C,EAAe3B,iBAAiBjB,EAAckB,IAC7DoE,GAAMG,SAAS7C,EAAe9B,mBAAmBd,EAAce,Q,eC9E9C6O,G,WAKnB,aAAgB,yBAJNnC,iBAIK,OAFLS,oBAEK,EACb/R,KAAKsR,YAAc,IAAIF,GACvBpR,KAAK+R,eAAiB,IAAIV,G,0DAGLxN,GACrB,IAAM0N,EAAavR,KAAKsR,YAAYC,aAC9BM,EAAoB7R,KAAK+R,eAAeF,kBAAkBhO,GAChE,OAAO0N,IAAeM,I,sCAGChO,GACvB,OAAQ7D,KAAK+R,eAAeF,kBAAkBhO,K,yCAIzB,IAAI6P,QAAK,CAAE/S,IAAK,CAAC,8BACzBgT,S,iCAGH9P,GACN7D,KAAK4T,cAAc/P,IAAe7D,KAAK6T,qB,mCAG/BhQ,GACR7D,KAAK8T,gBAAgBjQ,IAAe7D,KAAK6T,uB,cC9B5BE,G,WAKnB,aAIE,OAJc,oBACTA,EAAwBC,WAC3BD,EAAwBC,SAAWhU,MAE9B+T,EAAwBC,S,yDAI/BD,EAAwBE,OAAS,IAAIC,UAAOC,OAAO,mBAAoB,CACrEC,eAAe,M,kCAKjB,OAAOL,EAAwBE,S,oCAGlB7S,EAAeiT,GAC5BN,EAAwBE,OAAOK,cAAc,CAAElT,QAAOiT,a,2BAGlD1R,GACJ,IAAM4R,EAAeR,EAAwBE,OAAOO,UACvC,OAAT7R,EACFoR,EAAwBE,OAAOQ,QAAuB,IAAfF,GACrB,QAAT5R,GACToR,EAAwBE,OAAOQ,QAAuB,GAAfF,K,8BAKzCR,EAAwBE,OAAOS,Y,KApCdX,GACJC,c,EADID,GAGJE,Y,MCCIU,G,WAGnB,aAAgB,yBAFNC,6BAEK,EACb5U,KAAK4U,wBAA0B,IAAIb,G,kDAO9B3L,EAAwCyG,GAE7CqF,UAAOW,KAAKC,eAAe,CAAC1M,GAAUyG,EADpB,M,+BAIVzG,GACR,IAAMG,EAAWF,KAAKqF,MAAMrF,KAAKC,UAAUtI,KAAK+U,gBAC1C9M,EAAWQ,oBAAUF,EAAUH,IAAY,EACjD,OAAOH,I,0BAGJM,GAA2C,IAAD,OAC7CwK,kBAAQxK,GAAU,SAAAH,GAAO,OAAI,EAAK6L,OAAOe,IAAI5M,Q,oCAI7C,OAAOpI,KAAKiU,OAAOgB,e,gCAGVpG,GACT7O,KAAKiU,OAAOvD,GAAG,eAAgB7B,K,6BAvB/B,OAAO7O,KAAK4U,wBAAwBM,gB,KCXnBC,G,WAUnB,aAAgB,yBATRC,WAAa,CACnBxP,OAAO,EACPkC,OAAO,GAOM,KAJPiK,oBAIO,OAFPsD,kBAEO,EACbrV,KAAK+R,eAAiB,IAAIV,GAC1BrR,KAAKqV,aAAe,IAAIvD,G,oEAGOrS,GAC/B,IAAM6V,EAAgB,CACpB,8BAA+B,8BAC/B,oBAAqB,KACrB,IAAK,0CAEDvS,EAAUuS,EAAS7V,EAAMsD,SACzBwS,OAA+BC,IAAZzS,EAAyBuS,EAAS,KAAOvS,EAC5D0S,EAAuC,OAApBF,GAA6BA,EAClDE,GAAiBxM,GAAaf,KAAKuN,K,iFAGRxR,G,iFACzBjE,KAAKqV,aAAaK,gBAAe,SAAAtD,GACrC,IAAMuD,EAAcvD,EAAYI,iBAChCO,kBAAQ4C,GAAa,SAAAtD,GAAK,OAAIpO,EAAa2R,SAASvD,S,gLAIvCxD,G,gGAE2BpR,UAAUwU,aAC/C4D,gBAAgB7V,KAAKoV,Y,cADlBnR,E,gBAEAjE,KAAK8V,kBAAkB7R,G,OAC7BjE,KAAK+R,eAAegE,gBAAgB9R,GACpC4K,EAAS5K,G,kDAETjE,KAAKgW,wBAAL,M,kIC7CeC,G,uGAIjB,IAAMC,EAAQ,kBAAcvY,iCAAd,WACdsY,EAAc9G,OAAS,IAAIgH,UAAOD,K,gCAGlBE,EAAiBvH,GACjCoH,EAAc9G,OAAOkH,UAAUD,GAAS,SAAAvR,GAAO,OAAIgK,EAAShK,Q,kCAG1CuR,GAClBH,EAAc9G,OAAOmH,YAAYF,K,8BAGnBA,EAAiBvR,GAC/BoR,EAAc9G,OAAOoH,QAAQH,EAASvR,O,KAjBrBoR,GACF9G,Y,ECUJ,QACblK,UAAW,CACTmR,QADS,SACA9P,GACP,MAAM,cAAN,OAAqBA,IAEvB+P,UAJS,SAIE/P,EAAmBuI,GAC5BoH,GAAcI,UACZrW,KAAKoW,QAAQ9P,IACb,SAACzC,GAAD,OAA0BgL,EAAShL,OAGvCyS,YAVS,SAUIhQ,GACX2P,GAAcK,YAAYtW,KAAKoW,QAAQ9P,KAEzCiQ,QAbS,SAaAjQ,EAAmBzC,GAC1BoS,GAAcM,QAAQvW,KAAKoW,QAAQ9P,GAAYzC,KAInD2S,eAAgB,CACdJ,QADc,SACL9P,GACP,MAAM,mBAAN,OAA0BA,IAE5B+P,UAJc,SAIH/P,EAAmBuI,GAC5BoH,GAAcI,UACZrW,KAAKoW,QAAQ9P,IACb,SAACzC,GAAD,OAA0BgL,EAAShL,OAEvCyS,YATc,SASDhQ,GACX2P,GAAcK,YAAYtW,KAAKoW,QAAQ9P,KAEzCiQ,QAZc,SAYLjQ,EAAmBzC,GAC1BoS,GAAcM,QAAQvW,KAAKoW,QAAQ9P,GAAYzC,KAInD4S,iBAAkB,CAChBL,QADgB,SACP9P,GACP,MAAM,qBAAN,OAA4BA,IAE9B+P,UAJgB,SAIL/P,EAAmBuI,GAC5BoH,GAAcI,UACZrW,KAAKoW,QAAQ9P,IACb,SAACzC,GAAD,OAA0BgL,EAAShL,OAGvCyS,YAVgB,SAUHhQ,GACX2P,GAAcK,YAAYtW,KAAKoW,QAAQ9P,KAEzCiQ,QAbgB,SAaPjQ,EAAmBzC,GAC1BoS,GAAcM,QAAQvW,KAAKoW,QAAQ9P,GAAYzC,KAInDwP,aAAc,CACZ+C,QADY,SACH9P,GACP,MAAM,iBAAN,OAAwBA,IAE1B+P,UAJY,SAID/P,EAAmBuI,GAC5BoH,GAAcI,UACZrW,KAAKoW,QAAQ9P,IACb,SAACzC,GAAD,OAA0BgL,EAAShL,OAEvCyS,YATY,SASChQ,GACX2P,GAAcK,YAAYtW,KAAKoW,QAAQ9P,KAEzCiQ,QAZY,SAYHjQ,EAAmBzC,GAC1BoS,GAAcM,QAAQvW,KAAKoW,QAAQ9P,GAAYzC,KAInD6S,iBAAkB,CAChBN,QADgB,SACP9P,GACP,MAAM,qBAAN,OAA4BA,IAE9B+P,UAJgB,SAIL/P,EAAmBuI,GAC5BoH,GAAcI,UACZrW,KAAKoW,QAAQ9P,IACb,SAACzB,GAAD,OAAsCgK,EAAShK,OAGnDyR,YAVgB,SAUHhQ,GACX2P,GAAcK,YAAYtW,KAAKoW,QAAQ9P,KAEzCiQ,QAbgB,SAaPjQ,EAAmBzB,GAC1BoR,GAAcM,QAAQvW,KAAKoW,QAAQ9P,GAAYzB,KAInDT,kBAAmB,CACjBgS,QADiB,SACR9P,GACP,MAAM,sBAAN,OAA6BA,IAE/B+P,UAJiB,SAIN/P,EAAmBuI,GAC5BoH,GAAcI,UACZrW,KAAKoW,QAAQ9P,IACb,SAAClC,GAAD,OAAgCyK,EAASzK,OAG7CkS,YAViB,SAUJhQ,GACX2P,GAAcK,YAAYtW,KAAKoW,QAAQ9P,KAEzCiQ,QAbiB,SAaRjQ,EAAmBlC,GAC1B6R,GAAcM,QAAQvW,KAAKoW,QAAQ9P,GAAYlC,KAInDuS,sBAAuB,CACrBP,QADqB,SACZvS,GACP,MAAM,0BAAN,OAAiCA,IAEnCwS,UAJqB,SAIVxS,EAAsBgL,GAC/BoH,GAAcI,UACZrW,KAAKoW,QAAQvS,IACb,SAAC+S,GAAD,OAAoC/H,EAAS+H,OAGjDN,YAVqB,SAURzS,GACXoS,GAAcK,YAAYtW,KAAKoW,QAAQvS,KAEzC0S,QAbqB,SAaZ1S,EAAsB+S,GAC7BX,GAAcM,QAAQvW,KAAKoW,QAAQvS,GAAe+S,KAItDC,qBAAsB,CACpBT,QADoB,SACX9P,GACP,MAAM,yBAAN,OAAgCA,IAElC+P,UAJoB,SAIT/P,EAAmBuI,GAC5BoH,GAAcI,UACZrW,KAAKoW,QAAQ9P,IACb,SAAC8B,GAAD,OAA4CyG,EAASzG,OAGzDkO,YAVoB,SAUPhQ,GACX2P,GAAcK,YAAYtW,KAAKoW,QAAQ9P,KAEzCiQ,QAboB,SAaXjQ,EAAmB8B,GAC1B6N,GAAcM,QAAQvW,KAAKoW,QAAQ9P,GAAY8B,KAInD0O,sBAAuB,CACrBV,QADqB,SACZ9P,GACP,MAAM,0BAAN,OAAiCA,IAEnC+P,UAJqB,SAIV/P,EAAmBuI,GAC5BoH,GAAcI,UACZrW,KAAKoW,QAAQ9P,GACbuI,IAGJyH,YAVqB,SAURhQ,GACX2P,GAAcK,YAAYtW,KAAKoW,QAAQ9P,KAEzCiQ,QAbqB,SAaZjQ,GACP2P,GAAcM,QAAQvW,KAAKoW,QAAQ9P,GAAY,SCrKhCyQ,G,WAKnB,aAAgB,yBAJRhF,oBAIO,OAFPa,uBAEO,EACb5S,KAAK+R,eAAiB,IAAIV,GAC1BrR,KAAK4S,kBAAoB,IAAIH,G,4EAI7B,IAAMnM,EAAYtG,KAAK+R,eAAeJ,eAChC9N,EAAe7D,KAAK+R,eAAeiF,kBACnCpR,EAAQ5F,KAAK4S,kBAAkBF,SAAS7O,GAC9C,GAAI+B,EAAO,CACT,IAAMf,EAAU,CAAEhB,eAAckB,KAAMa,EAAMb,MAC5CkS,GAAcP,iBAAiBH,QAAQjQ,EAAWzB,M,oCAIvCD,GACb,IAAMV,EAAQlE,KAAK+R,eAAemF,WAClCnE,kBAAQ7O,GAAO,SAAA4B,GACb,IAAMqR,EAAUrR,EAAKsR,eAAeC,aAC9BxE,EAASjO,EAAOkO,YAChBwE,EAAc5P,eAAKyP,GAAS,gBAAG9E,EAAH,EAAGA,MAAH,MAAgC,WAAX,OAALA,QAAK,IAALA,OAAA,EAAAA,EAAOtN,SACnDwS,EAAc7P,eAAKyP,GAAS,gBAAG9E,EAAH,EAAGA,MAAH,MAAgC,WAAX,OAALA,QAAK,IAALA,OAAA,EAAAA,EAAOtN,SACnDyS,EAAa9P,eAAKmL,GAAQ,kBAAwB,UAAxB,EAAG9N,QAC7B0S,EAAa/P,eAAKmL,GAAQ,kBAAwB,UAAxB,EAAG9N,QAC/BuS,GAAeE,GAAYF,EAAYI,aAAaF,GACpDD,GAAeE,GAAYF,EAAYG,aAAaD,MAE1DzX,KAAK2X,oC,KChCYC,G,WAKnB,aAAgB,yBAJN9H,oBAIK,OAFLwB,iBAEK,EACbtR,KAAK8P,eAAiB,IAAId,GAC1BhP,KAAKsR,YAAc,IAAIF,G,iDAGnBhG,GACepL,KAAKsR,YAAYC,cAElCvR,KAAK8P,eAAe1R,IAAI,cAAc,SAAAF,GAC/BA,GAAUkN,EAAQlD,KAAK3H,GAAOmG,MAAMjG,a,uDCL5BoX,G,kDACnB,WAAa5X,GAAyB,IAAD,8BACnC,cAAMA,IACD4J,YAAc,EAAKA,YAAYC,KAAjB,gBAFgB,E,uDAUzBgO,GACV,OAAQ9X,KAAKC,MAAM6X,WAAaA,I,oCAYhC9X,KAAKC,MAAMgN,aAAajN,KAAKC,MAAM6X,Y,+BAInC,OACE,yBAAK3X,UAAWH,KAAKG,WACnB,yBACEA,UAAWC,KAAO2X,MAClB9N,QAASjK,KAAK6J,aACd,kBAAC,IAAD,CACE1J,UAAWC,KAAO+J,KAClBA,KAAMnK,KAAKmK,W,gCA5BnB,IAAM6N,EAAgB5X,KAAOJ,KAAKC,MAAM6X,UACxC,MAAM,GAAN,OAAU1X,KAAO6X,WAAjB,YAA+BD,K,2BAQ/B,OAAOhY,KAAKkY,WAAW,OACnBlY,KAAKC,MAAMkY,WAAaC,IAAYC,IACpCrY,KAAKkY,WAAW,UACdlY,KAAKC,MAAMkY,WAAaE,IAAcD,SACtC5C,M,GApB8BvU,a,oBCkBnBqX,G,4MACnBC,MAAe,CACbC,OAAQC,IACRxT,UAAWyT,IACXC,IAAKC,IACLhT,MAAOiT,IACP/Q,MAAOgR,IACPC,YAAaC,IACb7R,WAAY8R,IACZ5F,aAAc6F,K,uDAad,OAAOlZ,KAAKC,MAAMC,YAChB,yBACEC,UAAWC,KAAO+Y,SAClBlP,QAASjK,KAAKC,MAAM4J,aACpB,kBAAC,IAAD,CACE1J,UAAWH,KAAKoZ,UAChBjP,KAAMnK,KAAKmK,U,gCAfjB,IAAMkP,EAAcrZ,KAAKC,MAAMkF,QAAU/E,KAAO+E,OAChD,MAAM,GAAN,OAAU/E,KAAO+J,KAAjB,YAAyBkP,K,2BAIzB,OAAOrZ,KAAKuY,MAAMvY,KAAKC,MAAM+G,U,GAlBK/F,a,oBCHjBqY,G,uKAgFjB,OACE,yBAAKnZ,UAAWH,KAAKG,WAClBH,KAAKuZ,a,4BAhFV,MAAO,CACLC,IAAK,CACH,CACExS,KAAM,cACN7B,OAAQnF,KAAKC,MAAMwZ,eACnBvZ,WAAYF,KAAKC,MAAMyZ,sBACvB7P,YAAa7J,KAAKC,MAAM0Z,wBAE1B,CACE3S,KAAM,aACN7B,OAAQnF,KAAKC,MAAM2Z,oBACnB1Z,YAAY,EACZ2J,YAAa7J,KAAKC,MAAM4Z,uBAE1B,CACE7S,KAAM,eACN7B,QAAQ,EACRjF,WAAYF,KAAKC,MAAMqT,gBACvBzJ,YAAa7J,KAAKC,MAAM6Z,0BAG5BC,OAAQ,CACN,CACE/S,KAAM,SACN7B,OAAQnF,KAAKC,MAAM+Z,gBACnB9Z,YAAY,EACZ2J,YAAa7J,KAAKC,MAAMga,yBAE1B,CACEjT,KAAM,YACN7B,OAAQnF,KAAKC,MAAMia,aACnBha,YAAY,EACZ2J,YAAa7J,KAAKC,MAAMka,sBAE1B,CACEnT,KAAM,MACN7B,OAAQnF,KAAKC,MAAMma,cACnBla,YAAY,EACZ2J,YAAa7J,KAAKC,MAAMoa,uBAE1B,CACErT,KAAM,QACN7B,OAAQnF,KAAKC,MAAMqa,aACnBpa,YAAY,EACZ2J,YAAa7J,KAAKC,MAAMsa,kBAE1B,CACEvT,KAAM,QACN7B,OAAQnF,KAAKC,MAAMua,aACnBta,YAAY,EACZ2J,YAAa7J,KAAKC,MAAMwa,sB,gCAO9B,IAAMzC,EAAgB5X,KAAOJ,KAAKC,MAAM6X,UAClC4C,EAAc5a,YAAW,WAAaM,KAAOua,OACnD,MAAM,GAAN,OAAUva,KAAOmZ,UAAjB,YAA8BvB,EAA9B,YAA+C0C,K,gCAK/C,OADc1a,KAAK4a,MAAM5a,KAAKC,MAAM6X,UACvB7b,KAAI,SAAA4e,GAAI,OACnB,yBACE1a,UAAWC,KAAOya,KAClB3M,IAAK2M,EAAK7T,MACV,kBAAC,GAAD,CACEA,KAAM6T,EAAK7T,KACX7B,OAAQ0V,EAAK1V,OACbjF,WAAY2a,EAAK3a,WACjB2J,YAAagR,EAAKhR,sB,GA1EW5I,a,oBCQlB6Z,G,kDACnB,WAAa7a,GAAmB,IAAD,8BAC7B,cAAMA,IACDZ,MAAQ,CACXa,YAAY,GAEd,EAAK+Z,wBAA0B,EAAKA,wBAAwBnQ,KAA7B,gBAC/B,EAAKiR,mBAAqB,EAAKA,mBAAmBjR,KAAxB,gBANG,E,uDAcnBgO,GACV,OAAQ9X,KAAKC,MAAM6X,WAAaA,I,yCAGdA,GAClB9X,KAAKC,MAAM8a,mBAAmBjD,GAC9B,IAAM5X,GAAcF,KAAKC,MAAMkY,WAC/BnY,KAAKgb,SAAS,CAAE9a,iB,gDAIhB,GAAKF,KAAKC,MAAM+Z,gBAAhB,CADyB,IAEjBiB,EAAejb,KAAKC,MAApBgb,WACJnb,YAAW,UAAWob,KAAcC,MAAMF,IAE5CG,KAAgBH,GAChBhS,GAAaf,KAAK,0B,iCAIVmT,GACV,OAAOrb,KAAKkY,WAAWmD,IACrB,kBAAC,GAAD,CACElD,WAAYnY,KAAKC,MAAMkY,WACvBL,SAAU9X,KAAKC,MAAM6X,SACrB7K,aAAcjN,KAAK+a,uB,+BA+BvB,OACE,yBAAK5a,UAAWH,KAAKG,WAClBH,KAAKiY,WAAW,UAChBjY,KAAKuZ,UACLvZ,KAAKiY,WAAW,U,gCAhErB,IAAMD,EAAgB5X,KAAOJ,KAAKC,MAAM6X,UACxC,MAAM,GAAN,OAAU1X,KAAOkb,KAAjB,YAAyBtD,K,4CAgCzB,OAAQlY,YAAW,Y,gCAInB,OAAOE,KAAKX,MAAMa,YAChB,kBAAC,GAAD,CACE4X,SAAU9X,KAAKC,MAAM6X,SACrBkC,gBAAiBha,KAAKC,MAAM+Z,gBAC5BE,aAAcla,KAAKC,MAAMia,aACzBE,cAAepa,KAAKC,MAAMma,cAC1BE,aAActa,KAAKC,MAAMqa,aACzBE,aAAcxa,KAAKC,MAAMua,aACzBf,eAAgBzZ,KAAKC,MAAMwZ,eAC3BG,oBAAqB5Z,KAAKC,MAAM2Z,oBAChCtG,gBAAiBtT,KAAKC,MAAMqT,gBAC5BoG,sBAAuB1Z,KAAK0Z,sBAC5BO,wBAAyBja,KAAKia,wBAC9BE,qBAAsBna,KAAKC,MAAMka,qBACjCE,sBAAuBra,KAAKC,MAAMoa,sBAClCE,iBAAkBva,KAAKC,MAAMsa,iBAC7BE,iBAAkBza,KAAKC,MAAMwa,iBAC7Bd,uBAAwB3Z,KAAKC,MAAM0Z,uBACnCE,sBAAuB7Z,KAAKC,MAAM4Z,sBAClCC,wBAAyB9Z,KAAKC,MAAM6Z,8B,GAnEV7Y,a,oBCzBbsa,G,kDACnB,WAAatb,GAAoB,IAAD,8BAC9B,cAAMA,IACDZ,MAAQ,CACX0I,SAAU,EAAK9H,MAAM2F,MAAMmC,UAE7B,EAAKyT,UAAY,EAAKA,UAAU1R,KAAf,gBALa,E,sDAcrB2R,GAAmC,IACpC7V,EAAU5F,KAAKC,MAAf2F,MACJ6V,GAAW7V,IACb6V,EAAQC,UAAY9V,EAAMhB,U,4CAIP3E,EAAmBZ,GAAoB,IACpD0I,EAAa9H,EAAM2F,MAAnBmC,SACF4T,EAAsB5T,IAAa1I,EAAM0I,SAE/C,OADI4T,GAAoB3b,KAAKgb,SAAS,CAAEjT,aACjC4T,I,+BAGE,IAAD,OACR,OACE,2BACExb,UAAWH,KAAKG,UAChByb,UAAU,EACVpW,MAAOxF,KAAKC,MAAM2F,MAAMJ,MACxBqW,aAAa,EACbC,IAAK,SAAAL,GAAO,OAAI,EAAKD,UAAUC,Q,gCA1BnC,IACMM,IADsC,WAA1B/b,KAAKC,MAAM2F,MAAMb,OACJ3E,KAAO4b,eACtC,MAAM,GAAN,OAAU5b,KAAOwF,MAAjB,YAA0BmW,O,GAZK9a,a,oBCEdgb,G,4MACnBC,OAAiB,CACfC,WAAY,SACZlX,UAAW,W,EAGbsT,MAAe,CACb4D,WAAYjD,IACZjU,UAAWyT,K,uDAYX,OACE,yBAAKvY,UAAWC,KAAOgc,aACrB,kBAAC,IAAD,CACEjc,UAAWC,KAAOkM,OAClB+P,MAAOrc,KAAKqc,MACZC,KAAK,QACLrS,QAASjK,KAAKC,MAAM4J,aACpB,kBAAC,IAAD,CACE1J,UAAWC,KAAO+J,KAClBA,KAAMnK,KAAKmK,W,4BAjBnB,OAAOnK,KAAKkc,OAAOlc,KAAKC,MAAM+G,Q,2BAI9B,OAAOhH,KAAKuY,MAAMvY,KAAKC,MAAM+G,U,GAhBQ/F,a,qBCNpBsb,G,uKAEjB,OAAOvc,KAAKC,MAAMC,YAChB,yBAAKC,UAAWC,KAAO6E,WACrB,kBAAC,GAAD,CAAa+B,KAAK,mB,GAJa/F,a,oBCOlBub,G,kDACnB,WAAavc,GAAyB,IAAD,8BACnC,cAAMA,IACD4J,YAAc,EAAKA,YAAYC,KAAjB,gBAFgB,E,0DAYnC9J,KAAKC,MAAM4J,YAAY7J,KAAKC,MAAM2F,S,+BAIlC,OACE,yBACEzF,UAAWH,KAAKG,UAChB8J,QAASjK,KAAK6J,aACd,yBAAK1J,UAAWC,KAAO8J,SACrB,kBAAC,GAAD,CAAOtE,MAAO5F,KAAKC,MAAM2F,QACzB,kBAAC,GAAD,CAAW1F,WAAYF,KAAKC,MAAM2F,MAAMX,gB,gCAhB9C,IAAMwX,EAAarc,KAAOJ,KAAKC,MAAMyc,OAC/BhC,EAAc5a,YAAW,WAAaM,KAAOua,OACnD,MAAM,GAAN,OAAUva,KAAOuc,WAAjB,YAA+BF,EAA/B,YAA6C/B,O,GATTzZ,aCbnB2b,G,WAGnB,aAAgB,yBAFNhI,6BAEK,EACb5U,KAAK4U,wBAA0B,IAAIb,G,qDAO3BsI,GACRrc,KAAK6c,MAAMR,MAAQA,I,8BAGZC,GACPtc,KAAK6c,MAAMzb,MAAQ0b,SAASR,EAAM,M,4BARlC,OAAOtc,KAAK4U,wBAAwBM,YAAY6H,qB,KCF/BC,G,kDAGnB,WAAa/c,GAA+B,IAAD,8BACzC,cAAMA,IAHR2U,6BAE2C,EAEzC,EAAKA,wBAA0B,IAAIb,GAFM,E,4DAMzC,IAAM3S,EAAQjE,OAAO8f,WACfC,EAAgB9b,GAAS,GAAK,GAC9B+b,EAAgBhgB,OAAOigB,YACvB/I,EAASvU,YAAW,UAAYod,EAAeC,EACrDnd,KAAK4U,wBAAwBN,cAAclT,EAAOiT,K,0CAIlDrU,KAAK4U,wBAAwByI,aAC7Brd,KAAKsU,kB,+BAIL,OACE,yBACEgJ,YAAatd,KAAKC,MAAM4J,YACxB0T,aAAcvd,KAAKC,MAAM4J,aACzB,4BAAQhN,GAAG,0B,GA1B2BoE,a,oBCYzBuc,G,kDASnB,WAAavd,GAAiC,IAAD,8BAC3C,cAAMA,IATRsY,MAAe,CACb8D,MAAOoB,IACPnB,KAAMoB,IACNC,OAAQC,IACRC,QAASC,IACTpJ,MAAOqJ,KAKP,EAAKlU,YAAc,EAAKA,YAAYC,KAAjB,gBAFwB,E,0DAe3C9J,KAAKC,MAAM4J,YAAY7J,KAAKC,MAAM+G,Q,+BAIlC,OACE,kBAAC,IAAD,CACE7G,UAAWH,KAAKG,UAChBgK,KAAMnK,KAAKmK,KACXF,QAASjK,KAAK6J,gB,gCAjBlB,IAAM6Q,EAAc5a,YAAW,WAAaM,KAAOua,OACnD,MAAM,GAAN,OAAUva,KAAO4d,mBAAjB,YAAuCtD,K,2BAIvC,OAAO1a,KAAKuY,MAAMvY,KAAKC,MAAM+G,U,GApBe/F,a,qBCR3Bgd,G,kDACnB,WAAahe,GAAuC,IAAD,8BACjD,cAAMA,IACD4J,YAAc,EAAKA,YAAYC,KAAjB,gBAF8B,E,0DAejD9J,KAAKC,MAAM4J,YAAY7J,KAAKC,MAAMoc,S,+BAIlC,OACE,yBACElc,UAAWH,KAAKG,UAChB+d,MAAOle,KAAKke,MACZjU,QAASjK,KAAK6J,gB,gCAjBlB,IAAMwP,EAAcrZ,KAAKC,MAAMkF,QAAU/E,KAAO+E,OAChD,MAAM,GAAN,OAAU/E,KAAO+d,yBAAjB,YAA6C9E,K,4BAI7C,MAAO,CAAE+E,WAAYpe,KAAKC,MAAMoc,MAAMgC,S,GAZYpd,a,qBCGjCqd,G,kDAenB,WAAare,GAAmC,IAAD,8BAC7C,cAAMA,IAHRse,4BAE+C,EAE7C,EAAKA,uBAAyB,IAAI3B,GAFW,E,0DAKhCP,GACb,OAAQA,EAAMgC,MAAQre,KAAKC,MAAMoc,Q,+BAcjC,OACE,yBAAKlc,UAAWC,KAAOoe,sBACpBxe,KAAKkc,U,6BAbG,IAAD,OACZ,OAAOoC,EAAqBpC,OAAOjgB,KAAI,SAAAogB,GAAK,OAC1C,kBAAC,GAAD,CACEA,MAAOA,EACPlX,OAAQ,EAAKsZ,cAAcpC,GAC3BxS,YAAa,EAAK5J,MAAMgN,aACxBiB,IAAKmO,EAAMrV,c,GA9B+B/F,aAA7Bqd,GACZpC,OAAuC,CAC5C,CAAElV,KAAM,QAASqX,IAAK,WACtB,CAAErX,KAAM,QAASqX,IAAK,WACtB,CAAErX,KAAM,MAAOqX,IAAK,WACpB,CAAErX,KAAM,SAAUqX,IAAK,WACvB,CAAErX,KAAM,OAAQqX,IAAK,WACrB,CAAErX,KAAM,QAASqX,IAAK,WACtB,CAAErX,KAAM,OAAQqX,IAAK,WACrB,CAAErX,KAAM,SAAUqX,IAAK,WACvB,CAAErX,KAAM,OAAQqX,IAAK,Y,wBCdJK,G,kDAGnB,WAAaze,GAAkC,IAAD,8BAC5C,cAAMA,IAHRse,4BAE8C,EAE5C,EAAKA,uBAAyB,IAAI3B,GAFU,E,qDAU5C,OACE,yBAAKzc,UAAWC,KAAOue,qBACrB,yBAAKxe,UAAWC,KAAOkc,MAAOtc,KAAKsc,MACnC,2BACEnc,UAAWC,KAAOwe,UAClBjc,KAAK,QACLkc,IAAI,IACJC,IAAI,KACJhS,MAAO9M,KAAKC,MAAMqc,KAClBtP,SAAUhN,KAAKC,MAAMgN,kB,2BAb3B,MAAM,GAAN,OAAUjN,KAAKC,MAAMqc,KAArB,S,GAT6Crb,a,qBCI5B8d,G,uKACT5Z,GACR,OAAQnF,KAAKC,MAAMkF,SAAWA,I,+BAuB9B,OAAOnF,KAAKC,MAAMkF,QAChB,yBAAKhF,UAAWH,KAAKG,WACjBH,KAAKwe,qBACLxe,KAAK2e,uB,gCAtBX,IAAMK,EAAwBhf,KAAKif,SAAS,SAAW7e,KAAO8e,iBAC9D,MAAM,GAAN,OAAU9e,KAAO+e,sBAAjB,YAA0CH,K,2CAI1C,OAAOhf,KAAKif,SAAS,UACnB,kBAAC,GAAD,CACE5C,MAAOrc,KAAKC,MAAMqH,WAClB2F,aAAcjN,KAAKC,MAAMmf,2B,0CAI7B,OAAOpf,KAAKif,SAAS,SACnB,kBAAC,GAAD,CACE3C,KAAMtc,KAAKC,MAAMoH,UACjB4F,aAAcjN,KAAKC,MAAMof,4B,GArBkBpe,a,qBCM9Bqe,G,kDAKnB,WAAarf,GAA6B,IAAD,8BACvC,cAAMA,IALR2U,6BAIyC,EAEvC,EAAKA,wBAA0B,IAAIb,GACnC,EAAKwL,gBAAkB,EAAKA,gBAAgBzV,KAArB,gBAHgB,E,wDAgBvC9J,KAAKC,MAAMuf,sBAAsB,Q,wCAGhBrG,GACCnZ,KAAKC,MAAMmH,aAAe+R,EAC9BnZ,KAAKyf,YACdzf,KAAKC,MAAMuf,sBAAsBrG,K,iCAG5BxW,GACV3C,KAAK4U,wBAAwB8K,KAAK/c,GAClC3C,KAAKyf,c,oCAILzf,KAAK4U,wBAAwBF,QAC7B1U,KAAKC,MAAM0f,yBACX3f,KAAKyf,c,sCAGUtG,GACf,OAAQA,GACN,IAAK,QACHnZ,KAAK4f,kBAAkB,SACvB,MACF,IAAK,OACH5f,KAAK4f,kBAAkB,QACvB,MACF,IAAK,SACH5f,KAAK6f,WAAW,MAChB,MACF,IAAK,UACH7f,KAAK6f,WAAW,OAChB,MACF,IAAK,QACH7f,KAAK8f,iB,+BAMT,OACE,yBAAK3f,UAAWC,KAAO2f,gBACpB/f,KAAKuZ,UACN,kBAAC,GAAD,CACEpU,OAAQnF,KAAKC,MAAMmH,WACnBE,WAAYtH,KAAKC,MAAMqH,WACvBD,UAAWrH,KAAKC,MAAMoH,UACtB+X,uBAAwBpf,KAAKC,MAAMmf,uBACnCC,sBAAuBrf,KAAKC,MAAMof,2B,gCA3DxB,IAAD,OACf,OAAOC,EAAe1E,MAAM3e,KAAI,SAAA4e,GAAI,OAClC,kBAAC,GAAD,CACE7T,KAAM6T,EACNhR,YAAa,EAAK0V,gBAClBrR,IAAK2M,W,GAhB+B5Z,aAAvBqe,GAGZ1E,MAAkC,CAAC,QAAS,OAAQ,SAAU,UAAW,S,yBCG5EoF,G,kDAIJ,WAAa/f,GAAyB,IAAD,8BACnC,cAAMA,IAJRggB,8BAGqC,IAFrC1B,4BAEqC,EAEnC,EAAK0B,yBAA2B,IAAItL,GACpC,EAAK4J,uBAAyB,IAAI3B,GAClC,EAAKsD,kBAAoB,EAAKA,kBAAkBpW,KAAvB,gBACzB,EAAK0V,sBAAwB,EAAKA,sBAAsB1V,KAA3B,gBAC7B,EAAKsV,uBAAyB,EAAKA,uBAAuBtV,KAA5B,gBAC9B,EAAKuV,sBAAwB,EAAKA,sBAAsBvV,KAA3B,gBAPM,E,gEAWnC9J,KAAKC,MAAM2f,kBAAkB,Q,4CAGRxY,GACrBpH,KAAKC,MAAM2f,kBAAkBxY,K,yCAGV,IAAD,OAClBpH,KAAKigB,yBAAyBE,WAAU,SAAA9S,GACtC,EAAKpN,MAAMmgB,iBAAiB/S,Q,6CAIRgP,GACtBrc,KAAKue,uBAAuB8B,SAAShE,EAAMgC,KAC3Cre,KAAKC,MAAMqgB,aAAajE,EAAMgC,O,4CAGThR,GACrB,IACMiP,EADQjP,EAAMC,OACDR,MACnB9M,KAAKue,uBAAuBgC,QAAQjE,GACpCtc,KAAKC,MAAMugB,YAAYlE,K,oCAGT,IAAD,OACP/T,EAAWvI,KAAKC,MAAMsI,SAC5BwK,kBAAQxK,GAAU,SAAAH,IACeA,EAAQqY,KAErC,EAAKR,yBAAyBvS,MAAMtF,GAAS,SAAAG,GAC3C,EAAK0X,yBAAyBjL,IAAIzM,MAGpC,EAAK0X,yBAAyBjL,IAAI,CAAC5M,S,mCAMvCpI,KAAKue,uBAAuBgC,QAAQvgB,KAAKC,MAAMoH,WAC/CrH,KAAKue,uBAAuB8B,SAASrgB,KAAKC,MAAMqH,c,0CAIhDtH,KAAK0gB,mBACL1gB,KAAK2gB,cACL3gB,KAAK4gB,e,+BAIL,OACE,yBAAKzgB,UAAWC,KAAO+G,YACrB,kBAAC,GAAD,CACE0C,YAAa7J,KAAKkgB,oBACpB,kBAAC,GAAD,CACE9Y,WAAYpH,KAAKC,MAAMmH,WACvBE,WAAYtH,KAAKC,MAAMqH,WACvBD,UAAWrH,KAAKC,MAAMoH,UACtB+X,uBAAwBpf,KAAKof,uBAC7BC,sBAAuBrf,KAAKqf,sBAC5BM,uBAAwB3f,KAAKC,MAAM0f,uBACnCH,sBAAuBxf,KAAKwf,6B,GA7Ebve,aAmFVwJ,gB9C5DR,SAAoBpL,GACzB,OAAOiE,oBAAUjE,EAAM8H,cA7BiB,CACxCyY,kBADwC,SACrBxY,GACjB,MAAO,CAAEzE,KAAM,iCAAkCyE,eAEnDoZ,YAJwC,SAI3BnZ,GACX,MAAO,CAAE1E,KAAM,gCAAiC0E,cAElDiZ,aAPwC,SAO1BhZ,GACZ,MAAO,CAAE3E,KAAM,iCAAkC2E,gB8CgFtCmD,CAA4BuV,I,oBC/FtBa,G,uKA+BjB,OACE,kBAAC,IAAD,CACE1gB,UAAWH,KAAKG,UAChBmc,KAAK,MACJtc,KAAKmH,WACLnH,KAAK2c,c,gCAlCV,IAAMjC,EAAc5a,YAAW,WAAaM,KAAOua,OACnD,MAAM,GAAN,OAAUva,KAAOuH,YAAjB,YAAgC+S,K,0CAIhC,IAAMoG,EAAkB9gB,KAAKC,MAAMmE,mBAAqBhE,KAAO2gB,KAC/D,MAAM,GAAN,OAAU3gB,KAAOuc,WAAjB,YAA+BmE,K,iCAI/B,OACE,yBAAK3gB,UAAWH,KAAKghB,qBACnB,kBAAC,GAAD,CACEtE,MAAM,OACN9W,MAAO5F,KAAKC,MAAM2F,MAClBiE,YAAa7J,KAAKC,MAAMghB,2B,iCAM9B,OAAOjhB,KAAKC,MAAMmE,mBAChB,kBAAC,GAAD,CACEmE,SAAUvI,KAAKC,MAAMkE,mBACrBwb,uBAAwB3f,KAAKC,MAAMihB,iCACnCd,iBAAkBpgB,KAAKC,MAAMkhB,iC,GA3BIlgB,a,qBCHpBmgB,G,uKAyBjB,OAAO,yBAAKjhB,UAAWH,KAAKG,UAAW+d,MAAOle,KAAKI,W,6BAhBnD,MAAO,CACLgB,MAAOpB,KAAKC,MAAMmB,MAClBiT,OAAQrU,KAAKC,MAAMoU,OACnBgN,UAAWrhB,KAAKC,MAAMohB,UACtBC,aAActhB,KAAKC,MAAMqhB,aACzBC,cAAevhB,KAAKC,MAAMshB,iB,gCAIZ,IACRhV,EAAUvM,KAAKC,MAAfsM,MACFiV,EAAajV,GAASnM,KAAOmM,GACnC,MAAM,GAAN,OAAUnM,KAAOqhB,SAAjB,YAA6BD,O,GArBKvgB,aAAjBmgB,GACZM,aAAe,CACpBL,UAAW,IACXC,aAAc,IACdC,cAAe,IACfhV,MAAO,a,yBCPUoV,G,uKAMjB,OAAO3hB,KAAKC,MAAMC,YAChB,kBAAC,IAAD,CAAQoc,KAAK,MACX,yBAAKnc,UAAWC,KAAOwhB,qBACrB,kBAAC,GAAD,CACExgB,MAAM,OACNiT,OAAO,IACPkN,cAAevhB,KAAK6hB,iBACtB,kBAAC,IAAD,CACE1hB,UAAWC,KAAO+J,KAClBA,KAAM0O,U,qCAbd,OAAO/Y,YAAW,UAAY,uBAAyB,Y,GAFVmB,a,oBCwB3C6gB,G,kDAkBJ,WAAa7hB,GAAsB,IAAD,8BAChC,cAAMA,IAhBR8hB,iBAekC,IAdlC1M,kBAckC,IAblCtD,oBAakC,IAZlCiQ,kBAYkC,IAXlC1Q,iBAWkC,IAVlC2Q,yBAUkC,IATlChC,8BASkC,IARlCrL,6BAQkC,IAPlCsN,0BAOkC,IANlCC,sBAMkC,IALlChP,wBAKkC,IAJlClE,gBAIkC,IAHlCmT,oBAGkC,IAFlCxP,uBAEkC,EAEhC,EAAKmP,YAAc,IAAIxR,GACvB,EAAK8E,aAAe,IAAIvD,GACxB,EAAKC,eAAiB,IAAIV,GAC1B,EAAK2Q,aAAe,IAAI9O,GACxB,EAAK5B,YAAc,IAAIF,GACvB,EAAK6Q,oBAAsB,IAAIxO,GAC/B,EAAKwM,yBAA2B,IAAItL,GACpC,EAAKC,wBAA0B,IAAIb,GACnC,EAAKmO,qBAAuB,IAAI/M,GAChC,EAAKgN,iBAAmB,IAAIpL,GAC5B,EAAK5D,mBAAqB,IAAIR,GAC9B,EAAK1D,WAAa,IAAIR,GACtB,EAAK2T,eAAiB,IAAIxK,GAC1B,EAAKwK,eAAe1f,KAAK,EAAKzC,MAAMmL,SACpC,EAAKwH,kBAAoB,IAAIH,GAC7B,EAAK4P,yBAA2B,EAAKA,yBAAyBvY,KAA9B,gBAChC,EAAKwY,0BAA4B,EAAKA,0BAA0BxY,KAA/B,gBACjC,EAAKyY,qBAAuB,EAAKA,qBAAqBzY,KAA1B,gBAC5B,EAAK0Y,qBAAuB,EAAKA,qBAAqB1Y,KAA1B,gBAC5B,EAAK2Y,2BAA6B,EAAKA,2BAA2B3Y,KAAhC,gBAClC,EAAK4Y,0BAA4B,EAAKA,0BAA0B5Y,KAA/B,gBACjC,EAAK6Y,4BAA8B,EAAKA,4BAA4B7Y,KAAjC,gBACnC,EAAK8Y,uBAAyB,EAAKA,uBAAuB9Y,KAA5B,gBAC9B,EAAKmX,sBAAwB,EAAKA,sBAAsBnX,KAA3B,gBAC7B,EAAKoX,iCAAmC,EAAKA,iCAAiCpX,KAAtC,gBACxC,EAAKqX,2BAA6B,EAAKA,2BAA2BrX,KAAhC,gBA3BF,E,2DA8BlBgO,GAAyB,IAC/BzT,EAAiBrE,KAAKC,MAAtBoE,aACR,OAAO2H,mBAAS3H,EAAcyT,K,yCAgFX,IAAD,OAEZjF,EADe7S,KAAK+R,eAAe8Q,kBACb/P,YAC5BC,kBAAQF,GAAQ,SAAAR,GACdA,EAAMyQ,QAAU,kBAAM,EAAKC,gC,gDAIH,IAAD,OACzB/iB,KAAKqV,aAAa2N,UAAUhjB,KAAKC,MAAMmL,SAAS,WAC9C,IAAMrH,EAAc,EAAKgO,eAAekR,iBACxC,EAAKjB,aAAakB,kBAAkBnf,EAAa,SACjD,EAAKoe,iBAAiBgB,cAAcpf,GACpC,IAAME,EAAe,EAAK8N,eAAe8Q,kBACzC,EAAK1P,mBAAmBH,KAAK/O,Q,iDAIJ,IAAD,OAC1BjE,KAAKkiB,qBAAqBc,WAAU,WAClC,IAAM/e,EAAe,EAAK8N,eAAe8Q,kBACzC,EAAKb,aAAakB,kBAAkBjf,EAAc,UAClD,EAAKke,iBAAiBgB,cAAclf,GACpC,EAAKmf,mBACL,IAAMrf,EAAc,EAAKgO,eAAekR,iBACxC,EAAK9P,mBAAmBH,KAAKjP,Q,iDAIJ,IAAD,EAC1B,eAAI/D,KAAKwT,iBAAT,aAAI,EAAgBvO,WAApB,CAD0B,MAEGjF,KAAKC,MAA1BpD,EAFkB,EAElBA,GAAIgH,EAFc,EAEdA,aACZwf,GAAOpe,UAAUsR,QAAQ1Z,EAAIgH,M,kDAGD,IAAD,OAE3BoF,GAAaf,KADE,gCACW,WACxB,EAAK6Z,YAAYuB,kB,6CAKnB,GAAItjB,KAAKwT,UAAW,CAClB,IAAMlO,EAAUtF,KAAKqV,aAAakO,gBAAgBvjB,KAAKwT,UAAU5O,QACjE5E,KAAKC,MAAMsF,6BAA6BvF,KAAKC,MAAM4D,cAAeyB,M,6CAKpE,GAAItF,KAAKwT,UAAW,CAClB,IAAMlO,EAAUtF,KAAKqV,aAAamO,gBAAgBxjB,KAAKwT,UAAU5O,QACjE5E,KAAKC,MAAMwF,6BAA6BzF,KAAKC,MAAM4D,cAAeyB,M,mDAKhEtF,KAAKyZ,eAAgBzZ,KAAKyjB,2BACzBzjB,KAAK+iB,4B,kDAGkB,IACpBlmB,EAAOmD,KAAKC,MAAZpD,GACFuH,GAAqBpE,KAAKC,MAAMmE,kBACtCif,GAAOjf,kBAAkBmS,QAAQ1Z,EAAIuH,GACrCpE,KAAKC,MAAMoF,yBAAyBjB,K,oDAGN,IAAD,EAC7B,aAAIpE,KAAK2H,mBAAT,aAAI,EAAkB0L,aAAc,CAAC,IAC3BxW,EAAOmD,KAAKC,MAAZpD,GACRwmB,GAAOhQ,aAAakD,QAAQ1Z,EAAImD,KAAK2H,YAAY9K,O,6CAI7Bib,GACtB,IAAM4L,EAAiB1jB,KAAK0jB,eAAe5L,GADG,EAEC9X,KAAKC,MAA5CkG,EAFsC,EAEtCA,iBAAkBF,EAFoB,EAEpBA,kBACXyd,EAAiBvd,EAAmBF,GAC5C6R,K,4CAGclS,GACrB5F,KAAKC,MAAMiF,mBAAmBU,EAAM/I,IAAI,K,yDAIxCwmB,GAAOvM,sBAAsBP,QAAQvW,KAAKC,MAAMpD,M,iDAGtBwQ,GAAgB,IAClCxQ,EAAOmD,KAAKC,MAAZpD,GACFuL,EAAUiF,EAAMC,OACtBtN,KAAKC,MAAM8F,sBAAsBqC,GACjCib,GAAOxM,qBAAqBN,QAAQ1Z,EAAIuL,K,4CAGnB9B,GAAoB,IAAD,OACxC+c,GAAOpe,UAAUoR,UAAU/P,GAAW,SAAAzC,GACpC,EAAK5D,MAAM+E,sBAAsBnB,GAAc,GAC/C2F,YAAW,WACT,EAAKvJ,MAAM+E,sBAAsBnB,GAAc,KAC9Cie,EAAQ6B,uB,+CAIWrd,GAAoB,IAAD,OAC3C+c,GAAOhQ,aAAagD,UAAU/P,GAAW,SAAAzC,GACxB,EAAKkO,eAAeqB,cAAcvP,GACrC,EAAKke,YAAYuB,cAE3B,EAAKtB,aAAa9b,UAAUrC,GAC5B,EAAK+O,kBAAkBgR,2B,6CAKLtd,GAAoB,IAAD,OACzC+c,GAAO5M,iBAAiBJ,UAAU/P,GAAW,SAAAzC,GACrB,EAAKkO,eAAeH,cAAc/N,GACrC,EAAKggB,cACnB,EAAK7B,aAAa9b,UAAUrC,Q,sDAIJyC,GAAoB,IAAD,OAClD+c,GAAO3M,iBAAiBL,UAAU/P,GAAW,SAAAzB,GAAY,IAC/ChB,EAAuBgB,EAAvBhB,aAAckB,EAASF,EAATE,KACtB,EAAK9E,MAAM6E,iBAAiBjB,EAAckB,GAC1C,EAAK9E,MAAMyF,oBAAoB7B,Q,iDAIPyC,EAAmBuK,GAA2B,IAAD,OACvEwS,GAAO7M,eAAeH,UAAU/P,GAAW,SAAAzC,GACzC,EAAKoe,oBAAoB6B,aAAajgB,GAClC,EAAKkO,eAAegS,kBAAkBlgB,IACxC,EAAKke,YAAYjc,KAAKjC,EAAcgN,GAAa,SAAA/K,GAC/C,EAAKiM,eAAelM,SAASC,GAC7B,EAAKke,oBAAoBle,W,oDAMFQ,GAAoB,IAAD,OAChD+c,GAAOjf,kBAAkBiS,UAAU/P,GAAW,SAAAlC,GAC5C,EAAKnE,MAAMoF,yBAAyBjB,Q,uDAINkC,GAAoB,IAAD,OACnD+c,GAAOxM,qBAAqBR,UAAU/P,GAAW,SAAA8B,GACvB,EAAK6X,yBAAyBhY,SAASG,IAE7D,EAAK6X,yBAAyBvS,MAAMtF,GAAS,SAAAG,GAC3C,EAAK0X,yBAAyBjL,IAAIzM,W,wDAMPqI,GAA4B,IAAD,OAC5DyS,GAAO1M,sBAAsBN,UAAUzF,GAAmB,SAAAgG,GAAmB,IACnErO,EAAgCqO,EAAhCrO,SAAUnE,EAAsBwS,EAAtBxS,kBACdA,GACF,EAAKnE,MAAMoF,yBAAyBjB,GAEtC,EAAKnE,MAAMmF,0BAA0BmD,GACrC8a,GAAO1M,sBAAsBL,YAAY1F,Q,wDAIVtK,GAAoB,IAAD,OACpD+c,GAAOvM,sBAAsBT,UAAU/P,GAAW,WAChD,EAAKsO,wBAAwBF,QAC7B,EAAKzU,MAAMmF,0BAA0B,S,2BAInC0S,GACJ,OAAO9X,KAAK2H,aACV,kBAAC,GAAD,CACEmQ,SAAUA,EACVkC,gBAAiBha,KAAKga,gBACtBE,aAAcla,KAAKka,aACnBE,cAAepa,KAAKoa,cACpBE,aAActa,KAAKsa,aACnBE,aAAcxa,KAAKwa,aACnBf,eAAgBzZ,KAAKyZ,eACrBG,oBAAqB5Z,KAAK4Z,oBAC1BtG,gBAAiBtT,KAAK2H,YAAY0L,aAClC4H,WAAYjb,KAAKib,WACjB9C,WAAYnY,KAAK0jB,eAAe5L,GAChCqC,qBAAsBna,KAAKqiB,yBAC3BhI,sBAAuBra,KAAKsiB,0BAC5B/H,iBAAkBva,KAAKuiB,qBACvB9H,iBAAkBza,KAAKwiB,qBACvB7I,uBAAwB3Z,KAAKyiB,2BAC7B5I,sBAAuB7Z,KAAK0iB,0BAC5B5I,wBAAyB9Z,KAAK2iB,4BAC9B5H,mBAAoB/a,KAAK4iB,2B,4BAIxBhd,GACL,OACE,kBAAC,IAAD,CACE0W,KAAMwF,EAAQmC,gBACd/V,IAAKtI,EAAM/I,IACX,kBAAC,GAAD,CACE6f,MAAM,SACN9W,MAAOA,EACPiE,YAAa7J,KAAKihB,2B,0CAKJ,IACZpkB,EAAOmD,KAAKC,MAAZpD,GACRwmB,GAAOpe,UAAUqR,YAAYzZ,GAC7BwmB,GAAO7M,eAAeF,YAAYzZ,GAClCwmB,GAAO3M,iBAAiBJ,YAAYzZ,GACpCwmB,GAAO5M,iBAAiBH,YAAYzZ,GACpCwmB,GAAOhQ,aAAaiD,YAAYzZ,GAChCwmB,GAAOjf,kBAAkBkS,YAAYzZ,GACrCwmB,GAAOxM,qBAAqBP,YAAYzZ,GACxCwmB,GAAOvM,sBAAsBR,YAAYzZ,K,yCAGtB,IAAD,OAClBmD,KAAK+hB,YAAYmC,cAAa,WAAO,IAAD,EACL,EAAKjkB,MAA1BpD,EAD0B,EAC1BA,GAAIgH,EADsB,EACtBA,aACZwf,GAAO5M,iBAAiBF,QAAQ1Z,EAAIgH,GACpC,EAAKggB,mB,4CAIchgB,GAAuB,IAAD,EACiB7D,KAAKC,MAAzDmE,EADmC,EACnCA,kBACFwS,EAAiB,CAAErO,SAFkB,EAChBpE,mBACQC,qBACnCif,GAAO1M,sBAAsBJ,QAAQ1S,EAAc+S,K,oCAGrC,IAAD,OACb5W,KAAKgiB,aAAamC,gBAClBnkB,KAAK+R,eAAeqS,eACpBpkB,KAAKqkB,oBACLrkB,KAAK+hB,YAAYuB,aACjBtjB,KAAKsR,YAAYgT,YACjBtkB,KAAKC,MAAMoF,0BAAyB,GACpCrF,KAAKC,MAAMmF,0BAA0B,IACrCpF,KAAKiP,WAAWsV,mBAAkB,WAChC,EAAKtkB,MAAMmL,QAAQlD,KAAK3H,GAAOC,KAAKC,W,uCAItBmQ,EAA2BC,GAA2B,IAAD,OACrE7Q,KAAKgiB,aAAawC,iBAAiB5T,EAAmBC,GAAa,SAAA4T,GACjE,EAAKzC,aAAarc,UAAU8e,Q,0CAIX3e,GAAwB,IAAD,OAC1C9F,KAAK+hB,YAAY2C,UAAU5e,GAAM,SAACkL,EAAoBD,GACpD,EAAKiR,aAAawC,iBAAiBxT,EAAoBD,GAAc,SAAA4T,GACnE,EAAK3C,aAAarc,UAAUgf,W,wCAKfre,EAAmBuK,GAA2B,IAAD,OAC9D7Q,KAAK+hB,YAAY6C,eAAc,SAAA9e,GAC7B,EAAKiM,eAAelM,SAASC,GADQ,IAEvBjC,EAAiBiC,EAAvBmL,KACR,EAAK8Q,YAAY8C,WAAW/e,EAAM+K,GAClC,EAAK8F,sBAAsB9S,GAC3Bwf,GAAO7M,eAAeD,QAAQjQ,EAAWzC,GACzC,EAAKoe,oBAAoB6C,WAAWjhB,GACpC,EAAKmgB,oBAAoBle,Q,kCAIhBQ,EAAmBsK,EAA2BC,GAA2B,IAAD,OAC/E7Q,KAAK+R,eAAegT,gBAAgBnU,IACtC5Q,KAAK+hB,YAAYjc,KAAKQ,EAAWuK,GAAa,SAAA/K,GAC5C,EAAKiM,eAAelM,SAASC,GAC7B,EAAKke,oBAAoBle,Q,sCAKb,IAAD,OACPsF,EAAYpL,KAAKC,MAAjBmL,QACRpL,KAAK+hB,YAAYiD,aAAa5Z,GAC9BpL,KAAK+hB,YAAYkD,QAAO,SAAArU,GACtB,EAAKmB,eAAemT,MAAMtU,GAAmB,SAAAtK,GACvCA,GACF,EAAK6e,sBAAsB7e,GAC3B,EAAK8e,yBAAyB9e,GAC9B,EAAK+e,mBACL,EAAKhQ,aAAa2N,UAAU5X,GAAS,SAAAyF,GACnC,EAAKyU,iBAAiB1U,EAAmBC,GACzC,EAAK0U,kBAAkBjf,EAAWuK,GAClC,EAAK2U,YAAYlf,EAAWsK,EAAmBC,GAC/C,EAAK4U,uBAAuBnf,GAC5B,EAAKof,gCAAgCpf,GACrC,EAAKqf,2BAA2Brf,EAAWuK,GAC3C,EAAK+U,8BAA8Btf,GACnC,EAAKuf,iCAAiCvf,GACtC,EAAKwf,kCAAkClV,GACvC,EAAKmV,kCAAkCzf,OAEpC,EAAKud,sB,6CAMhB7jB,KAAK6jB,gB,0CAIL7jB,KAAKgmB,kB,+BAIL,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,GAAD,CACEllB,QAAQ,EACRQ,UAAU,QACV,yBAAKnB,UAAWH,KAAKG,WACnB,kBAAC,IAAD,KACE,kBAAC,IAAD,KACGH,KAAKimB,iBACN,kBAAC,GAAD,CAAqB/lB,WAAYF,KAAKkmB,iCAExC,kBAAC,IAAD,KACGlmB,KAAK8D,SAGT9D,KAAKsb,KAAK,OACVtb,KAAKsb,KAAK,gB,sCAparB,OAAQtb,KAAK2H,aAAe3H,KAAK0jB,eAAe,S,gCAIhD,IAAMhJ,EAAc5a,YAAW,WAAaM,KAAOua,OAC7CwL,EAAoBnmB,KAAKomB,iBAAmBhmB,KAAOimB,aACzD,MAAM,GAAN,OAAUjmB,KAAOwD,QAAjB,YAA4B8W,EAA5B,YAA2CyL,K,kCAI3C,OAAOze,eAAK1H,KAAKC,MAAM6D,OAAQ,Y,oDAI/B,OAAQ9D,KAAK2H,c,uCAIb,OAAO3H,KAAK2H,aACV,kBAAC,GAAD,CACE/B,MAAO5F,KAAK2H,YACZxD,mBAAoBnE,KAAKC,MAAMkE,mBAC/BC,kBAAmBpE,KAAKC,MAAMmE,kBAC9B8c,iCAAkClhB,KAAKkhB,iCACvCC,2BAA4BnhB,KAAKmhB,2BACjCF,sBAAuBjhB,KAAKihB,0B,6BAGnB,IAAD,OAEZ,OADeqF,iBAAOtmB,KAAKC,MAAM6D,OAAQ,CAAEqB,QAAQ,IACrClJ,KAAI,SAAA2J,GAAK,OAAI,EAAKA,MAAMA,Q,gCAGtB,IAAD,EACkB5F,KAAKC,MAA9B4D,EADO,EACPA,aAAcC,EADP,EACOA,OACtB,OAAO4D,eAAK5D,EAAQ,CAAEjH,GAAIgH,M,sCAI1B,OAAO3G,QAAQ8C,KAAKC,MAAMpD,M,mCAI1B,QAAKmD,KAAKwT,YACFxT,KAAKwT,UAAUvO,Y,oCAIvB,OAAO/H,QAAQ8C,KAAKC,MAAMpD,M,mCAI1B,QAAKmD,KAAKwT,YACFxT,KAAKwT,UAAU3L,YAAYjC,Q,mCAInC,QAAK5F,KAAKwT,YACFxT,KAAKwT,UAAU3L,YAAYC,Q,qCAInC,IAAMhE,EAAS9D,KAAKC,MAAM6D,OAC1B,OAAOyiB,gBAAMziB,GAAQ,SAAA8B,GAAK,MAAoB,WAAfA,EAAMb,U,0CAIrC,OAAQ/E,KAAKC,MAAMmE,oB,iCAInB,IAAMsH,EAAG,kBAAc/N,kCACfd,EAAOmD,KAAKC,MAAZpD,GACR,MAAM,4CAAN,OAAmD6O,EAAnD,oBAAkE7O,O,GA/HhDoE,aAAhB6gB,GACG6B,iBAA2B,IAD9B7B,GAEGmC,gBAA0BnkB,YAAW,UAAY,IAAM,IAiejDsM,mBAAW3B,YAAQpH,EAAWT,EAAnB6H,CAA4BqX,KC7fjC0E,G,WAGnB,aAAgB,yBAFR1W,oBAEO,EACb9P,KAAK8P,eAAiB,IAAId,G,wDAGfyX,EAA2B5X,GACtC7O,KAAK8P,eAAeJ,KAAK,SAAU+W,GAAO,SAAAvoB,GACpCA,GAAU2Q,S,sCAIDA,GACf7O,KAAK8P,eAAe1R,IAAI,UAAU,SAAAqoB,GAC5BA,GAAO5X,W,KCTX6X,G,kDAGJ,WAAazmB,GAAa,IAAD,8BACvB,cAAMA,IAHRmQ,aAEyB,EAEvB,EAAKA,QAAU,IAAIC,GACnB,EAAKjD,kBAAoB,EAAKA,kBAAkBtD,KAAvB,gBACzB,EAAK6c,kBAAoB,EAAKA,kBAAkB7c,KAAvB,gBACzB,EAAK8c,kBALkB,E,8DAQNvZ,GACjB,IAAMC,EAASD,EAAMC,OACbR,EAAgBQ,EAAhBR,MACR,OADwBQ,EAATtG,MAEb,IAAK,WACHhH,KAAKC,MAAM0G,gBAAgBmG,GAC3B,MACF,IAAK,WACH9M,KAAKC,MAAM2G,gBAAgBkG,GAC3B,MACF,IAAK,kBACH9M,KAAKC,MAAM4mB,uBAAuB/Z,M,0CAKlB,IAAD,SAC6B9M,KAAKC,MAC/CwmB,EAAQ,CAAEjjB,SAFG,EACXA,SACkBC,SAFP,EACDA,SACkBC,gBAFjB,EACSA,iBAE5B1D,KAAKoQ,QAAQ0W,YAAYL,GAAO,WAC9B,EAAKxmB,MAAMmL,QAAQlD,KAAK3H,GAAOoD,YAAYlD,W,wCAI3B,IAAD,OACjBT,KAAKoQ,QAAQwW,iBAAgB,WAC3B,EAAK3mB,MAAMmL,QAAQlD,KAAK3H,GAAOoD,YAAYlD,W,+BAK7C,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,GAAD,CACEK,QAAQ,EACRQ,UAAU,SACV,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,GAAD,CACE0F,KAAK,WACLrE,KAAK,OACLmK,MAAO9M,KAAKC,MAAMuD,SAClBuJ,YAAY,WACZE,aAAcjN,KAAKoN,oBACrB,kBAAC,GAAD,CACEpG,KAAK,WACLrE,KAAK,WACLmK,MAAO9M,KAAKC,MAAMwD,SAClBsJ,YAAY,WACZE,aAAcjN,KAAKoN,oBACrB,kBAAC,GAAD,CACEpG,KAAK,kBACLrE,KAAK,WACLmK,MAAO9M,KAAKC,MAAMyD,gBAClBqJ,YAAY,mBACZE,aAAcjN,KAAKoN,oBACrB,kBAAC,GAAD,CACEtL,KAAK,eACL+H,YAAa7J,KAAK2mB,8B,GAvEhB1lB,aAkFPmL,eAAW3B,a7D/CnB,SAAoBpL,GACzB,OAAOiE,oBAAUjE,EAAMkE,WA7Bc,CACrCoD,gBADqC,SACpBnD,GACf,MAAO,CAAEb,KAAM,2BAA4Ba,aAE7CoD,gBAJqC,SAIpBnD,GACf,MAAO,CAAEd,KAAM,2BAA4Bc,aAE7CojB,uBAPqC,SAObnjB,GACtB,MAAO,CAAEf,KAAM,mCAAoCe,qB6DmE7B+G,CAA4Bic,KCtFjCK,G,WAInB,aAAgB,yBAHRjX,oBAGO,OAFPb,gBAEO,EACbjP,KAAK8P,eAAiB,IAAId,GAC1BhP,KAAKiP,WAAa,IAAIR,G,mDAGhBuB,EAAgCnB,GAA2B,IAAD,OAChE7O,KAAK8P,eAAeJ,KAAK,gBAAiBM,GAAa,SAAA9R,GACjDA,GACF,EAAK+Q,WAAWgB,eAAe/R,EAAS0Q,YAAaC,U,KCRvDmY,G,kDAGJ,WAAa/mB,GAAa,IAAD,8BACvB,cAAMA,IAHRmQ,aAEyB,EAEvB,EAAKA,QAAU,IAAIC,GACnB,EAAKjD,kBAAoB,EAAKA,kBAAkBtD,KAAvB,gBACzB,EAAKmd,kBAAoB,EAAKA,kBAAkBnd,KAAvB,gBAJF,E,8DAONuD,GACjB,IAAMC,EAASD,EAAMC,OACbR,EAAgBQ,EAAhBR,MACR,OADwBQ,EAATtG,MAEb,IAAK,WACHhH,KAAKC,MAAM0G,gBAAgBmG,GAC3B,MACF,IAAK,WACH9M,KAAKC,MAAM2G,gBAAgBkG,M,0CAKX,IAAD,SACY9M,KAAKC,MAC9B+P,EAAc,CAAExM,SAFH,EACXA,SACwBC,SAFb,EACDA,UAElBzD,KAAKoQ,QAAQE,OAAON,GAAa,WAC/B,EAAK/P,MAAMmL,QAAQlD,KAAK3H,GAAO0G,MAAMxG,W,kCAKvCT,KAAKC,MAAM0G,gBAAgB,IAC3B3G,KAAKC,MAAM2G,gBAAgB,M,6CAI3B5G,KAAK6N,c,+BAIL,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,GAAD,CACE/M,QAAQ,EACRQ,UAAU,SACV,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,GAAD,CACE0F,KAAK,WACLrE,KAAK,OACLmK,MAAO9M,KAAKC,MAAMuD,SAClBuJ,YAAY,WACZE,aAAcjN,KAAKoN,oBACrB,kBAAC,GAAD,CACEpG,KAAK,WACLrE,KAAK,WACLmK,MAAO9M,KAAKC,MAAMwD,SAClBsJ,YAAY,WACZE,aAAcjN,KAAKoN,oBACrB,kBAAC,GAAD,CACEtL,KAAK,UACL+H,YAAa7J,KAAKinB,8B,GAhEZhmB,aA2EXmL,eAAW3B,a9DjDnB,SAAoBpL,GACzB,OAAOiE,oBAAUjE,EAAMsE,eAvBkB,CACzCgD,gBADyC,SACxBnD,GACf,MAAO,CAAEb,KAAM,iCAAkCa,aAEnDoD,gBAJyC,SAIxBnD,GACf,MAAO,CAAEd,KAAM,iCAAkCc,c8DkE3BgH,CAA4Buc,KCrFjCE,G,WAGnB,aAAgB,yBAFNpX,oBAEK,EACb9P,KAAK8P,eAAiB,IAAId,G,iDAGtB5D,GACJpL,KAAK8P,eAAe1R,IAAI,eAAe,SAAAF,GAChCA,GAAUkN,EAAQlD,KAAK3H,GAAOoD,YAAYlD,a,KCGhC0mB,G,WAGnB,aAAgB,yBAFRrX,oBAEO,EACb9P,KAAK8P,eAAiB,IAAId,G,mDAGpBnG,EAAyBgG,GAC/B7O,KAAK8P,eAAeJ,KAAK,QAAS7G,GAAM,SAAA3K,GAClCA,GAAU2Q,EAAS3Q,Q,gCAIhB2Q,GACT7O,KAAK8P,eAAe1R,IAAI,UAAU,SAAA6I,GAC5BA,GAAO4H,EAAS5H,Q,6BAIhB4B,EAAsBgG,GAC5B7O,KAAK8P,eAAeF,OAAO,QAAS/G,GAAM,SAAA3K,GACpCA,GAAU2Q,W,yBC7BduY,G,kDAGJ,WAAannB,GAAwB,IAAD,8BAClC,cAAMA,IAHRgP,gBAEoC,EAElC,EAAKA,WAAa,IAAIR,GACtB,EAAK4Y,mBAAqB,EAAKA,mBAAmBvd,KAAxB,gBAHQ,E,iEAMb,IAAD,OACpB9J,KAAKiP,WAAWsV,mBAAkB,WAChC,EAAKtkB,MAAMmL,QAAQlD,KAAK3H,GAAOoD,YAAYlD,W,+BAK7C,OACE,yBAAKN,UAAWC,KAAOknB,WACrB,yBAAKnnB,UAAWC,KAAOmZ,WACrB,kBAAC,IAAD,CACEpZ,UAAWC,KAAO+Y,SAClB7Y,GAAIC,GAAO0G,MAAMxG,KACjB8mB,gBAAiBnnB,KAAO+E,QAH1B,SAMA,kBAAC,IAAD,CACEhF,UAAWC,KAAO+Y,SAClB7Y,GAAIC,GAAO2G,YAAYzG,KACvB8mB,gBAAiBnnB,KAAO+E,QAH1B,kBAMA,kBAAC,IAAD,CACEhF,UAAWC,KAAO+Y,SAClB7Y,GAAG,IACH2J,QAASjK,KAAKqnB,oBAHhB,kB,GA/BcpmB,aA2CTmL,eAAWgb,ICrCpBI,G,kDACJ,WAAavnB,GAAyB,IAAD,8BACnC,cAAMA,IACDmN,kBAAoB,EAAKA,kBAAkBtD,KAAvB,gBACzB,EAAK2d,sBAAwB,EAAKA,sBAAsB3d,KAA3B,gBAHM,E,8DAMlBuD,GACjB,IAAMC,EAASD,EAAMC,OACbR,EAAgBQ,EAAhBR,MACR,OADwBQ,EAATtG,MAEb,IAAK,OACHhH,KAAKC,MAAMynB,YAAY5a,GACvB,MACF,IAAK,WACH9M,KAAKC,MAAM2G,gBAAgBkG,GAC3B,MACF,IAAK,WACH9M,KAAKC,MAAM0G,gBAAgBmG,M,wCAM/B,IAAM6a,EAAM,kBAAchqB,kCADT,EAEoBqC,KAAKC,MAAlC+G,EAFS,EAETA,KAAMxD,EAFG,EAEHA,SAAUC,EAFP,EAEOA,SAClBuM,EAAW,aAAShJ,EAAT,2CAAgD2gB,EAAhD,8DAA4GnkB,EAA5G,uBAAmIC,GACpJ2X,KAAgBpL,GAChB/G,GAAaf,KAAK,yB,kCAIlBlI,KAAKC,MAAMynB,YAAY,IACvB1nB,KAAKC,MAAM0G,gBAAgB,IAC3B3G,KAAKC,MAAM2G,gBAAgB,M,8CAGH,IAAD,SACc5G,KAAKC,MACpC4I,EAAO,CAAE7B,KAFQ,EACfA,KACaxD,SAFE,EACTA,SACiBC,SAFR,EACCA,UAExBzD,KAAKC,MAAM0mB,kBAAkB9d,GAAM,WACjC,EAAK+e,kBACL,EAAK/Z,iB,+BAKP,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,GAAD,CACE7G,KAAK,OACLrE,KAAK,OACLmK,MAAO9M,KAAKC,MAAM+G,KAClB+F,YAAY,OACZE,aAAcjN,KAAKoN,oBACrB,kBAAC,GAAD,CACEpG,KAAK,WACLrE,KAAK,WACLmK,MAAO9M,KAAKC,MAAMwD,SAClBsJ,YAAY,WACZE,aAAcjN,KAAKoN,qBAEvB,kBAAC,IAAD,KACE,kBAAC,GAAD,CACEpG,KAAK,WACLrE,KAAK,OACLmK,MAAO9M,KAAKC,MAAMuD,SAClBuJ,YAAY,WACZE,aAAcjN,KAAKoN,oBACrB,kBAAC,GAAD,CACEtL,KAAK,cACL+H,YAAa7J,KAAKynB,+B,GAzEPxmB,aAiFVwJ,gB9D9CR,SAAoBpL,GACzB,OAAOiE,oBAAUjE,EAAM0H,cA7BiB,CACxC2gB,YADwC,SAC3B1gB,GACX,MAAO,CAAErE,KAAM,2BAA4BqE,SAE7CL,gBAJwC,SAIvBnD,GACf,MAAO,CAAEb,KAAM,+BAAgCa,aAEjDoD,gBAPwC,SAOvBnD,GACf,MAAO,CAAEd,KAAM,+BAAgCc,c8DkEpCgH,CAA4B+c,I,yCCnFtBK,G,kDACnB,WAAa5nB,GAAmB,IAAD,8BAC7B,cAAMA,IACD6nB,kBAAoB,EAAKA,kBAAkBhe,KAAvB,gBAFI,E,gEAa7B9J,KAAKC,MAAM6nB,kBAAkB9nB,KAAKC,MAAM4I,KAAKhM,M,+BAI7C,OACE,kBAAC,IAAD,KACE,yBAAKsD,UAAWC,KAAOyI,MACrB,yBAAK1I,UAAWC,KAAO2nB,MACrB,wBAAI5nB,UAAWC,KAAO4G,MAAOhH,KAAKC,MAAM4I,KAAK7B,MAC7C,yBAAK7G,UAAWC,KAAOoD,UAAWxD,KAAKC,MAAM4I,KAAKrF,UAClD,yBAAKrD,UAAWC,KAAO4nB,aACrB,wBAAI7nB,UAAWC,KAAO6nB,SAAtB,gBACA,yBAAK9nB,UAAWC,KAAO8nB,MAAOloB,KAAKgoB,eAGvC,yBAAK7nB,UAAWC,KAAOwC,SACrB,kBAAC,GAAD,CACEoE,KAAK,aACL6C,YAAa7J,KAAK8nB,yB,kCA1BV,IACVK,EAAkBnoB,KAAKC,MAAM4I,KAA7Bsf,cACR,OAAOA,EACHC,KAAOD,GAAeE,OAAO,OAC7B,Q,GAV0BpnB,a,oBCNbqnB,G,0KACNC,EAAkBC,GAC7B,MAAM,GAAN,OAAUC,iBAAOF,EAAUC,GAA3B,O,+BAIA,OACE,kBAAC,IAAD,KACE,yBAAKroB,UAAWC,KAAOyI,MACrB,yBAAK1I,UAAWC,KAAO2nB,MACrB,kBAAC,GAAD,CACE3mB,MAAOpB,KAAK0oB,YAAY,GAAI,IAC5BrU,OAAO,OACPiN,aAAa,QACf,kBAAC,GAAD,CACElgB,MAAOpB,KAAK0oB,YAAY,GAAI,IAC5BrU,OAAO,OACPiN,aAAa,SACf,kBAAC,GAAD,CACElgB,MAAM,MACNiT,OAAO,OACPiN,aAAa,QACf,kBAAC,GAAD,CACElgB,MAAM,MACNiT,OAAO,UAEX,yBAAKlU,UAAWC,KAAOwC,SACrB,kBAAC,GAAD,CACExB,MAAM,OACNiT,OAAO,OACP9H,MAAM,iB,GA9BsBtL,aCWpC0nB,G,kDAKJ,WAAa1oB,GAAoB,IAAD,8BAC9B,cAAMA,IAJR2oB,qBAGgC,IAFhCxY,aAEgC,EAE9B,EAAKwY,gBAAkB,IAAI1B,GAC3B,EAAK9W,QAAU,IAAIC,GACnB,EAAKoX,sBAAwB,EAAKA,sBAAsB3d,KAA3B,gBAC7B,EAAK+e,sBAAwB,EAAKA,sBAAsB/e,KAA3B,gBALC,E,uDAQnB,IAAD,OACV9J,KAAKoQ,QAAQ0Y,WAAU,SAAA7hB,GAAK,OAAI,EAAKhH,MAAM8oB,aAAa9hB,Q,iCAG9CpK,GAAa,IAAD,OAChBgI,EAAU,CAAEhI,MAClBmD,KAAKoQ,QAAQR,OAAO/K,GAAS,kBAAM,EAAK5E,MAAM+oB,SAASnsB,Q,4CAGlCA,GAAa,IAAD,OACjCoM,GAAaf,KACX,oCACA,kBAAM,EAAK+gB,WAAWpsB,Q,2BAIpBgM,GACJ,OACE,kBAAC,IAAD,CACEyT,KAAK,KACL4M,OAAO,IACPhb,IAAKrF,EAAKrF,UACV,kBAAC,GAAD,CACEqF,KAAMA,EACNif,kBAAmB9nB,KAAK6oB,2B,mCAUlBhgB,GACZ,OACE,kBAAC,IAAD,CACEyT,KAAK,KACL4M,OAAO,IACPhb,IAAKrF,GACL,kBAAC,GAAD,S,4CAaiBA,EAAyBgG,GAAuB,IAAD,OACpE7O,KAAKoQ,QAAQf,OAAOxG,GAAM,SAAAA,GACxB,EAAK5I,MAAMkpB,SAAStgB,GACpBgG,S,0CAKF7O,KAAK4oB,gBAAgBlmB,KAAK1C,KAAKC,MAAMmL,SACrCpL,KAAKopB,a,+BAIL,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,GAAD,CACEtoB,QAAQ,EACRQ,UAAU,WACV,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,GAAD,MACA,kBAAC,GAAD,CAAYqlB,kBAAmB3mB,KAAKynB,0BAGxC,kBAAC,IAAD,KACGznB,KAAKiH,MACLjH,KAAKqpB,qB,4BApDN,IAAD,OAEX,OADkBrpB,KAAKC,MAAfgH,MACKhL,KAAI,SAAA4M,GAAI,OAAI,EAAKA,KAAKA,Q,oCAcf,IAAD,OACX5B,EAAUjH,KAAKC,MAAfgH,MACR,GAAIqiB,kBAAQriB,GAEV,OADsBsiB,gBAAMZ,EAAMa,iBACbvtB,KAAI,SAAA4M,GAAI,OAAI,EAAK4gB,aAAa5gB,U,GA9DrC5H,aAAd0nB,GACGa,gBAAkB,EAuGZpd,mBAAW3B,ahE9DnB,SAAoBpL,GACzB,OAAOiE,oBAAUjE,EAAM4H,SAlCY,CACnC8hB,aADmC,SACrB9hB,GACZ,MAAO,CAAEtE,KAAM,sBAAuBsE,UAExCkiB,SAJmC,SAIzBtgB,GACR,MAAO,CAAElG,KAAM,kBAAmBkG,SAEpCmgB,SAPmC,SAOzBnsB,GACR,MAAO,CAAE8F,KAAM,kBAAmB9F,QgEuFZ4N,CAA4Bke,K,qBCvHjCe,G,WAInB,aAIE,OAJc,oBACTA,EAAc1V,WACjB0V,EAAc1V,SAAWhU,MAEpB0pB,EAAc1V,S,qDAGL9J,GAChB,OAAOwf,EAAcC,OAAOC,UAAUC,QAAQ3f,K,mCAI9C,OAAOwf,EAAcC,OAAOG,KAAKC,Y,iCAyBvBzoB,GACVooB,EAAcC,OAAS,IAAIK,KAAM1oB,EAAWtB,KAAKyQ,W,iCAGvCvG,GACV,IAAM+f,EAAQjqB,KAAKkqB,SAAShgB,GAC5Bwf,EAAcC,OAAOQ,YAAYF,EAAO,Y,sCAGzBpb,GAAsC,IAAD,OACpD6a,EAAcC,OAAOjZ,GAAG,eAAe,WACrC,IAAMxG,EAAU,EAAKkgB,aACrBvb,EAAS3E,Q,qCAjCX,MAAO,CACL,CAAC,OAAQ,SAAU,aACnB,CAAC,CAAE7J,OAAQ,GAAK,CAAEA,OAAQ,IAC1B,CAAC,CAAEgqB,KAAM,WAAa,CAAEA,KAAM,WAC9B,CAAC,CAAEC,MAAO,KACV,CAAC,W,8BAKH,MAAO,CACLC,QAAS,CACPC,QAASxqB,KAAKyqB,eACdb,UAAW,CACTc,aAAa,IAGjBC,MAAO,Y,KArCQjB,GACJ1V,c,EADI0V,GAEJC,Y,MCDIiB,G,WAGnB,aAAgB,yBAFR9a,oBAEO,EACb9P,KAAK8P,eAAiB,IAAId,G,iDAGtBH,GACJ7O,KAAK8P,eAAe1R,IAAI,YAAY,SAAAF,GAC9BA,GAAU2Q,EAAS3Q,EAAS2sB,W,6BAI5BA,GACN7qB,KAAK8P,eAAeJ,KAAK,WAAY,CAAEmb,SAAQ,SAAA3sB,GACzCA,GAAU+K,GAAaf,KAAK,2B,0BCFhC4iB,G,kDAKJ,WAAa7qB,GAA0B,IAAD,8BACpC,cAAMA,IALR2oB,qBAIsC,IAHtCmC,mBAGsC,IAFtC3a,aAEsC,EAEpC,EAAKwY,gBAAkB,IAAI1B,GAC3B,EAAK6D,cAAgB,IAAIrB,GACzB,EAAKtZ,QAAU,IAAIC,GACnB,EAAK2a,gBAAkB,EAAKA,gBAAgBlhB,KAArB,gBALa,E,yDAQvB,IAAD,OACZ9J,KAAKoQ,QAAQ6a,MAAK,SAAAppB,GAChB,EAAK5B,MAAMirB,eAAerpB,GAC1B,EAAKkpB,cAAcI,WAAWtpB,Q,4CAIV,IAAD,OACrB7B,KAAK+qB,cAAcK,iBAAgB,SAAAvpB,GACjC,EAAK5B,MAAMirB,eAAerpB,Q,wCAK5B7B,KAAKoQ,QAAQib,OAAOrrB,KAAKC,MAAM4B,W,0CAI/B7B,KAAK4oB,gBAAgBlmB,KAAK1C,KAAKC,MAAMmL,SACrCpL,KAAK+qB,cAAc1N,WAAW,iBAC9Brd,KAAKsrB,aACLtrB,KAAKurB,wB,+BAIL,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,GAAD,CACEzqB,QAAQ,EACRQ,UAAU,WACV,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,GAAD,MACA,yBAAKnB,UAAWC,KAAO8G,aACrB,yBAAKrK,GAAG,iBACR,yBAAKsD,UAAWC,KAAOorB,MACrB,kBAAC,GAAD,CACE1pB,KAAK,OACL+H,YAAa7J,KAAKgrB,8B,GArDhB/pB,aAkEXmL,eAAW3B,ajEnDnB,SAAoBpL,GACzB,OAAOiE,oBAAUjE,EAAM6H,eAjBkB,CACzCgkB,eADyC,SACzBrpB,GACd,MAAO,CAAEc,KAAM,+BAAgCd,aiEiEzB4I,CAA4BqgB,KChFjCW,G,WAGnB,aAAgB,yBAFR3b,oBAEO,EACb9P,KAAK8P,eAAiB,IAAId,G,iDAGtBH,GACJ7O,KAAK8P,eAAe1R,IAAI,YAAY,SAAAF,GAC9BA,GAAU2Q,EAAS3Q,EAAS2sB,a,KCHjBa,G,0KAWNnD,EAAkBC,GAC7B,MAAM,GAAN,OAAUC,iBAAOF,EAAUC,GAA3B,O,gCAGSmD,GAAgB,IAAD,OACxB,OACEpC,gBAAMoC,GAAO1vB,KAAI,SAAA2vB,GAAI,OACnB,kBAAC,GAAD,CACExqB,MAAO,EAAKsnB,YAAY,GAAI,KAC5BrU,OAAO,OACPiN,aAAa,MACbpT,IAAK0d,S,+BAMX,OAAO5rB,KAAKC,MAAMC,YAChB,kBAAC,WAAD,KACE,6BAAMF,KAAK6rB,UAAU,IACpB7rB,KAAKioB,QACN,6BAAMjoB,KAAK6rB,UAAU,O,8BA9BzB,OACE,kBAAC,GAAD,CACEzqB,MAAOpB,KAAK0oB,YAAY,GAAI,IAC5BrU,OAAO,OACPiN,aAAa,OACbD,UAAU,a,GAP2BpgB,a,qBCGvC6qB,G,kDAGJ,WAAa7rB,GAAsB,IAAD,8BAChC,cAAMA,IAHRmQ,aAEkC,EAEhC,EAAKA,QAAU,IAAIqb,GAFa,E,yDAanB,IAAD,OACZzrB,KAAKoQ,QAAQ6a,MAAK,SAAAppB,GAAO,OAAI,EAAK5B,MAAMirB,eAAerpB,Q,0CAIvD7B,KAAKsrB,e,+BAIL,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,GAAD,CACExqB,QAAQ,EACRQ,UAAU,WACV,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,yBAAKnB,UAAWC,KAAOyB,SACrB,8CACA,yBACE1B,UAAWC,KAAO8J,QAClBnI,wBAAyB/B,KAAK+rB,cAChC,kBAAC,GAAD,CAAiB7rB,WAAYF,KAAKgsB,8B,kCA9BlD,MAAO,CAAE5pB,OAAQpC,KAAKC,MAAM4B,SAAW,M,yCAIvC,OAAQ7B,KAAKC,MAAM4B,Y,GAbDZ,aAmDPwJ,gBrE/BR,SAAoBpL,GACzB,OAAOiE,oBAAUjE,EAAMwC,WAjBc,CACrCqpB,eADqC,SACrBrpB,GACd,MAAO,CAAEc,KAAM,0BAA2Bd,aqE6C/B4I,CAA4BqhB,I,oBCpDrCG,G,kDACJ,WAAahsB,GAAuB,IAAD,8BACjC,cAAMA,IACDisB,sBAAwB,EAAKA,sBAAsBpiB,KAA3B,gBAFI,E,oEAMjC9J,KAAKC,MAAMmL,QAAQlD,KAAK3H,GAAOC,KAAKC,Q,+BAIpC,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,GAAD,CACEK,QAAQ,EACRQ,UAAU,SACV,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,yBAAKnB,UAAWC,KAAO+rB,UACrB,wBAAIhsB,UAAWC,KAAO6nB,SAAtB,OACA,uBAAG9nB,UAAWC,KAAOgsB,aAArB,kBACA,kBAAC,GAAD,CACEtqB,KAAK,iBACL+H,YAAa7J,KAAKksB,mC,GAzBjBjrB,aCER,IACborB,QAAS,CAAE5rB,KAAM,IAAK6rB,UAAWnhB,IACjC3K,KAAM,CAAEC,KAAM,QAAS6rB,UAAW7f,IAClCpG,KAAM,CAAE5F,KAAM,QAAS6rB,UAAWnf,IAClCzG,MAAO,CAAEjG,KAAM,SAAU6rB,UAAWnc,IACpCvM,QAAS,CAAEnD,KAAM,WAAY6rB,UAAWxK,IACxCve,QAAS,CAAE9C,KAAM,WAAY6rB,UAAW5F,IACxC/iB,YAAa,CAAElD,KAAM,SAAU6rB,UAAWtF,IAC1C/f,MAAO,CAAExG,KAAM,SAAU6rB,UAAW3D,IACpCzhB,YAAa,CAAEzG,KAAM,gBAAiB6rB,UAAWxB,IACjDjpB,QAAS,CAAEpB,KAAM,WAAY6rB,UAAWR,IACxCK,SAAU,CAAE1rB,KAAM,IAAK6rB,UDwBVlgB,YAAW6f,M,UEvCLM,G,uKAEjB,OACE,kBAAC,IAAD,CAAepjB,MAAOA,IACpB,kBAAC,KAAD,KACE,kBAAC,IAAD,KACGnJ,KAAKC,MAAMkB,gB,GANcF,aCEjBqK,I,yDAGnB,WAAarL,GAAwB,IAAD,8BAClC,cAAMA,IAHRkO,kBAEoC,EAElC,EAAKA,aAAe,IAAIqe,GACxB,EAAKC,cACLxW,GAAcxL,UAJoB,E,0DAQlCgiB,YAAY,CAAEC,KAAM,S,gFAGErf,G,gFAChBsf,EAAsBtf,GACbuf,S,SACYD,EAAeE,W,OAApCC,E,OACuC,aAAzBA,EAAaC,SACjB9jB,GAAaN,O,2IAGV,IAAD,OAClB3I,KAAKmO,aAAa6e,kBAAiB,SAAAje,GAC7BA,GACJ5R,OAAOW,iBAAiB,uBAAuB,SAAAuP,GAC7CA,EAAM4f,iBACN,EAAK9e,aAAa+e,uBAAsB,WAEtCjkB,GAAaf,KAAK,gBADK,kBAAM,EAAKilB,iBAAiB9f,iB,0CAQzDrN,KAAKotB,qB,+BAIL,OACE,kBAAC,IAAD,KACE,kBAAC,GAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CACE3sB,KAAMF,GAAO8rB,QAAQ5rB,KACrB6rB,UAAW/rB,GAAO8rB,QAAQC,UAC1Be,OAAO,IACT,kBAAC,IAAD,CACE5sB,KAAMF,GAAOC,KAAKC,KAClB6rB,UAAW/rB,GAAOC,KAAK8rB,UACvBe,OAAO,IACT,kBAAC,IAAD,CACE5sB,KAAMF,GAAO8F,KAAK5F,KAClB6rB,UAAW/rB,GAAO8F,KAAKimB,UACvBe,OAAO,IACT,kBAAC,IAAD,CACE5sB,KAAMF,GAAOmG,MAAMjG,KACnB6rB,UAAW/rB,GAAOmG,MAAM4lB,UACxBe,OAAO,IACT,kBAAC,IAAD,CACE5sB,KAAMF,GAAOqD,QAAQnD,KACrB6rB,UAAW/rB,GAAOqD,QAAQ0oB,UAC1Be,OAAO,IACT,kBAAC,IAAD,CACE5sB,KAAMF,GAAOgD,QAAQ9C,KACrB6rB,UAAW/rB,GAAOgD,QAAQ+oB,UAC1Be,OAAO,IACT,kBAAC,IAAD,CACE5sB,KAAMF,GAAOoD,YAAYlD,KACzB6rB,UAAW/rB,GAAOoD,YAAY2oB,UAC9Be,OAAO,IACT,kBAAC,IAAD,CACE5sB,KAAMF,GAAO0G,MAAMxG,KACnB6rB,UAAW/rB,GAAO0G,MAAMqlB,UACxBe,OAAO,IACT,kBAAC,IAAD,CACE5sB,KAAMF,GAAOsB,QAAQpB,KACrB6rB,UAAW/rB,GAAOsB,QAAQyqB,UAC1Be,OAAO,IACT,kBAAC,IAAD,CACE5sB,KAAMF,GAAO2G,YAAYzG,KACzB6rB,UAAW/rB,GAAO2G,YAAYolB,UAC9Be,OAAO,IACT,kBAAC,IAAD,CACE5sB,KAAMF,GAAO4rB,SAAS1rB,KACtB6rB,UAAW/rB,GAAO4rB,SAASG,UAC3Be,OAAO,W,GAvFYpsB,cCLjCqsB,IAASC,OACP,kBAAC,GAAD,MACAC,SAASC,eAAe,SAG1B/tB,EAAqBguB,kB,mBCTrB3xB,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,OAAS,sBAAsB,QAAU,uBAAuB,KAAO,oBAAoB,QAAU,uBAAuB,QAAU,uBAAuB,OAAS,sBAAsB,QAAU,yB,mBCArPD,EAAOC,QAAU,CAAC,KAAO,mBAAmB,KAAO,mBAAmB,KAAO,mBAAmB,SAAW,uBAAuB,YAAc,0BAA0B,QAAU,sBAAsB,KAAO,mBAAmB,QAAU,wB,mBCA9OD,EAAOC,QAAU,CAAC,UAAY,6BAA6B,UAAY,6BAA6B,SAAW,4BAA4B,OAAS,4B,mBCApJD,EAAOC,QAAU,CAAC,OAAS,uBAAuB,KAAO,qBAAqB,QAAU,wBAAwB,OAAS,yB,mBCAzHD,EAAOC,QAAU,CAAC,UAAY,6BAA6B,KAAO,wBAAwB,KAAO,wBAAwB,OAAS,4B,mBCAlID,EAAOC,QAAU,CAAC,KAAO,mBAAmB,OAAS,qBAAqB,KAAO,mBAAmB,OAAS,qBAAqB,KAAO,qB,mBCAzID,EAAOC,QAAU,CAAC,WAAa,+BAA+B,MAAQ,0BAA0B,KAAO,yBAAyB,IAAM,wBAAwB,OAAS,6B,mBCAvKD,EAAOC,QAAU,CAAC,UAAY,6BAA6B,KAAO,wBAAwB,IAAM,uBAAuB,OAAS,0BAA0B,OAAS,4B,mBCAnKD,EAAOC,QAAU,CAAC,WAAa,+BAA+B,KAAO,yBAAyB,OAAS,2BAA2B,OAAS,2BAA2B,QAAU,8B,mBCAhLD,EAAOC,QAAU,CAAC,YAAc,iCAAiC,OAAS,4BAA4B,WAAa,gCAAgC,KAAO,4B,mBCA1JD,EAAOC,QAAU,CAAC,SAAW,2BAA2B,KAAO,uBAAuB,OAAS,2B,mBCA/FD,EAAOC,QAAU,CAAC,YAAc,iCAAiC,OAAS,4BAA4B,KAAO,4B,mBCA7GD,EAAOC,QAAU,CAAC,oBAAsB,iDAAiD,KAAO,kCAAkC,UAAY,yC,mBCA9ID,EAAOC,QAAU,CAAC,QAAU,yBAAyB,OAAS,wBAAwB,aAAe,gC,mBCArGD,EAAOC,QAAU,CAAC,KAAO,2BAA2B,KAAO,2BAA2B,QAAU,gC,mBCAhGD,EAAOC,QAAU,CAAC,SAAW,2BAA2B,QAAU,0BAA0B,YAAc,gC,mBCA1GD,EAAOC,QAAU,CAAC,UAAY,6BAA6B,MAAQ,yBAAyB,QAAU,2BAA2B,KAAO,0B,mBCAxID,EAAOC,QAAU,CAAC,kBAAoB,6CAA6C,KAAO,kC,mBCA1FD,EAAOC,QAAU,CAAC,OAAS,uBAAuB,QAAU,0B,mBCA5DD,EAAOC,QAAU,CAAC,KAAO,mBAAmB,IAAM,kBAAkB,OAAS,uB,mBCA7ED,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,eAAiB,gC,mBCAhED,EAAOC,QAAU,CAAC,mBAAqB,+CAA+C,OAAS,sC","file":"static/js/main.55fabc7f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"whiteboardBrushColorItem\":\"WhiteboardBrushColorItem_whiteboardBrushColorItem__1xoWK\",\"active\":\"WhiteboardBrushColorItem_active__3RnZi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"whiteboardMenuContent\":\"WhiteboardMenuContent_whiteboardMenuContent__3wcd9\",\"brushSizeWrapper\":\"WhiteboardMenuContent_brushSizeWrapper__3y0-O\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"skeleton\":\"Skeleton_skeleton__zRo__\",\"gradientFlash\":\"Skeleton_gradientFlash___3LKB\",\"round\":\"Skeleton_round__3k965\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"activeVideoSkeleton\":\"ActiveVideoSkeleton_activeVideoSkeleton__1cfSc\",\"icon\":\"ActiveVideoSkeleton_icon__qesLN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"privacyEdit\":\"PrivacyEdit_privacyEdit__1amDH\",\"save\":\"PrivacyEdit_save__3cUl5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"privacy\":\"Privacy_privacy__3bH6U\",\"content\":\"Privacy_content__3-zUr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"Footer_footer__7dIj9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"Input_input__3rPb3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"raiseHand\":\"RaiseHand_raiseHand__2ZXa3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"whiteboardBrushColor\":\"WhiteboardBrushColor_whiteboardBrushColor__1AK65\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"whiteboardMenu\":\"WhiteboardMenu_whiteboardMenu__Fx2Kx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"whiteboard\":\"Whiteboard_whiteboard__1KWNz\"};","var map = {\n\t\"./ion-action-sheet.entry.js\": [\n\t\t221,\n\t\t5\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t222,\n\t\t6\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t223,\n\t\t7\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t224,\n\t\t18\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t225,\n\t\t19\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t226,\n\t\t43\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t227,\n\t\t20\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t228,\n\t\t21\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t229,\n\t\t22\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t230,\n\t\t23\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t231,\n\t\t44\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t232,\n\t\t10\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t233,\n\t\t24\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t234,\n\t\t45\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t235,\n\t\t46\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t236,\n\t\t25\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t237,\n\t\t26\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t238,\n\t\t27\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t239,\n\t\t28\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t240,\n\t\t29\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t241,\n\t\t8\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t242,\n\t\t15\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t243,\n\t\t9\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t244,\n\t\t30\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t245,\n\t\t31\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t246,\n\t\t32\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t247,\n\t\t11\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t248,\n\t\t17\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t249,\n\t\t47\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t250,\n\t\t33\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t251,\n\t\t34\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t252,\n\t\t35\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t253,\n\t\t36\n\t],\n\t\"./ion-slide_2.entry.js\": [\n\t\t254,\n\t\t48\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t255,\n\t\t13\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t256,\n\t\t49\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t257,\n\t\t37\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t258,\n\t\t16\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t259,\n\t\t38\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t260,\n\t\t39\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t261,\n\t\t40\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t262,\n\t\t12\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t263,\n\t\t50\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 167;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./ion-icon.entry.js\": [\n\t\t267,\n\t\t57\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 169;\nmodule.exports = webpackAsyncContext;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 193;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n)\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register (config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    )\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config)\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          )\r\n        })\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config)\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nfunction registerValidSW (swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing\r\n        if (installingWorker == null) {\r\n          return\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              )\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration)\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.')\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration)\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error)\r\n    })\r\n}\r\n\r\nfunction checkValidServiceWorker (swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type')\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload()\r\n          })\r\n        })\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config)\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      )\r\n    })\r\n}\r\n\r\nexport function unregister () {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister()\r\n    })\r\n  }\r\n}\r\n","import { isPlatform } from '@ionic/react'\r\nimport { Platforms } from '@ionic/core'\r\nimport { some } from 'lodash'\r\nimport * as serviceWorker from '../serviceWorker'\r\n\r\nexport default class ServiceWorkerService {\r\n  private static ignorePlatforms: Platforms[] = ['cordova', 'electron']\r\n\r\n  static registerWorker (): void {\r\n    const isIgnoredPlatform = some(\r\n      ServiceWorkerService.ignorePlatforms,\r\n      (platform: Platforms) => isPlatform(platform)\r\n    )\r\n    if (!isIgnoredPlatform) serviceWorker.register()\r\n  }\r\n}\r\n","import { IonCol, IonGrid, IonRow } from '@ionic/react'\r\nimport React, { Component } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport routes from '../../routes'\r\nimport styles from './Header.module.scss'\r\n\r\ninterface HeaderProps {\r\n  visibility: boolean\r\n  invert?: boolean\r\n}\r\n\r\nexport default class Header extends Component<HeaderProps> {\r\n  get logo () {\r\n    const logo = this.props.invert ? 'logoInvert.svg' : 'logo.svg'\r\n    return `/assets/logo/${logo}`\r\n  }\r\n\r\n  get taglineClass () {\r\n    const invertClass = this.props.invert && styles.invert\r\n    return `${styles.tagline} ${invertClass}`\r\n  }\r\n\r\n  render () {\r\n    return this.props.visibility &&\r\n      <div className={styles.header}>\r\n        <IonGrid>\r\n          <IonRow>\r\n            <IonCol>\r\n              <Link to={routes.home.path}>\r\n                <img\r\n                  className={styles.logo}\r\n                  src={this.logo}\r\n                  alt={process.env.REACT_APP_NAME} />\r\n              </Link>\r\n              <div className={this.taglineClass}>\r\n                {process.env.REACT_APP_TAGLINE}\r\n              </div>\r\n            </IonCol>\r\n          </IonRow>\r\n        </IonGrid>\r\n      </div>\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport styles from './Container.module.scss'\r\n\r\nexport type ContainerWidth = 'small' | 'regular' | 'full'\r\n\r\ninterface ContainerProps {\r\n  visibility: boolean\r\n  width?: ContainerWidth\r\n}\r\n\r\nexport default class Container extends Component<ContainerProps> {\r\n  get className () {\r\n    const { width } = this.props\r\n    const widthClass = width && styles[width]\r\n    return `${styles.container} ${widthClass}`\r\n  }\r\n\r\n  render () {\r\n    return this.props.visibility &&\r\n      <div className={this.className}>\r\n        {this.props.children}\r\n      </div>\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport styles from './FloatingAnimation.module.scss'\r\n\r\ninterface FloatingAnimationProps {\r\n  flip: boolean\r\n}\r\n\r\nexport default class FloatingAnimation extends Component<FloatingAnimationProps> {\r\n  get className () {\r\n    const flipClass = this.props.flip && styles.flip\r\n    return `${styles.floatingAnimation} ${flipClass}`\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <img\r\n        className={this.className}\r\n        src=\"/assets/background.svg\"\r\n        alt=\"Floating animation\" />\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport routes from '../../routes'\r\nimport styles from './Copyright.module.scss'\r\n\r\ninterface CopyrightProps {\r\n  invert: boolean\r\n}\r\n\r\nexport default class Copyright extends Component<CopyrightProps> {\r\n  get className () {\r\n    const invertClass = this.props.invert && styles.invert\r\n    return `${styles.copyright} ${invertClass}`\r\n  }\r\n\r\n  get copyright () {\r\n    const appName = process.env.REACT_APP_NAME\r\n    const year = new Date().getFullYear()\r\n    const text = `&copy; ${appName} ${year}`\r\n    return { __html: text }\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className={this.className}>\r\n        <Link\r\n          className={styles.link}\r\n          to={routes.privacy.path}>\r\n          Privacy Policy\r\n        </Link>\r\n        <p\r\n          className={styles.text}\r\n          dangerouslySetInnerHTML={this.copyright} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport FloatingAnimation from '../FloatingAnimation/FloatingAnimation'\r\nimport Copyright from '../Copyright/Copyright'\r\nimport styles from './Footer.module.scss'\r\n\r\ninterface FooterProps {\r\n  visibility: boolean\r\n  invert?: boolean\r\n}\r\n\r\nexport default class Footer extends Component<FooterProps> {\r\n  get floatingAnimationFlip () {\r\n    return !this.props.invert\r\n  }\r\n\r\n  get copyrightInvert () {\r\n    return Boolean(this.props.invert)\r\n  }\r\n\r\n  render () {\r\n    return this.props.visibility &&\r\n      <div className={styles.footer}>\r\n        <FloatingAnimation flip={this.floatingAnimationFlip} />\r\n        <Copyright invert={this.copyrightInvert} />\r\n      </div>\r\n  }\r\n}\r\n","import { AnyAction } from 'redux'\r\nimport { cloneDeep } from 'lodash'\r\n\r\nexport type AuthType = 'admin' | 'host' | null\r\n\r\ninterface AppState {\r\n  auth: {\r\n    type: AuthType\r\n  }\r\n}\r\n\r\ninterface AppActions {\r\n  replaceAuthType (type: AuthType): AnyAction\r\n}\r\n\r\nconst app: AppState = {\r\n  auth: {\r\n    type: null\r\n  }\r\n}\r\n\r\nexport const actions: AppActions = {\r\n  replaceAuthType (authType) {\r\n    return { type: 'REPLACE_APP_AUTH_TYPE', authType }\r\n  }\r\n}\r\n\r\nexport function reducers (state = app, action: any) {\r\n  switch (action.type) {\r\n    case 'REPLACE_APP_AUTH_TYPE':\r\n      app.auth.type = action.authType\r\n      return cloneDeep(app)\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport function selectors (state: { app: AppState }) {\r\n  return cloneDeep(state.app)\r\n}\r\n","import { cloneDeep } from 'lodash'\r\n\r\nexport interface AlertState {\r\n  message: string\r\n  handleProceed: (() => void) | null\r\n  timeoutId: number\r\n}\r\n\r\nconst alert: AlertState = {\r\n  message: '',\r\n  handleProceed: null,\r\n  timeoutId: 0\r\n}\r\n\r\nexport const actions = {\r\n  replaceMessage (message: string) {\r\n    return { type: 'REPLACE_ALERT_MESSAGE', message }\r\n  },\r\n  replaceHandleProceed (handleProceed: (() => void) | null) {\r\n    return { type: 'REPLACE_ALERT_HANDLE_PROCEED', handleProceed }\r\n  },\r\n  replaceTimeoutId (timeoutId: number) {\r\n    return { type: 'REPLACE_ALERT_TIMEOUT_ID', timeoutId }\r\n  }\r\n}\r\n\r\nexport function reducers (state = alert, action: any) {\r\n  switch (action.type) {\r\n    case 'REPLACE_ALERT_MESSAGE':\r\n      alert.message = action.message\r\n      return cloneDeep(alert)\r\n    case 'REPLACE_ALERT_HANDLE_PROCEED':\r\n      alert.handleProceed = action.handleProceed\r\n      return cloneDeep(alert)\r\n    case 'REPLACE_ALERT_TIMEOUT_ID': {\r\n      alert.timeoutId = action.timeoutId\r\n      return cloneDeep(alert)\r\n    }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport function selectors (state: { alert: AlertState }) {\r\n  return cloneDeep(state.alert)\r\n}\r\n","import { AnyAction } from 'redux'\r\nimport { cloneDeep } from 'lodash'\r\n\r\nexport interface InstallState {\r\n  username: string\r\n  password: string\r\n  confirmPassword: string\r\n}\r\n\r\nexport interface InstallActions {\r\n  replaceUsername: (username: string) => AnyAction\r\n  replacePassword: (password: string) => AnyAction\r\n  replaceConfirmPassword: (confirmPassword: string) => AnyAction\r\n}\r\n\r\nconst install: InstallState = {\r\n  username: '',\r\n  password: '',\r\n  confirmPassword: ''\r\n}\r\n\r\nexport const actions: InstallActions = {\r\n  replaceUsername (username) {\r\n    return { type: 'REPLACE_INSTALL_USERNAME', username }\r\n  },\r\n  replacePassword (password) {\r\n    return { type: 'REPLACE_INSTALL_PASSWORD', password }\r\n  },\r\n  replaceConfirmPassword (confirmPassword) {\r\n    return { type: 'REPLACE_INSTALL_CONFIRM_PASSWORD', confirmPassword }\r\n  }\r\n}\r\n\r\nexport function reducers (state = install, action: any) {\r\n  switch (action.type) {\r\n    case 'REPLACE_INSTALL_USERNAME':\r\n      install.username = action.username\r\n      return cloneDeep(install)\r\n    case 'REPLACE_INSTALL_PASSWORD':\r\n      install.password = action.password\r\n      return cloneDeep(install)\r\n    case 'REPLACE_INSTALL_CONFIRM_PASSWORD':\r\n      install.confirmPassword = action.confirmPassword\r\n      return cloneDeep(install)\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport function selectors (state: { install: InstallState }) {\r\n  return cloneDeep(state.install)\r\n}\r\n","import { AnyAction } from 'redux'\r\nimport { cloneDeep } from 'lodash'\r\n\r\nexport interface AdminSignInState {\r\n  username: string\r\n  password: string\r\n}\r\n\r\nexport interface AdminSignInActions {\r\n  replaceUsername(username: string): AnyAction\r\n  replacePassword (password: string): AnyAction\r\n}\r\n\r\nconst adminSignIn: AdminSignInState = {\r\n  username: '',\r\n  password: ''\r\n}\r\n\r\nexport const actions: AdminSignInActions = {\r\n  replaceUsername (username) {\r\n    return { type: 'REPLACE_ADMIN_SIGN_IN_USERNAME', username }\r\n  },\r\n  replacePassword (password) {\r\n    return { type: 'REPLACE_ADMIN_SIGN_IN_PASSWORD', password }\r\n  }\r\n}\r\n\r\nexport function reducers (state = adminSignIn, action: any) {\r\n  switch (action.type) {\r\n    case 'REPLACE_ADMIN_SIGN_IN_USERNAME':\r\n      adminSignIn.username = action.username\r\n      return cloneDeep(adminSignIn)\r\n    case 'REPLACE_ADMIN_SIGN_IN_PASSWORD':\r\n      adminSignIn.password = action.password\r\n      return cloneDeep(adminSignIn)\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport function selectors (state: { adminSignIn: AdminSignInState }) {\r\n  return cloneDeep(state.adminSignIn)\r\n}\r\n","import { AnyAction } from 'redux'\r\nimport { cloneDeep, find, findIndex, map, pull, reject, some } from 'lodash'\r\nimport { nanoid } from 'nanoid'\r\nimport { MediaConnection } from 'peerjs'\r\nimport { fabric } from 'fabric'\r\nimport { MenuPosition } from '../../components/Menu/Menu'\r\n\r\nexport type VideoStateKind = 'media' | 'screen'\r\nexport type MeetingWhiteboardDrawingState = fabric.Object\r\nexport type MeetingWhiteboardDrawingsState = MeetingWhiteboardDrawingState[]\r\nexport type MenuExpandedState = MenuPosition[]\r\n\r\ninterface VideoStateStreamMuted {\r\n  video: boolean\r\n  audio: boolean\r\n}\r\n\r\nexport interface VideoState {\r\n  id: string\r\n  stream: MediaStream\r\n  kind: VideoStateKind\r\n  raiseHand: boolean\r\n  memberRemove: boolean\r\n  active: boolean\r\n  muted: boolean\r\n  streamMuted: VideoStateStreamMuted\r\n  renderId: string\r\n}\r\n\r\nexport interface MeetingState {\r\n  id: string\r\n  connectionId: string\r\n  videos: VideoState[]\r\n  mediaStream: MediaStream\r\n  screenStream: MediaStream\r\n  calls: MediaConnection[]\r\n  whiteboardDrawings: MeetingWhiteboardDrawingsState\r\n  whiteboardEnabled: boolean\r\n  menuExpanded: MenuExpandedState\r\n}\r\n\r\nexport interface MeetingActions {\r\n  replaceId: (id: string) => AnyAction\r\n  replaceConnectionId: (connectionId: string) => AnyAction\r\n  replaceVideos: (videos: VideoState[]) => AnyAction\r\n  replaceMediaStream: (mediaStream: MediaStream) => AnyAction\r\n  replaceScreenStream: (screenStream: MediaStream) => AnyAction\r\n  replaceVideoStream: (connectionId: string, stream: MediaStream) => AnyAction\r\n  replaceVideoKind: (connectionId: string, kind: VideoStateKind) => AnyAction\r\n  replaceVideoRaiseHand: (connectionId: string, raiseHand: boolean) => AnyAction\r\n  replaceVideoActive: (connectionId: string, active: boolean) => AnyAction\r\n  replaceWhiteboardDrawings: (whiteboardDrawings: MeetingWhiteboardDrawingsState) => AnyAction\r\n  replaceWhiteboardEnabled: (enabled: boolean) => AnyAction\r\n  replaceVideoStreamMutedVideo: (connectionId: string, muted: boolean) => AnyAction\r\n  replaceVideoStreamMutedAudio: (connectionId: string, muted: boolean) => AnyAction\r\n  updateVideoRenderId: (connectionId: string) => AnyAction\r\n  pushVideo: (video: VideoState) => AnyAction\r\n  pushCall: (call: MediaConnection) => AnyAction\r\n  pushWhiteboardDrawing: (whiteboardDrawing: MeetingWhiteboardDrawingState) => AnyAction\r\n  pushMenuExpanded: (menuExpanded: MenuPosition) => AnyAction\r\n  pullVideo: (connectionId: string) => AnyAction\r\n  pullMenuExpanded: (menuExpanded: MenuPosition) => AnyAction\r\n  reset: () => AnyAction\r\n}\r\n\r\nconst meeting: MeetingState = {\r\n  id: '',\r\n  connectionId: '',\r\n  videos: [],\r\n  mediaStream: new MediaStream(),\r\n  screenStream: new MediaStream(),\r\n  calls: [],\r\n  whiteboardDrawings: [],\r\n  whiteboardEnabled: false,\r\n  menuExpanded: ['top', 'bottom']\r\n}\r\n\r\nexport const actions: MeetingActions = {\r\n  replaceId (id) {\r\n    return { type: 'REPLACE_MEETING_ID', id }\r\n  },\r\n  replaceConnectionId (connectionId) {\r\n    return { type: 'REPLACE_MEETING_CONNECTION_ID', connectionId }\r\n  },\r\n  replaceVideos (videos) {\r\n    return { type: 'REPLACE_MEETING_VIDEOS', videos }\r\n  },\r\n  replaceMediaStream (mediaStream) {\r\n    return { type: 'REPLACE_MEETING_MEDIA_STREAM', mediaStream }\r\n  },\r\n  replaceScreenStream (screenStream) {\r\n    return { type: 'REPLACE_MEETING_SCREEN_STREAM', screenStream }\r\n  },\r\n  replaceVideoStream (connectionId, stream) {\r\n    const payload = { connectionId, stream }\r\n    return { type: 'REPLACE_MEETING_VIDEO_STREAM', payload }\r\n  },\r\n  replaceVideoKind (connectionId, kind) {\r\n    const payload = { connectionId, kind }\r\n    return { type: 'REPLACE_MEETING_VIDEO_KIND', payload }\r\n  },\r\n  replaceVideoRaiseHand (connectionId, raiseHand) {\r\n    const payload = { connectionId, raiseHand }\r\n    return { type: 'REPLACE_MEETING_VIDEO_RAISE_HAND', payload }\r\n  },\r\n  replaceVideoActive (connectionId, active) {\r\n    const payload = { connectionId, active }\r\n    return { type: 'REPLACE_MEETING_VIDEO_ACTIVE', payload }\r\n  },\r\n  replaceWhiteboardDrawings (whiteboardDrawings) {\r\n    return { type: 'REPLACE_MEETING_WHITEBOARD_DRAWINGS', whiteboardDrawings }\r\n  },\r\n  replaceWhiteboardEnabled (enabled) {\r\n    return { type: 'REPLACE_MEETING_WHITEBOARD_ENABLED', enabled }\r\n  },\r\n  replaceVideoStreamMutedVideo (connectionId, muted) {\r\n    const payload = { connectionId, muted }\r\n    return { type: 'REPLACE_MEETING_VIDEO_STREAM_MUTED_VIDEO', payload }\r\n  },\r\n  replaceVideoStreamMutedAudio (connectionId, muted) {\r\n    const payload = { connectionId, muted }\r\n    return { type: 'REPLACE_MEETING_VIDEO_STREAM_MUTED_AUDIO', payload }\r\n  },\r\n  updateVideoRenderId (connectionId) {\r\n    return { type: 'UPDATE_MEETING_VIDEO_RENDER_ID', connectionId }\r\n  },\r\n  pushVideo (video) {\r\n    return { type: 'PUSH_MEETING_VIDEO', video }\r\n  },\r\n  pushCall (call) {\r\n    return { type: 'PUSH_MEETING_CALL', call }\r\n  },\r\n  pushWhiteboardDrawing (whiteboardDrawing) {\r\n    return { type: 'PUSH_MEETING_WHITEBOARD_DRAWING', whiteboardDrawing }\r\n  },\r\n  pushMenuExpanded (menuExpanded) {\r\n    return { type: 'PUSH_MEETING_MENU_EXPANDED', menuExpanded }\r\n  },\r\n  pullVideo (connectionId) {\r\n    return { type: 'PULL_MEETING_VIDEO', connectionId }\r\n  },\r\n  pullMenuExpanded (menuExpanded) {\r\n    return { type: 'PULL_MEETING_MENU_EXPANDED', menuExpanded }\r\n  },\r\n  reset () {\r\n    return { type: 'RESET_MEETING' }\r\n  }\r\n}\r\n\r\nexport function reducers (state = meeting, action: any) {\r\n  switch (action.type) {\r\n    case 'REPLACE_MEETING_ID':\r\n      meeting.id = action.id\r\n      return cloneDeep(meeting)\r\n    case 'REPLACE_MEETING_CONNECTION_ID':\r\n      meeting.connectionId = action.connectionId\r\n      return cloneDeep(meeting)\r\n    case 'REPLACE_MEETING_VIDEOS':\r\n      meeting.videos = action.videos\r\n      return cloneDeep(meeting)\r\n    case 'REPLACE_MEETING_MEDIA_STREAM': {\r\n      meeting.mediaStream = action.mediaStream\r\n      return cloneDeep(meeting)\r\n    }\r\n    case 'REPLACE_MEETING_SCREEN_STREAM': {\r\n      meeting.screenStream = action.screenStream\r\n      return cloneDeep(meeting)\r\n    }\r\n    case 'REPLACE_MEETING_VIDEO_STREAM': {\r\n      const { connectionId, stream } = action.payload\r\n      const video = find(meeting.videos, { id: connectionId })\r\n      if (video) video.stream = stream\r\n      return cloneDeep(meeting)\r\n    }\r\n    case 'REPLACE_MEETING_VIDEO_KIND': {\r\n      const { connectionId, kind } = action.payload\r\n      const video = find(meeting.videos, { id: connectionId })\r\n      if (video) video.kind = kind\r\n      return cloneDeep(meeting)\r\n    }\r\n    case 'REPLACE_MEETING_VIDEO_RAISE_HAND': {\r\n      const { connectionId, raiseHand } = action.payload\r\n      const video = find(meeting.videos, { id: connectionId })\r\n      if (video) video.raiseHand = raiseHand\r\n      return cloneDeep(meeting)\r\n    }\r\n    case 'REPLACE_MEETING_VIDEO_ACTIVE': {\r\n      const { connectionId, active } = action.payload\r\n      const activeVideo = find(meeting.videos, { active })\r\n      const targetVideo = find(meeting.videos, { id: connectionId })\r\n      if (activeVideo) activeVideo.active = !active\r\n      if (targetVideo) targetVideo.active = active\r\n      return cloneDeep(meeting)\r\n    }\r\n    case 'REPLACE_MEETING_WHITEBOARD_DRAWINGS':\r\n      meeting.whiteboardDrawings = action.whiteboardDrawings\r\n      return cloneDeep(meeting)\r\n    case 'REPLACE_MEETING_WHITEBOARD_ENABLED': {\r\n      meeting.whiteboardEnabled = action.enabled\r\n      return cloneDeep(meeting)\r\n    }\r\n    case 'REPLACE_MEETING_VIDEO_STREAM_MUTED_VIDEO': {\r\n      const { connectionId: id, muted } = action.payload\r\n      const video = find(meeting.videos, { id })\r\n      if (video) video.streamMuted.video = muted\r\n      return cloneDeep(meeting)\r\n    }\r\n    case 'REPLACE_MEETING_VIDEO_STREAM_MUTED_AUDIO': {\r\n      const { connectionId: id, muted } = action.payload\r\n      const video = find(meeting.videos, { id })\r\n      if (video) video.streamMuted.audio = muted\r\n      return cloneDeep(meeting)\r\n    }\r\n    case 'UPDATE_MEETING_VIDEO_RENDER_ID': {\r\n      const { connectionId: id } = action\r\n      const video = find(meeting.videos, { id })\r\n      if (video) video.renderId = nanoid()\r\n      return cloneDeep(meeting)\r\n    }\r\n    case 'PUSH_MEETING_VIDEO': {\r\n      const isExists = some(meeting.videos, { id: action.video.id })\r\n      if (!isExists) meeting.videos.push(action.video)\r\n      return cloneDeep(meeting)\r\n    }\r\n    case 'PUSH_MEETING_CALL': {\r\n      meeting.calls.push(action.call)\r\n      return cloneDeep(meeting)\r\n    }\r\n    case 'PUSH_MEETING_WHITEBOARD_DRAWING': {\r\n      const stringifyDrawing = (drawing: MeetingWhiteboardDrawingState) => JSON.stringify(drawing)\r\n      const { whiteboardDrawing } = action\r\n      const drawings = map(meeting.whiteboardDrawings, stringifyDrawing)\r\n      const existingIndex = findIndex(drawings, drawing => {\r\n        return drawing === JSON.stringify(whiteboardDrawing)\r\n      })\r\n      const isExists = existingIndex >= 0\r\n      if (!isExists) meeting.whiteboardDrawings.push(whiteboardDrawing)\r\n      return cloneDeep(meeting)\r\n    }\r\n    case 'PUSH_MEETING_MENU_EXPANDED':\r\n      meeting.menuExpanded.push(action.menuExpanded)\r\n      return cloneDeep(meeting)\r\n    case 'PULL_MEETING_VIDEO': {\r\n      const { connectionId: id } = action\r\n      const isExists = some(meeting.videos, { id })\r\n      if (isExists) {\r\n        meeting.videos = reject(meeting.videos, { id })\r\n      }\r\n      return cloneDeep(meeting)\r\n    }\r\n    case 'PULL_MEETING_MENU_EXPANDED':\r\n      pull(meeting.menuExpanded, action.menuExpanded)\r\n      return cloneDeep(meeting)\r\n    case 'RESET_MEETING': {\r\n      meeting.id = ''\r\n      meeting.connectionId = ''\r\n      meeting.videos = []\r\n      meeting.menuExpanded = ['top', 'bottom']\r\n      return cloneDeep(meeting)\r\n    }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport function selectors (state: { meeting: MeetingState }) {\r\n  return cloneDeep(state.meeting)\r\n}\r\n","import { AnyAction } from 'redux'\r\nimport { cloneDeep } from 'lodash'\r\nimport { actions as meetingActions } from '../Meeting/Meeting.state'\r\n\r\nexport interface JoinState {\r\n  meetingId: string\r\n}\r\n\r\nexport interface JoinActions {\r\n  replaceMeetingId: (meetingId: string) => AnyAction\r\n  replaceMeetingMeetingId: (meetingId: string) => AnyAction\r\n}\r\n\r\nconst join: JoinState = {\r\n  meetingId: ''\r\n}\r\n\r\nexport const actions: JoinActions = {\r\n  replaceMeetingId (meetingId) {\r\n    return { type: 'REPLACE_JOIN_MEETING_ID', meetingId }\r\n  },\r\n  replaceMeetingMeetingId (meetingId) {\r\n    return meetingActions.replaceId(meetingId)\r\n  }\r\n}\r\n\r\nexport function reducers (state = join, action: any) {\r\n  switch (action.type) {\r\n    case 'REPLACE_JOIN_MEETING_ID':\r\n      join.meetingId = action.meetingId\r\n      return cloneDeep(join)\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport function selectors (state: { join: JoinState }) {\r\n  return cloneDeep(state.join)\r\n}\r\n","import { AnyAction } from 'redux'\r\nimport { cloneDeep } from 'lodash'\r\nimport { actions as appActions, AuthType } from '../../components/App/App.state'\r\n\r\nexport interface StartState {\r\n  username: string\r\n  password: string\r\n}\r\n\r\nexport interface StartActions {\r\n  replaceUsername: (username: string) => AnyAction\r\n  replacePassword: (password: string) => AnyAction\r\n  replaceAppAuthType: (type: AuthType) => AnyAction\r\n}\r\n\r\nconst start: StartState = {\r\n  username: '',\r\n  password: ''\r\n}\r\n\r\nexport const actions: StartActions = {\r\n  replaceUsername (username) {\r\n    return { type: 'REPLACE_START_USERNAME', username }\r\n  },\r\n  replacePassword (password) {\r\n    return { type: 'REPLACE_START_PASSWORD', password }\r\n  },\r\n  replaceAppAuthType (type) {\r\n    return appActions.replaceAuthType(type)\r\n  }\r\n}\r\n\r\nexport function reducers (state = start, action: any) {\r\n  switch (action.type) {\r\n    case 'REPLACE_START_USERNAME':\r\n      start.username = action.username\r\n      return cloneDeep(start)\r\n    case 'REPLACE_START_PASSWORD':\r\n      start.password = action.password\r\n      return cloneDeep(start)\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport function selectors (state: { start: StartState }) {\r\n  return cloneDeep(state.start)\r\n}\r\n","import { AnyAction } from 'redux'\r\nimport { cloneDeep } from 'lodash'\r\n\r\nexport interface HostCreateState {\r\n  name: string\r\n  username: string\r\n  password: string\r\n}\r\n\r\nexport interface HostCreateActions {\r\n  replaceName: (name: string) => AnyAction\r\n  replaceUsername: (username: string) => AnyAction\r\n  replacePassword: (password: string) => AnyAction\r\n}\r\n\r\nconst hostCreate: HostCreateState = {\r\n  name: '',\r\n  username: '',\r\n  password: ''\r\n}\r\n\r\nexport const actions: HostCreateActions = {\r\n  replaceName (name) {\r\n    return { type: 'REPLACE_HOST_CREATE_NAME', name }\r\n  },\r\n  replaceUsername (username) {\r\n    return { type: 'REPLACE_HOST_CREATE_USERNAME', username }\r\n  },\r\n  replacePassword (password) {\r\n    return { type: 'REPLACE_HOST_CREATE_PASSWORD', password }\r\n  }\r\n}\r\n\r\nexport function reducers (state = hostCreate, action: any) {\r\n  switch (action.type) {\r\n    case 'REPLACE_HOST_CREATE_NAME':\r\n      hostCreate.name = action.name\r\n      return cloneDeep(hostCreate)\r\n    case 'REPLACE_HOST_CREATE_USERNAME':\r\n      hostCreate.username = action.username\r\n      return cloneDeep(hostCreate)\r\n    case 'REPLACE_HOST_CREATE_PASSWORD':\r\n      hostCreate.password = action.password\r\n      return cloneDeep(hostCreate)\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport function selectors (state: { hostCreate: HostCreateState }) {\r\n  return cloneDeep(state.hostCreate)\r\n}\r\n","import { AnyAction } from 'redux'\r\nimport { cloneDeep, reject, some } from 'lodash'\r\n\r\nexport interface HostState {\r\n  id: number\r\n  name: string\r\n  username: string\r\n  accessToken: string\r\n  lastMeetingAt: Date\r\n  password: string\r\n}\r\n\r\nexport interface HostsState {\r\n  hosts: HostState[]\r\n}\r\n\r\nexport interface HostsActions {\r\n  replaceHosts: (hosts: HostsState[]) => AnyAction\r\n  pushHost: (host: HostState) => AnyAction\r\n  pullHost: (id: number) => AnyAction\r\n}\r\n\r\nconst hosts: HostsState = {\r\n  hosts: []\r\n}\r\n\r\nexport const actions: HostsActions = {\r\n  replaceHosts (hosts) {\r\n    return { type: 'REPLACE_HOSTS_HOSTS', hosts }\r\n  },\r\n  pushHost (host) {\r\n    return { type: 'PUSH_HOSTS_HOST', host }\r\n  },\r\n  pullHost (id) {\r\n    return { type: 'PULL_HOSTS_HOST', id }\r\n  }\r\n}\r\n\r\nexport function reducers (state = hosts, action: any) {\r\n  switch (action.type) {\r\n    case 'REPLACE_HOSTS_HOSTS':\r\n      hosts.hosts = action.hosts\r\n      return cloneDeep(hosts)\r\n    case 'PUSH_HOSTS_HOST':\r\n      hosts.hosts.unshift(action.host)\r\n      return cloneDeep(hosts)\r\n    case 'PULL_HOSTS_HOST': {\r\n      const { id } = action\r\n      const isExists = some(hosts.hosts, { id })\r\n      if (isExists) {\r\n        hosts.hosts = reject(hosts.hosts, { id })\r\n      }\r\n      return cloneDeep(hosts)\r\n    }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport function selectors (state: { hosts: HostsState }) {\r\n  return cloneDeep(state.hosts)\r\n}\r\n","import { AnyAction } from 'redux'\r\nimport { cloneDeep } from 'lodash'\r\n\r\nexport interface PrivacyState {\r\n  privacy: string\r\n}\r\n\r\nexport interface PrivacyActions {\r\n  replacePrivacy(privacy: string): AnyAction\r\n}\r\n\r\nconst privacy: PrivacyState = {\r\n  privacy: ''\r\n}\r\n\r\nexport const actions: PrivacyActions = {\r\n  replacePrivacy (privacy) {\r\n    return { type: 'REPLACE_PRIVACY_PRIVACY', privacy }\r\n  }\r\n}\r\n\r\nexport function reducers (state = privacy, action: any) {\r\n  switch (action.type) {\r\n    case 'REPLACE_PRIVACY_PRIVACY':\r\n      privacy.privacy = action.privacy\r\n      return cloneDeep(privacy)\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport function selectors (state: { privacy: PrivacyState }) {\r\n  return cloneDeep(state.privacy)\r\n}\r\n","import { AnyAction } from 'redux'\r\nimport { cloneDeep } from 'lodash'\r\n\r\nexport interface PrivacyEditState {\r\n  privacy: string\r\n}\r\n\r\nexport interface PrivacyEditActions {\r\n  replacePrivacy(privacy: string): AnyAction\r\n}\r\n\r\nconst privacyEdit: PrivacyEditState = {\r\n  privacy: ''\r\n}\r\n\r\nexport const actions: PrivacyEditActions = {\r\n  replacePrivacy (privacy) {\r\n    return { type: 'REPLACE_PRIVACY_EDIT_PRIVACY', privacy }\r\n  }\r\n}\r\n\r\nexport function reducers (state = privacyEdit, action: any) {\r\n  switch (action.type) {\r\n    case 'REPLACE_PRIVACY_EDIT_PRIVACY':\r\n      privacyEdit.privacy = action.privacy\r\n      return cloneDeep(privacyEdit)\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport function selectors (state: { privacyEdit: PrivacyEditState }) {\r\n  return cloneDeep(state.privacyEdit)\r\n}\r\n","import { AnyAction } from 'redux'\r\nimport { cloneDeep } from 'lodash'\r\n\r\nexport type WhiteboardActiveMenu = 'color' | 'size' | null\r\nexport interface WhiteboardState {\r\n  activeMenu: WhiteboardActiveMenu\r\n  brushSize: string,\r\n  brushColor: string\r\n}\r\n\r\nexport interface WhiteboardActions {\r\n  replaceActiveMenu: (activeMenu: WhiteboardActiveMenu) => AnyAction\r\n  replaceSize(size: string): AnyAction\r\n  replaceColor(color: string): AnyAction\r\n}\r\n\r\nconst whiteboard: WhiteboardState = {\r\n  activeMenu: null,\r\n  brushSize: '1',\r\n  brushColor: '#000000'\r\n}\r\n\r\nexport const actions: WhiteboardActions = {\r\n  replaceActiveMenu (activeMenu) {\r\n    return { type: 'REPLACE_WHITEBOARD_ACTIVE_MENU', activeMenu }\r\n  },\r\n  replaceSize (brushSize) {\r\n    return { type: 'REPLACE_WHITEBOARD_BRUSH_SIZE', brushSize }\r\n  },\r\n  replaceColor (brushColor) {\r\n    return { type: 'REPLACE_WHITEBOARD_BRUSH_COLOR', brushColor }\r\n  }\r\n}\r\n\r\nexport function reducers (state = whiteboard, action: any) {\r\n  switch (action.type) {\r\n    case 'REPLACE_WHITEBOARD_ACTIVE_MENU':\r\n      whiteboard.activeMenu = action.activeMenu\r\n      return cloneDeep(whiteboard)\r\n    case 'REPLACE_WHITEBOARD_BRUSH_SIZE':\r\n      whiteboard.brushSize = action.brushSize\r\n      return cloneDeep(whiteboard)\r\n    case 'REPLACE_WHITEBOARD_BRUSH_COLOR':\r\n      whiteboard.brushColor = action.brushColor\r\n      return cloneDeep(whiteboard)\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport function selectors (state: { whiteboard: WhiteboardState }) {\r\n  return cloneDeep(state.whiteboard)\r\n}\r\n","import { applyMiddleware, combineReducers, createStore } from 'redux'\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\n\r\nimport { reducers as app } from './components/App/App.state'\r\nimport { reducers as alert } from './components/Alert/Alert.state'\r\nimport { reducers as install } from './pages/Install/Install.state'\r\nimport { reducers as adminSignIn } from './pages/AdminSignIn/AdminSignIn.state'\r\nimport { reducers as join } from './pages/Join/Join.state'\r\nimport { reducers as start } from './pages/Start/Start.state'\r\nimport { reducers as meeting } from './pages/Meeting/Meeting.state'\r\nimport { reducers as hostCreate } from './components/HostCreate/HostCreate.state'\r\nimport { reducers as hosts } from './pages/Hosts/Hosts.state'\r\nimport { reducers as privacy } from './pages/Privacy/Privacy.state'\r\nimport { reducers as privacyEdit } from './pages/PrivacyEdit/PrivacyEdit.state'\r\nimport { reducers as whiteboard } from './components/Whiteboard/Whiteboard.state'\r\n\r\nconst reducers = combineReducers({\r\n  app,\r\n  alert,\r\n  install,\r\n  adminSignIn,\r\n  join,\r\n  start,\r\n  meeting,\r\n  hostCreate,\r\n  hosts,\r\n  privacy,\r\n  privacyEdit,\r\n  whiteboard\r\n})\r\n\r\nexport default createStore(reducers, composeWithDevTools(applyMiddleware()))\r\n","import store from '../store'\r\nimport {\r\n  actions as alertActions,\r\n  selectors as alertSelectors\r\n} from '../components/Alert/Alert.state'\r\n\r\nexport default class AlertService {\r\n  private static timeout: number = 5000\r\n\r\n  private static clearAutoClose (): void {\r\n    const { timeoutId } = alertSelectors(store.getState())\r\n    clearTimeout(timeoutId)\r\n    store.dispatch(alertActions.replaceTimeoutId(0))\r\n  }\r\n\r\n  private static setAutoClose (): void {\r\n    const timeoutId: number = window.setTimeout(() => {\r\n      store.dispatch(alertActions.replaceMessage(''))\r\n      this.clearAutoClose()\r\n    }, this.timeout)\r\n    store.dispatch(alertActions.replaceTimeoutId(timeoutId))\r\n  }\r\n\r\n  static push (message: string, handleProceed?: () => void): void {\r\n    this.pull()\r\n    store.dispatch(alertActions.replaceMessage(message))\r\n    if (handleProceed) {\r\n      store.dispatch(alertActions.replaceHandleProceed(handleProceed))\r\n    } else this.setAutoClose()\r\n  }\r\n\r\n  static pull () {\r\n    this.clearAutoClose()\r\n    store.dispatch(alertActions.replaceMessage(''))\r\n    store.dispatch(alertActions.replaceHandleProceed(null))\r\n  }\r\n}\r\n","import { IonIcon } from '@ionic/react'\r\nimport React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { alertCircleOutline } from 'ionicons/icons'\r\nimport AlertService from '../../services/AlertService'\r\nimport { selectors, actions, AlertState } from './Alert.state'\r\nimport styles from './Alert.module.scss'\r\n\r\ninterface AlertProps extends AlertState {}\r\n\r\nclass Alert extends Component<AlertProps> {\r\n  constructor (props: AlertProps) {\r\n    super(props)\r\n    this.handleClick = this.handleClick.bind(this)\r\n    this.handleCancelClick = this.handleCancelClick.bind(this)\r\n    this.handleProceedClick = this.handleProceedClick.bind(this)\r\n  }\r\n\r\n  get className () {\r\n    const cursorClass = !this.props.handleProceed && styles.cursor\r\n    return `${styles.alert} ${cursorClass}`\r\n  }\r\n\r\n  get actions () {\r\n    return this.props.handleProceed &&\r\n      <div className={styles.actions}>\r\n        <div\r\n          className={styles.cancel}\r\n          onClick={this.handleCancelClick}>\r\n          No\r\n        </div>\r\n        <div\r\n          className={styles.proceed}\r\n          onClick={this.handleProceedClick}>\r\n          Yes\r\n        </div>\r\n      </div>\r\n  }\r\n\r\n  handleClick () {\r\n    if (!this.props.handleProceed) AlertService.pull()\r\n  }\r\n\r\n  handleCancelClick () {\r\n    AlertService.pull()\r\n  }\r\n\r\n  handleProceedClick () {\r\n    if (this.props.handleProceed) {\r\n      this.props.handleProceed()\r\n      AlertService.pull()\r\n    }\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      this.props.message &&\r\n        <div\r\n          className={this.className}\r\n          onClick={this.handleClick}>\r\n          <div className={styles.content}>\r\n            <IonIcon\r\n              className={styles.icon}\r\n              icon={alertCircleOutline} />\r\n            <span className={styles.message}>{this.props.message}</span>\r\n          </div>\r\n          {this.actions}\r\n        </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(selectors, actions)(Alert)\r\n","import React, { Component } from 'react'\r\nimport Header from '../Header/Header'\r\nimport Container, { ContainerWidth } from '../Container/Container'\r\nimport Footer from '../Footer/Footer'\r\nimport Alert from '../Alert/Alert'\r\nimport styles from './Page.module.scss'\r\n\r\ninterface PageProps {\r\n  invert: boolean\r\n  container: ContainerWidth\r\n}\r\n\r\nexport default class Page extends Component<PageProps> {\r\n  get mainClassName () {\r\n    const invertClass = this.props.invert && styles.invert\r\n    const containerClass = styles[this.props.container]\r\n    return `${styles.main} ${invertClass} ${containerClass}`\r\n  }\r\n\r\n  get headerVisibility () {\r\n    return this.props.container !== 'full'\r\n  }\r\n\r\n  get containerVisibility () {\r\n    return !this.props.invert\r\n  }\r\n\r\n  get footerVisibility () {\r\n    return this.props.container === 'small'\r\n  }\r\n\r\n  get footerInvert () {\r\n    return !this.props.invert\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className={styles.page}>\r\n        <div className={this.mainClassName}>\r\n          <Header\r\n            visibility={this.headerVisibility}\r\n            invert={this.props.invert} />\r\n          <Container\r\n            visibility={this.containerVisibility}\r\n            width={this.props.container}>\r\n            {this.props.children}\r\n          </Container>\r\n        </div>\r\n        <Footer\r\n          visibility={this.footerVisibility}\r\n          invert={this.footerInvert} />\r\n        <Alert />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import { Plugins } from '@capacitor/core'\r\nimport { IonContent, IonPage } from '@ionic/react'\r\nimport React, { Component } from 'react'\r\nimport { RouteComponentProps, withRouter } from 'react-router'\r\nimport { includes, startsWith } from 'lodash'\r\nimport routes from '../../routes'\r\nimport Page from '../../components/Page/Page'\r\n\r\ninterface PreloadProps extends RouteComponentProps {}\r\n\r\nclass Preload extends Component<PreloadProps> {\r\n  timeout: number\r\n  timeoutId: number | null\r\n\r\n  constructor (props: PreloadProps) {\r\n    super(props)\r\n    this.timeout = 2000\r\n    this.timeoutId = null\r\n  }\r\n\r\n  autoRoute () {\r\n    this.timeoutId = window.setTimeout(\r\n      () => this.props.history.push(routes.home.path),\r\n      this.timeout\r\n    )\r\n  }\r\n\r\n  preventAutoRoute () {\r\n    if (this.timeoutId) clearTimeout(this.timeoutId)\r\n  }\r\n\r\n  handleDeeplinkOpen () {\r\n    Plugins.App.addListener('appUrlOpen', (data: any) => {\r\n      const slug = data.url.split(process.env.REACT_APP_HOST).pop()\r\n      const isJoin = startsWith(slug, '/join?id=')\r\n      const isStart = includes(['/start', '/start/'], slug)\r\n      if (isJoin || isStart) {\r\n        this.preventAutoRoute()\r\n        this.props.history.push(slug)\r\n      }\r\n    })\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.autoRoute()\r\n    this.handleDeeplinkOpen()\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonPage>\r\n        <IonContent>\r\n          <Page\r\n            invert={true}\r\n            container=\"small\" />\r\n        </IonContent>\r\n      </IonPage>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(Preload)\r\n","import { IonButton } from '@ionic/react'\r\nimport React, { MouseEvent, Component } from 'react'\r\nimport styles from './Button.module.scss'\r\n\r\nexport interface ButtonProps {\r\n  text: string\r\n  handleClick: (event: MouseEvent) => void\r\n}\r\n\r\nexport default class Button extends Component<ButtonProps> {\r\n  render () {\r\n    return (\r\n      <div className={styles.button}>\r\n        <IonButton\r\n          className={styles.content}\r\n          shape=\"round\"\r\n          expand=\"block\"\r\n          onClick={this.props.handleClick}>\r\n          {this.props.text}\r\n        </IonButton>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import { IonCol, IonContent, IonGrid, IonPage, IonRow } from '@ionic/react'\r\nimport React, { Component } from 'react'\r\nimport { RouteComponentProps, withRouter } from 'react-router'\r\nimport routes from '../../routes'\r\nimport Page from '../../components/Page/Page'\r\nimport Button from '../../components/Button/Button'\r\n\r\ninterface HomeProps extends RouteComponentProps {}\r\n\r\nclass Home extends Component<HomeProps> {\r\n  constructor (props: HomeProps) {\r\n    super(props)\r\n    this.handleStartClick = this.handleStartClick.bind(this)\r\n    this.handleJoinClick = this.handleJoinClick.bind(this)\r\n  }\r\n\r\n  handleStartClick () {\r\n    this.props.history.push(routes.start.path)\r\n  }\r\n\r\n  handleJoinClick () {\r\n    this.props.history.push(routes.join.path)\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonPage>\r\n        <IonContent>\r\n          <Page\r\n            invert={false}\r\n            container=\"small\">\r\n            <IonGrid>\r\n              <IonRow>\r\n                <IonCol>\r\n                  <Button\r\n                    text=\"Start a Meeting\"\r\n                    handleClick={this.handleStartClick} />\r\n                  <Button\r\n                    text=\"Join a Meeting\"\r\n                    handleClick={this.handleJoinClick} />\r\n                </IonCol>\r\n              </IonRow>\r\n            </IonGrid>\r\n          </Page>\r\n        </IonContent>\r\n      </IonPage>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(Home)\r\n","import React, { ChangeEvent, Component } from 'react'\r\nimport styles from './Input.module.scss'\r\n\r\ninterface InputProps {\r\n  name: string\r\n  type: string\r\n  value: string\r\n  placeholder: string\r\n  handleChange: (event: ChangeEvent) => void\r\n}\r\n\r\nexport default class Input extends Component<InputProps> {\r\n  render () {\r\n    return (\r\n      <input\r\n        className={styles.input}\r\n        name={this.props.name}\r\n        type={this.props.type}\r\n        value={this.props.value}\r\n        placeholder={this.props.placeholder}\r\n        onChange={this.props.handleChange}\r\n        autoComplete=\"off\" />\r\n    )\r\n  }\r\n}\r\n","import { IonCol, IonContent, IonGrid, IonPage, IonRow } from '@ionic/react'\r\nimport React, { ChangeEvent, Component } from 'react'\r\nimport { RouteComponentProps, withRouter } from 'react-router'\r\nimport { connect } from 'react-redux'\r\nimport { trim } from 'lodash'\r\nimport qs from 'qs'\r\nimport routes from '../../routes'\r\nimport AlertService from '../../services/AlertService'\r\nimport { actions, selectors, JoinState, JoinActions } from './Join.state'\r\nimport Page from '../../components/Page/Page'\r\nimport Input from '../../components/Input/Input'\r\nimport Button from '../../components/Button/Button'\r\n\r\ninterface JoinProps extends JoinActions, JoinState, RouteComponentProps {}\r\n\r\nclass Join extends Component<JoinProps> {\r\n  constructor (props: any) {\r\n    super(props)\r\n    this.handleInputChange = this.handleInputChange.bind(this)\r\n    this.handleJoinClick = this.handleJoinClick.bind(this)\r\n  }\r\n\r\n  handleInputChange (event: ChangeEvent) {\r\n    const target = event.target as HTMLInputElement\r\n    const { value, name } = target\r\n    if (name === 'meetingId') this.props.replaceMeetingId(value)\r\n  }\r\n\r\n  handleJoinClick () {\r\n    const meetingId = trim(this.props.meetingId)\r\n    if (!meetingId) {\r\n      const message = 'Meeting ID is not allowed to be empty'\r\n      return AlertService.push(message)\r\n    }\r\n    this.props.replaceMeetingMeetingId(meetingId)\r\n    this.props.history.push(routes.meeting.path)\r\n  }\r\n\r\n  setMeetingIdFromUrl () {\r\n    const { search } = this.props.history.location\r\n    const query = qs.parse(search, { ignoreQueryPrefix: true })\r\n    const meetingId = query.id as string\r\n    if (meetingId) this.props.replaceMeetingId(meetingId)\r\n  }\r\n\r\n  clearForm () {\r\n    this.props.replaceMeetingId('')\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.setMeetingIdFromUrl()\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    this.clearForm()\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonPage>\r\n        <IonContent>\r\n          <Page\r\n            invert={false}\r\n            container=\"small\">\r\n            <IonGrid>\r\n              <IonRow>\r\n                <IonCol>\r\n                  <Input\r\n                    name=\"meetingId\"\r\n                    type=\"text\"\r\n                    value={this.props.meetingId}\r\n                    placeholder=\"Meeting ID\"\r\n                    handleChange={this.handleInputChange} />\r\n                  <Button\r\n                    text=\"Join Meeting\"\r\n                    handleClick={this.handleJoinClick} />\r\n                </IonCol>\r\n              </IonRow>\r\n            </IonGrid>\r\n          </Page>\r\n        </IonContent>\r\n      </IonPage>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(selectors, actions)(Join))\r\n","import { Plugins, StoragePlugin } from '@capacitor/core'\r\nimport { isPlatform } from '@ionic/react'\r\n\r\nexport default class StorageService {\r\n  protected storage: StoragePlugin = Plugins.Storage\r\n\r\n  protected isElectron: boolean = isPlatform('electron')\r\n\r\n  async get (key: string) {\r\n    if (this.isElectron) {\r\n      return window.localStorage.getItem(key)\r\n    } else {\r\n      const { value } = await this.storage.get({ key })\r\n      return value\r\n    }\r\n  }\r\n\r\n  async set (key: string, value: any) {\r\n    if (this.isElectron) {\r\n      window.localStorage.setItem(key, value)\r\n    } else {\r\n      await this.storage.set({ key, value })\r\n    }\r\n  }\r\n\r\n  async remove (key: string) {\r\n    if (this.isElectron) {\r\n      window.localStorage.removeItem(key)\r\n    } else {\r\n      await this.storage.remove({ key })\r\n    }\r\n  }\r\n}\r\n","import StorageService from '../../services/StorageService'\r\n\r\ninterface Key {\r\n  pwaInstallPrompted: string\r\n  accessToken: string\r\n}\r\n\r\ntype AccessTokenGetCallback = (accessToken: string | null) => void\r\ntype PwaPromptCheckCallback = (pwaPrompted: boolean) => void\r\n\r\nexport default class AppStorage {\r\n  private key: Key\r\n  private storageService: StorageService\r\n\r\n  constructor () {\r\n    this.key = {\r\n      pwaInstallPrompted: 'pwaInstallPrompted',\r\n      accessToken: 'accessToken'\r\n    }\r\n    this.storageService = new StorageService()\r\n  }\r\n\r\n  async checkPwaPrompted (callback: PwaPromptCheckCallback) {\r\n    const pwaPromptedValue = await this.storageService\r\n      .get(this.key.pwaInstallPrompted)\r\n    const pwaPrompted = pwaPromptedValue\r\n      ? Boolean(JSON.parse(pwaPromptedValue))\r\n      : false\r\n    callback(pwaPrompted)\r\n  }\r\n\r\n  async setPwaInstallPrompted (callback: () => void) {\r\n    const pwaPrompted = JSON.stringify(true)\r\n    await this.storageService.set(this.key.pwaInstallPrompted, pwaPrompted)\r\n    callback()\r\n  }\r\n\r\n  async getAccessToken (callback: AccessTokenGetCallback) {\r\n    const accessToken = await this.storageService.get(this.key.accessToken)\r\n    callback(accessToken)\r\n  }\r\n\r\n  async setAccessToken (accessToken: string, callback: () => void) {\r\n    await this.storageService.set(this.key.accessToken, accessToken)\r\n    callback()\r\n  }\r\n\r\n  async removeAccessToken (callback: () => void) {\r\n    await this.storageService.remove(this.key.accessToken)\r\n    callback()\r\n  }\r\n}\r\n","import axios, { AxiosInstance } from 'axios'\r\nimport AppStorage from '../components/App/App.storage'\r\nimport AlertService from './AlertService'\r\n\r\ntype GetClientCallback = (client: AxiosInstance) => void\r\n\r\nexport default class RequestService {\r\n  private appStorage: AppStorage\r\n\r\n  constructor () {\r\n    this.appStorage = new AppStorage()\r\n  }\r\n\r\n  private getClient (callback: GetClientCallback) {\r\n    this.appStorage.getAccessToken(accessToken => {\r\n      const client = axios.create({\r\n        baseURL: `https://${process.env.REACT_APP_API_HOST}`,\r\n        headers: { Authorization: `Bearer ${accessToken}` }\r\n      })\r\n      callback(client)\r\n    })\r\n  }\r\n\r\n  private handleError (error: any) {\r\n    const serverError = (error.response && error.response.data.message)\r\n    const message = serverError || error.message\r\n    AlertService.push(message)\r\n  }\r\n\r\n  get (path: string, callback: ((data: any) => void)) {\r\n    this.getClient(client => {\r\n      client.get(path)\r\n        .then(response => callback(response.data))\r\n        .catch(error => {\r\n          callback(null)\r\n          this.handleError(error)\r\n        })\r\n    })\r\n  }\r\n\r\n  post (path: string, payload: any, callback: ((data: any) => void)) {\r\n    this.getClient(client => {\r\n      client.post(path, payload)\r\n        .then(response => callback(response.data))\r\n        .catch(error => {\r\n          callback(null)\r\n          this.handleError(error)\r\n        })\r\n    })\r\n  }\r\n\r\n  patch (path: string, payload: any, callback: ((data: object | null) => void)) {\r\n    this.getClient(client => {\r\n      client.patch(path, payload)\r\n        .then(response => callback(response.data))\r\n        .catch(error => {\r\n          callback(null)\r\n          this.handleError(error)\r\n        })\r\n    })\r\n  }\r\n\r\n  delete (path: string, payload: any, callback: ((data: object | null) => void)) {\r\n    this.getClient(client => {\r\n      client.delete(path, { data: payload })\r\n        .then(response => callback(response.data))\r\n        .catch(error => {\r\n          callback(null)\r\n          this.handleError(error)\r\n        })\r\n    })\r\n  }\r\n}\r\n","import RequestService from '../../services/RequestService'\r\nimport AppStorage from '../../components/App/App.storage'\r\n\r\ninterface SignInCredentials {\r\n  username: string\r\n  password: string\r\n}\r\n\r\ninterface UpdateLastMeetingAtHost {\r\n  id: string\r\n}\r\n\r\nexport default class StartRequest {\r\n  private requestService: RequestService\r\n  private appStorage: AppStorage\r\n\r\n  constructor () {\r\n    this.requestService = new RequestService()\r\n    this.appStorage = new AppStorage()\r\n  }\r\n\r\n  private updateLastMeetingAt (hostId: string, callback: () => void) {\r\n    const host: UpdateLastMeetingAtHost = { id: hostId }\r\n    this.requestService.patch('/host/lastMeetingAt', host, response => {\r\n      if (response) callback()\r\n    })\r\n  }\r\n\r\n  signIn (credentials: SignInCredentials, callback: () => void) {\r\n    this.requestService.post('/host/signIn', credentials, response => {\r\n      if (response) {\r\n        const { id, accessToken } = response\r\n        this.appStorage.setAccessToken(accessToken, () => {\r\n          this.updateLastMeetingAt(id, callback)\r\n        })\r\n      }\r\n    })\r\n  }\r\n}\r\n","import { IonCol, IonContent, IonGrid, IonPage, IonRow } from '@ionic/react'\r\nimport React, { ChangeEvent, Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { RouteComponentProps, withRouter } from 'react-router'\r\nimport routes from '../../routes'\r\nimport Request from './Start.request'\r\nimport { actions, selectors, StartState, StartActions } from './Start.state'\r\nimport Page from '../../components/Page/Page'\r\nimport Input from '../../components/Input/Input'\r\nimport Button from '../../components/Button/Button'\r\n\r\ninterface StartProps extends StartState, StartActions, RouteComponentProps {}\r\n\r\nclass Start extends Component<StartProps> {\r\n  request: Request\r\n\r\n  constructor (props: any) {\r\n    super(props)\r\n    this.request = new Request()\r\n    this.handleInputChange = this.handleInputChange.bind(this)\r\n    this.handleStartClick = this.handleStartClick.bind(this)\r\n  }\r\n\r\n  handleInputChange (event: ChangeEvent) {\r\n    const target = event.target as HTMLInputElement\r\n    const { value, name } = target\r\n    switch (name) {\r\n      case 'username':\r\n        this.props.replaceUsername(value)\r\n        break\r\n      case 'password':\r\n        this.props.replacePassword(value)\r\n        break\r\n    }\r\n  }\r\n\r\n  handleStartClick () {\r\n    const { username, password } = this.props\r\n    const credentials = { username, password }\r\n    this.request.signIn(credentials, () => {\r\n      this.props.replaceAppAuthType('host')\r\n      this.props.history.push(routes.meeting.path)\r\n    })\r\n  }\r\n\r\n  clearForm () {\r\n    this.props.replaceUsername('')\r\n    this.props.replacePassword('')\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    this.clearForm()\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonPage>\r\n        <IonContent>\r\n          <Page\r\n            invert={false}\r\n            container=\"small\">\r\n            <IonGrid>\r\n              <IonRow>\r\n                <IonCol>\r\n                  <Input\r\n                    name=\"username\"\r\n                    type=\"text\"\r\n                    value={this.props.username}\r\n                    placeholder=\"Username\"\r\n                    handleChange={this.handleInputChange} />\r\n                  <Input\r\n                    name=\"password\"\r\n                    type=\"password\"\r\n                    value={this.props.password}\r\n                    placeholder=\"Password\"\r\n                    handleChange={this.handleInputChange} />\r\n                  <Button\r\n                    text=\"Start Meeting\"\r\n                    handleClick={this.handleStartClick} />\r\n                </IonCol>\r\n              </IonRow>\r\n            </IonGrid>\r\n          </Page>\r\n        </IonContent>\r\n      </IonPage>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(selectors, actions)(Start))\r\n","import Peer, { MediaConnection } from 'peerjs'\r\nimport { History } from 'history'\r\nimport { includes } from 'lodash'\r\nimport routes from '../routes'\r\nimport AlertService from './AlertService'\r\n\r\nexport default class PeerService {\r\n  private static options = {\r\n    host: process.env.REACT_APP_HOST,\r\n    path: '/peer',\r\n    secure: true,\r\n  };\r\n\r\n  private client: Peer;\r\n\r\n  constructor() {\r\n    this.client = new Peer(PeerService.options);\r\n  }\r\n\r\n  private getErrorMessage(type: string): string {\r\n    switch (type) {\r\n      case 'browser-incompatible':\r\n        return \"Device doesn't support WebRTC\";\r\n      case 'disconnected':\r\n        return 'Already disconnected meeting';\r\n      case 'invalid-id':\r\n        return 'Invalid connection ID';\r\n      case 'invalid-key':\r\n        return 'Invalid API key';\r\n      case 'network':\r\n        return \"Can't establish network connection\";\r\n      case 'peer-unavailable':\r\n        return \"Meeting ID doesn't exist\";\r\n      case 'ssl-unavailable':\r\n        return \"Server doesn't support SSL\";\r\n      case 'server-error':\r\n        return 'Unable to reach server';\r\n      case 'socket-error':\r\n        return 'Underlying socket error';\r\n      case 'socket-closed':\r\n        return 'Underlying socket closed';\r\n      case 'unavailable-id':\r\n        return 'Connection ID already taken';\r\n      case 'webrtc':\r\n        return \"Device doesn't support WebRTC\";\r\n      default:\r\n        return 'Something went wrong';\r\n    }\r\n  }\r\n\r\n  handleErrors(history: History) {\r\n    this.client.on('error', (error) => {\r\n      const { type } = error;\r\n      const message = this.getErrorMessage(type);\r\n      AlertService.push(message);\r\n      const routeErrorTypes = ['network', 'server-error', 'peer-unavailable'];\r\n      const canRoute = includes(routeErrorTypes, type);\r\n      if (canRoute) history.push(routes.home.path);\r\n    });\r\n  }\r\n\r\n  onOpen(callback: (localConnectionId: string) => void): void {\r\n    this.client.on('open', (localConnectionId) => callback(localConnectionId));\r\n  }\r\n\r\n  call(meetingId: string, stream: MediaStream, callback: (call: MediaConnection) => void): void {\r\n    const call = this.client.call(meetingId, stream);\r\n    callback(call);\r\n  }\r\n\r\n  onReceiveCall(callback: (call: MediaConnection) => void): void {\r\n    this.client.on('call', (call) => callback(call));\r\n  }\r\n\r\n  answerCall(call: MediaConnection, localStream: MediaStream): void {\r\n    call.answer(localStream);\r\n  }\r\n\r\n  onCalling(call: MediaConnection, callback: (remoteConnectionId: string, remoteStream: MediaStream) => void): void {\r\n    call.on('stream', (remoteStream) => {\r\n      const remoteConnectionId = call.peer;\r\n      callback(remoteConnectionId, remoteStream);\r\n    });\r\n  }\r\n\r\n  disconnect(): void {\r\n    this.client.destroy();\r\n  }\r\n\r\n  onDisconnect(callback: () => void): void {\r\n    this.client.on('close', () => callback());\r\n  }\r\n}\r\n","import store from '../store'\r\nimport { actions as appActions, selectors as appSelectors } from '../components/App/App.state'\r\n\r\nexport default class AuthService {\r\n  isHostAuth (): boolean {\r\n    const { auth } = appSelectors(store.getState())\r\n    return (auth.type === 'host')\r\n  }\r\n\r\n  resetType (): void {\r\n    store.dispatch(appActions.replaceAuthType(null))\r\n  }\r\n}\r\n","import { some } from 'lodash'\r\nimport { MediaConnection } from 'peerjs'\r\nimport store from '../store'\r\nimport AuthService from './AuthService'\r\nimport {\r\n  actions as meetingActions,\r\n  selectors as meetingSelectors\r\n} from '../pages/Meeting/Meeting.state'\r\n\r\nexport default class MeetingService {\r\n  protected authService: AuthService\r\n\r\n  constructor () {\r\n    this.authService = new AuthService()\r\n  }\r\n\r\n  protected setMeetingId (meetingId: string): void {\r\n    if (this.authService.isHostAuth()) {\r\n      store.dispatch(meetingActions.replaceId(meetingId))\r\n    }\r\n  }\r\n\r\n  protected setConnectionId (connectionId: string): void {\r\n    store.dispatch(meetingActions.replaceConnectionId(connectionId))\r\n  }\r\n\r\n  isExistsUserVideo (connectionId: string) {\r\n    const { videos } = meetingSelectors(store.getState())\r\n    const existsUserVideo = some(videos, { id: connectionId })\r\n    return existsUserVideo\r\n  }\r\n\r\n  setId (connectionId: string, callback: (meetingId: string) => void): void {\r\n    this.setMeetingId(connectionId)\r\n    this.setConnectionId(connectionId)\r\n    const meetingId = this.getMeetingId()\r\n    callback(meetingId)\r\n  }\r\n\r\n  setMediaStream (mediaStream: MediaStream) {\r\n    store.dispatch(meetingActions.replaceMediaStream(mediaStream))\r\n  }\r\n\r\n  setScreenStream (screenStream: MediaStream) {\r\n    store.dispatch(meetingActions.replaceScreenStream(screenStream))\r\n  }\r\n\r\n  getMediaStream () {\r\n    return meetingSelectors(store.getState()).mediaStream\r\n  }\r\n\r\n  getScreenStream () {\r\n    return meetingSelectors(store.getState()).screenStream\r\n  }\r\n\r\n  getMeetingId (): string {\r\n    return meetingSelectors(store.getState()).id\r\n  }\r\n\r\n  getConnectionId (): string {\r\n    return meetingSelectors(store.getState()).connectionId\r\n  }\r\n\r\n  getCalls (): MediaConnection[] {\r\n    return meetingSelectors(store.getState()).calls\r\n  }\r\n\r\n  isHostMeeting (connectionId: string): boolean {\r\n    const { id: meetingId } = meetingSelectors(store.getState())\r\n    return (meetingId === connectionId)\r\n  }\r\n\r\n  isMemberMeeting (connectionId: string): boolean {\r\n    return !this.isHostMeeting(connectionId)\r\n  }\r\n\r\n  isUserMeeting (connectionId: string): boolean {\r\n    const { connectionId: id } = meetingSelectors(store.getState())\r\n    return (connectionId === id)\r\n  }\r\n\r\n  canMemberRemove (connectionId: string): boolean {\r\n    return this.authService.isHostAuth() && !this.isHostMeeting(connectionId)\r\n  }\r\n\r\n  canConferenceCall (connectionId: string) {\r\n    return !this.isHostMeeting(connectionId) && !this.isExistsUserVideo(connectionId)\r\n  }\r\n\r\n  resetMeeting (): void {\r\n    store.dispatch(meetingActions.reset())\r\n  }\r\n\r\n  pushCall (call: MediaConnection): void {\r\n    store.dispatch(meetingActions.pushCall(call))\r\n  }\r\n}\r\n","import { History } from 'history'\r\nimport { first } from 'lodash'\r\nimport routes from '../routes'\r\nimport AlertService from './AlertService'\r\nimport MeetingService from './MeetingService'\r\n\r\nexport default class MediaService {\r\n  private meetingService: MeetingService\r\n\r\n  constructor () {\r\n    this.meetingService = new MeetingService()\r\n  }\r\n\r\n  async getStream (history: History, callback: (localStream: MediaStream) => void): Promise<void> {\r\n    try {\r\n      const { getUserMedia } = navigator.mediaDevices\r\n      const constraints = { video: true, audio: true }\r\n      const localStream: MediaStream = await getUserMedia(constraints)\r\n      this.meetingService.setMediaStream(localStream)\r\n      callback(localStream)\r\n    } catch (error) {\r\n      AlertService.push('Device doesn\\'t support WebRTC')\r\n      history.push(routes.home.path)\r\n    }\r\n  }\r\n\r\n  async getAudioStream (callback: (audioStream: MediaStream) => void): Promise<void> {\r\n    try {\r\n      const constraints = { audio: true, video: false }\r\n      const audioStream: MediaStream = await navigator.mediaDevices\r\n        .getUserMedia(constraints)\r\n      callback(audioStream)\r\n    } catch (error) {\r\n      AlertService.push('Device doesn\\'t support audio capture')\r\n    }\r\n  }\r\n\r\n  toggleVideoMute (stream: MediaStream) {\r\n    const track = first(stream.getVideoTracks())\r\n    if (track) track.enabled = !track.enabled\r\n    return track ? track.enabled : false\r\n  }\r\n\r\n  toggleAudioMute (stream: MediaStream) {\r\n    const track = first(stream.getAudioTracks())\r\n    if (track) track.enabled = !track.enabled\r\n    return track ? track.enabled : false\r\n  }\r\n}\r\n","import { find } from 'lodash'\r\nimport store from '../store'\r\nimport { actions, selectors, VideoState } from '../pages/Meeting/Meeting.state'\r\n\r\nexport default class MeetingRepository {\r\n  getVideo (connectionId: string): VideoState | undefined {\r\n    const { videos } = selectors(store.getState())\r\n    return find(videos, video => video.id === connectionId)\r\n  }\r\n\r\n  getUserVideo (): VideoState | undefined {\r\n    const { connectionId } = selectors(store.getState())\r\n    return this.getVideo(connectionId)\r\n  }\r\n\r\n  setHostVideoActive (): void {\r\n    const { id: meetingId } = selectors(store.getState())\r\n    store.dispatch(actions.replaceVideoActive(meetingId, true))\r\n  }\r\n}\r\n","import { first, forEach } from 'lodash'\r\nimport MeetingRepository from '../repositories/MeetingRepository'\r\n\r\nexport default class StreamTrackService {\r\n  private meetingRepository: MeetingRepository\r\n\r\n  constructor () {\r\n    this.meetingRepository = new MeetingRepository()\r\n  }\r\n\r\n  stop (stream: MediaStream) {\r\n    const tracks = stream.getTracks()\r\n    forEach(tracks, track => track.stop())\r\n  }\r\n\r\n  get isVideoEnabled () {\r\n    const video = this.meetingRepository.getUserVideo()\r\n    const track = video && first(video.stream.getVideoTracks())\r\n    return Boolean(track && track.enabled)\r\n  }\r\n\r\n  get isAudioEnabled () {\r\n    const video = this.meetingRepository.getUserVideo()\r\n    const track = video && first(video.stream.getAudioTracks())\r\n    return Boolean(track && track.enabled)\r\n  }\r\n}\r\n","import { some } from 'lodash'\r\nimport { nanoid } from 'nanoid'\r\nimport store from '../store'\r\nimport MeetingService from './MeetingService'\r\nimport StreamTrackService from './StreamTrackService'\r\nimport MeetingRepository from '../repositories/MeetingRepository'\r\nimport {\r\n  actions as meetingActions,\r\n  selectors as meetingSelectors,\r\n  VideoState,\r\n  VideoStateKind\r\n} from '../pages/Meeting/Meeting.state'\r\n\r\ntype createVideoCallback = (video: VideoState) => void\r\n\r\nexport default class VideoService {\r\n  protected meetingService: MeetingService\r\n\r\n  private streamTrackService: StreamTrackService\r\n\r\n  private meetingRepository: MeetingRepository\r\n\r\n  constructor () {\r\n    this.meetingService = new MeetingService()\r\n    this.streamTrackService = new StreamTrackService()\r\n    this.meetingRepository = new MeetingRepository()\r\n  }\r\n\r\n  hasVideo (connectionId: string): boolean {\r\n    const { videos } = meetingSelectors(store.getState())\r\n    return some(videos, { id: connectionId })\r\n  }\r\n\r\n  private createVideo (\r\n    connectionId: string,\r\n    stream: MediaStream,\r\n    kind: VideoStateKind,\r\n    callback: createVideoCallback): void {\r\n    const muted = this.meetingService.isUserMeeting(connectionId)\r\n    const video = {\r\n      id: connectionId,\r\n      stream,\r\n      kind,\r\n      raiseHand: false,\r\n      memberRemove: this.meetingService.canMemberRemove(connectionId),\r\n      active: this.meetingService.isHostMeeting(connectionId),\r\n      muted,\r\n      streamMuted: {\r\n        video: false,\r\n        audio: false\r\n      },\r\n      renderId: nanoid()\r\n    }\r\n    callback(video)\r\n  }\r\n\r\n  createMediaVideo (\r\n    connectionId: string,\r\n    stream: MediaStream,\r\n    callback: createVideoCallback): void {\r\n    this.createVideo(connectionId, stream, 'media', callback)\r\n  }\r\n\r\n  pushVideo (video: VideoState): void {\r\n    store.dispatch(meetingActions.pushVideo(video))\r\n    setTimeout(() => {\r\n      store.dispatch(meetingActions.updateVideoRenderId(video.id))\r\n    }, 300)\r\n  }\r\n\r\n  pullVideo (connectionId: string): void {\r\n    store.dispatch(meetingActions.pullVideo(connectionId))\r\n  }\r\n\r\n  stopUserVideo () {\r\n    const userVideo = this.meetingRepository.getUserVideo()\r\n    if (userVideo) this.streamTrackService.stop(userVideo.stream)\r\n  }\r\n\r\n  replaceUserStream (stream: MediaStream, kind: VideoStateKind) {\r\n    const { connectionId } = meetingSelectors(store.getState())\r\n    store.dispatch(meetingActions.replaceVideoKind(connectionId, kind))\r\n    store.dispatch(meetingActions.replaceVideoStream(connectionId, stream))\r\n  }\r\n}\r\n","import { Howl } from 'howler'\r\nimport AuthService from './AuthService'\r\nimport MeetingService from './MeetingService'\r\n\r\nexport default class NotificationService {\r\n  protected authService: AuthService\r\n\r\n  protected meetingService: MeetingService\r\n\r\n  constructor () {\r\n    this.authService = new AuthService()\r\n    this.meetingService = new MeetingService()\r\n  }\r\n\r\n  private canNotifyHost (connectionId: string) {\r\n    const isHostAuth = this.authService.isHostAuth()\r\n    const isExistsUserVideo = this.meetingService.isExistsUserVideo(connectionId)\r\n    return isHostAuth && !isExistsUserVideo\r\n  }\r\n\r\n  private canNotifyMember (connectionId: string) {\r\n    return !this.meetingService.isExistsUserVideo(connectionId)\r\n  }\r\n\r\n  private playNotification () {\r\n    const notification = new Howl({ src: ['/assets/notification.mp3'] })\r\n    notification.play()\r\n  }\r\n\r\n  notifyHost (connectionId: string) {\r\n    if (this.canNotifyHost(connectionId)) this.playNotification()\r\n  }\r\n\r\n  notifyMember (connectionId: string) {\r\n    if (this.canNotifyMember(connectionId)) this.playNotification()\r\n  }\r\n}\r\n","import { fabric } from 'fabric'\r\n\r\nexport type WhiteboardCanvasZoom = 'in' | 'out'\r\n\r\nexport default class WhiteboardCanvasService {\r\n  private static instance: WhiteboardCanvasService\r\n\r\n  private static canvas: fabric.Canvas\r\n\r\n  constructor () {\r\n    if (!WhiteboardCanvasService.instance) {\r\n      WhiteboardCanvasService.instance = this\r\n    }\r\n    return WhiteboardCanvasService.instance\r\n  }\r\n\r\n  initialize () {\r\n    WhiteboardCanvasService.canvas = new fabric.Canvas('whiteboardCanvas', {\r\n      isDrawingMode: true\r\n    })\r\n  }\r\n\r\n  getCanvas () {\r\n    return WhiteboardCanvasService.canvas\r\n  }\r\n\r\n  setDimensions (width: number, height: number) {\r\n    WhiteboardCanvasService.canvas.setDimensions({ width, height })\r\n  }\r\n\r\n  zoom (type: WhiteboardCanvasZoom) {\r\n    const existingZoom = WhiteboardCanvasService.canvas.getZoom()\r\n    if (type === 'in') {\r\n      WhiteboardCanvasService.canvas.setZoom(existingZoom * 1.1)\r\n    } else if (type === 'out') {\r\n      WhiteboardCanvasService.canvas.setZoom(existingZoom * 0.9)\r\n    }\r\n  }\r\n\r\n  clear () {\r\n    WhiteboardCanvasService.canvas.clear()\r\n  }\r\n}\r\n","import { fabric } from 'fabric'\r\nimport { findIndex, forEach } from 'lodash'\r\nimport { MeetingWhiteboardDrawingsState, MeetingWhiteboardDrawingState } from '../../pages/Meeting/Meeting.state'\r\nimport WhiteboardCanvasService from './WhiteboardCanvasService'\r\n\r\ntype DrawingParseCallback = (drawings: MeetingWhiteboardDrawingsState) => void\r\ntype DrawingHandleAddCallback = (event: fabric.IEvent) => void\r\n\r\nexport default class WhiteboardDrawingService {\r\n  protected whiteboardCanvasService: WhiteboardCanvasService\r\n\r\n  constructor () {\r\n    this.whiteboardCanvasService = new WhiteboardCanvasService()\r\n  }\r\n\r\n  get canvas () {\r\n    return this.whiteboardCanvasService.getCanvas()\r\n  }\r\n\r\n  parse (drawing: MeetingWhiteboardDrawingState, callback: DrawingParseCallback) {\r\n    const namespace = ''\r\n    fabric.util.enlivenObjects([drawing], callback, namespace)\r\n  }\r\n\r\n  isExists (drawing: MeetingWhiteboardDrawingState) {\r\n    const drawings = JSON.parse(JSON.stringify(this.getDrawings()))\r\n    const isExists = findIndex(drawings, drawing) >= 0\r\n    return isExists\r\n  }\r\n\r\n  add (drawings: MeetingWhiteboardDrawingsState) {\r\n    forEach(drawings, drawing => this.canvas.add(drawing))\r\n  }\r\n\r\n  getDrawings (): MeetingWhiteboardDrawingsState {\r\n    return this.canvas.getObjects()\r\n  }\r\n\r\n  handleAdd (callback: DrawingHandleAddCallback) {\r\n    this.canvas.on('object:added', callback)\r\n  }\r\n}\r\n","import { forEach } from 'lodash'\r\nimport AlertService from './AlertService'\r\nimport MeetingService from './MeetingService'\r\nimport MediaService from './MediaService'\r\n\r\nexport default class ScreenCaptureService {\r\n  private contraints = {\r\n    video: true,\r\n    audio: true\r\n  }\r\n\r\n  private meetingService: MeetingService\r\n\r\n  private mediaService: MediaService\r\n\r\n  constructor () {\r\n    this.meetingService = new MeetingService()\r\n    this.mediaService = new MediaService()\r\n  }\r\n\r\n  private handleDisplayMediaError (error: any) {\r\n    const messages: any = {\r\n      'Permission denied by system': 'Permission denied by system',\r\n      'Permission denied': null,\r\n      '*': 'Device does not support screen capture'\r\n    }\r\n    const message = messages[error.message]\r\n    const wildcardMessage = (message === undefined) ? messages['*'] : message\r\n    const suppressMessage = (wildcardMessage !== null) && wildcardMessage\r\n    if (suppressMessage) AlertService.push(suppressMessage)\r\n  }\r\n\r\n  private async attachAudioTracks (screenStream: MediaStream) {\r\n    await this.mediaService.getAudioStream(audioStream => {\r\n      const audioTracks = audioStream.getAudioTracks()\r\n      forEach(audioTracks, track => screenStream.addTrack(track))\r\n    })\r\n  }\r\n\r\n  async getStream (callback: (screenStream: MediaStream) => void): Promise<void> {\r\n    try {\r\n      const screenStream: MediaStream = await navigator.mediaDevices\r\n        .getDisplayMedia(this.contraints)\r\n      await this.attachAudioTracks(screenStream)\r\n      this.meetingService.setScreenStream(screenStream)\r\n      callback(screenStream)\r\n    } catch (error) {\r\n      this.handleDisplayMediaError(error)\r\n    }\r\n  }\r\n}\r\n","import { Client } from 'faye'\r\n\r\nexport default class SocketService {\r\n  protected static client: Client\r\n\r\n  static connect (): void {\r\n    const endpoint = `https://${process.env.REACT_APP_API_HOST}/socket`\r\n    SocketService.client = new Client(endpoint)\r\n  }\r\n\r\n  static subscribe (channel: string, callback: (payload: any) => void): void {\r\n    SocketService.client.subscribe(channel, payload => callback(payload))\r\n  }\r\n\r\n  static unsubscribe (channel: string): void {\r\n    SocketService.client.unsubscribe(channel)\r\n  }\r\n\r\n  static publish (channel: string, payload: any): void {\r\n    SocketService.client.publish(channel, payload)\r\n  }\r\n}\r\n","import SocketService from '../../services/SocketService'\r\nimport { MeetingWhiteboardDrawingsState, MeetingWhiteboardDrawingState, VideoStateKind } from './Meeting.state'\r\n\r\ninterface RTPTrackReplacedPayload {\r\n  connectionId: string\r\n  kind: VideoStateKind\r\n}\r\n\r\nexport interface WhiteboardSync {\r\n  drawings: MeetingWhiteboardDrawingsState\r\n  whiteboardEnabled: boolean\r\n}\r\n\r\nexport default {\r\n  raiseHand: {\r\n    channel (meetingId: string) {\r\n      return `/raiseHand/${meetingId}`\r\n    },\r\n    subscribe (meetingId: string, callback: (connectionId: string) => void) {\r\n      SocketService.subscribe(\r\n        this.channel(meetingId),\r\n        (connectionId: string) => callback(connectionId)\r\n      )\r\n    },\r\n    unsubscribe (meetingId: string) {\r\n      SocketService.unsubscribe(this.channel(meetingId))\r\n    },\r\n    publish (meetingId: string, connectionId: string) {\r\n      SocketService.publish(this.channel(meetingId), connectionId)\r\n    }\r\n  },\r\n\r\n  conferenceCall: {\r\n    channel (meetingId: string) {\r\n      return `/conferenceCall/${meetingId}`\r\n    },\r\n    subscribe (meetingId: string, callback: (connectionId: string) => void) {\r\n      SocketService.subscribe(\r\n        this.channel(meetingId),\r\n        (connectionId: string) => callback(connectionId))\r\n    },\r\n    unsubscribe (meetingId: string) {\r\n      SocketService.unsubscribe(this.channel(meetingId))\r\n    },\r\n    publish (meetingId: string, connectionId: string) {\r\n      SocketService.publish(this.channel(meetingId), connectionId)\r\n    }\r\n  },\r\n\r\n  remoteDisconnect: {\r\n    channel (meetingId: string) {\r\n      return `/remoteDisconnect/${meetingId}`\r\n    },\r\n    subscribe (meetingId: string, callback: (connectionId: string) => void) {\r\n      SocketService.subscribe(\r\n        this.channel(meetingId),\r\n        (connectionId: string) => callback(connectionId)\r\n      )\r\n    },\r\n    unsubscribe (meetingId: string) {\r\n      SocketService.unsubscribe(this.channel(meetingId))\r\n    },\r\n    publish (meetingId: string, connectionId: string) {\r\n      SocketService.publish(this.channel(meetingId), connectionId)\r\n    }\r\n  },\r\n\r\n  memberRemove: {\r\n    channel (meetingId: string) {\r\n      return `/memberRemove/${meetingId}`\r\n    },\r\n    subscribe (meetingId: string, callback: (connectionId: string) => void) {\r\n      SocketService.subscribe(\r\n        this.channel(meetingId),\r\n        (connectionId: string) => callback(connectionId))\r\n    },\r\n    unsubscribe (meetingId: string) {\r\n      SocketService.unsubscribe(this.channel(meetingId))\r\n    },\r\n    publish (meetingId: string, connectionId: string) {\r\n      SocketService.publish(this.channel(meetingId), connectionId)\r\n    }\r\n  },\r\n\r\n  rtpTrackReplaced: {\r\n    channel (meetingId: string) {\r\n      return `/rtpTrackReplaced/${meetingId}`\r\n    },\r\n    subscribe (meetingId: string, callback: (payload: RTPTrackReplacedPayload) => void) {\r\n      SocketService.subscribe(\r\n        this.channel(meetingId),\r\n        (payload: RTPTrackReplacedPayload) => callback(payload)\r\n      )\r\n    },\r\n    unsubscribe (meetingId: string) {\r\n      SocketService.unsubscribe(this.channel(meetingId))\r\n    },\r\n    publish (meetingId: string, payload: RTPTrackReplacedPayload) {\r\n      SocketService.publish(this.channel(meetingId), payload)\r\n    }\r\n  },\r\n\r\n  whiteboardEnabled: {\r\n    channel (meetingId: string) {\r\n      return `/whiteboardEnabled/${meetingId}`\r\n    },\r\n    subscribe (meetingId: string, callback: (whiteboardEnabled: boolean) => void) {\r\n      SocketService.subscribe(\r\n        this.channel(meetingId),\r\n        (whiteboardEnabled: boolean) => callback(whiteboardEnabled)\r\n      )\r\n    },\r\n    unsubscribe (meetingId: string) {\r\n      SocketService.unsubscribe(this.channel(meetingId))\r\n    },\r\n    publish (meetingId: string, whiteboardEnabled: boolean) {\r\n      SocketService.publish(this.channel(meetingId), whiteboardEnabled)\r\n    }\r\n  },\r\n\r\n  whiteboardDrawingSync: {\r\n    channel (connectionId: string) {\r\n      return `/whiteboardDrawingSync/${connectionId}`\r\n    },\r\n    subscribe (connectionId: string, callback: (whiteboardSync: WhiteboardSync) => void) {\r\n      SocketService.subscribe(\r\n        this.channel(connectionId),\r\n        (whiteboardSync: WhiteboardSync) => callback(whiteboardSync)\r\n      )\r\n    },\r\n    unsubscribe (connectionId: string) {\r\n      SocketService.unsubscribe(this.channel(connectionId))\r\n    },\r\n    publish (connectionId: string, whiteboardSync: WhiteboardSync) {\r\n      SocketService.publish(this.channel(connectionId), whiteboardSync)\r\n    }\r\n  },\r\n\r\n  whiteboardDrawingAdd: {\r\n    channel (meetingId: string) {\r\n      return `/whiteboardDrawingAdd/${meetingId}`\r\n    },\r\n    subscribe (meetingId: string, callback: (drawing: MeetingWhiteboardDrawingState) => void) {\r\n      SocketService.subscribe(\r\n        this.channel(meetingId),\r\n        (drawing: MeetingWhiteboardDrawingState) => callback(drawing)\r\n      )\r\n    },\r\n    unsubscribe (meetingId: string) {\r\n      SocketService.unsubscribe(this.channel(meetingId))\r\n    },\r\n    publish (meetingId: string, drawing: MeetingWhiteboardDrawingState) {\r\n      SocketService.publish(this.channel(meetingId), drawing)\r\n    }\r\n  },\r\n\r\n  whiteboardCanvasClear: {\r\n    channel (meetingId: string) {\r\n      return `/whiteboardCanvasClear/${meetingId}`\r\n    },\r\n    subscribe (meetingId: string, callback: () => void) {\r\n      SocketService.subscribe(\r\n        this.channel(meetingId),\r\n        callback\r\n      )\r\n    },\r\n    unsubscribe (meetingId: string) {\r\n      SocketService.unsubscribe(this.channel(meetingId))\r\n    },\r\n    publish (meetingId: string) {\r\n      SocketService.publish(this.channel(meetingId), null)\r\n    }\r\n  }\r\n}\r\n","import { find, forEach } from 'lodash'\r\nimport MeetingSocket from '../pages/Meeting/Meeting.socket'\r\nimport MeetingService from './MeetingService'\r\nimport MeetingRepository from '../repositories/MeetingRepository'\r\n\r\nexport default class RTPSenderService {\r\n  private meetingService : MeetingService\r\n\r\n  private meetingRepository: MeetingRepository\r\n\r\n  constructor () {\r\n    this.meetingService = new MeetingService()\r\n    this.meetingRepository = new MeetingRepository()\r\n  }\r\n\r\n  private publishRTCTrackReplacedSocket () {\r\n    const meetingId = this.meetingService.getMeetingId()\r\n    const connectionId = this.meetingService.getConnectionId()\r\n    const video = this.meetingRepository.getVideo(connectionId)\r\n    if (video) {\r\n      const payload = { connectionId, kind: video.kind }\r\n      MeetingSocket.rtpTrackReplaced.publish(meetingId, payload)\r\n    }\r\n  }\r\n\r\n  replaceStream (stream: MediaStream) {\r\n    const calls = this.meetingService.getCalls()\r\n    forEach(calls, call => {\r\n      const senders = call.peerConnection.getSenders()\r\n      const tracks = stream.getTracks()\r\n      const audioSender = find(senders, ({ track }) => (track?.kind === 'audio'))\r\n      const videoSender = find(senders, ({ track }) => (track?.kind === 'video'))\r\n      const audioTrack = find(tracks, ({ kind }) => (kind === 'audio'))\r\n      const videoTrack = find(tracks, ({ kind }) => (kind === 'video'))\r\n      if (audioSender && audioTrack) audioSender.replaceTrack(audioTrack)\r\n      if (videoSender && videoTrack) videoSender.replaceTrack(videoTrack)\r\n    })\r\n    this.publishRTCTrackReplacedSocket()\r\n  }\r\n}\r\n","import { History } from 'history'\r\nimport routes from '../routes'\r\nimport RequestService from '../services/RequestService'\r\nimport AuthService from '../services/AuthService'\r\n\r\nexport default class HostMiddleware {\r\n  protected requestService: RequestService\r\n\r\n  protected authService: AuthService\r\n\r\n  constructor () {\r\n    this.requestService = new RequestService()\r\n    this.authService = new AuthService()\r\n  }\r\n\r\n  auth (history: History) {\r\n    const isHostAuth = this.authService.isHostAuth()\r\n    if (isHostAuth) {\r\n      this.requestService.get('/host/auth', response => {\r\n        if (!response) history.push(routes.start.path)\r\n      })\r\n    }\r\n  }\r\n}\r\n","import { IonIcon } from '@ionic/react'\r\nimport React, { Component } from 'react'\r\nimport { chevronDown, chevronUp } from 'ionicons/icons'\r\nimport { MenuPosition } from '../Menu/Menu'\r\nimport styles from './MenuToggle.module.scss'\r\n\r\nexport type MenuToggleHandleChange = (position: MenuPosition) => void\r\n\r\ninterface MenuToggleProps {\r\n  isExpanded: boolean\r\n  position: MenuPosition\r\n  handleChange: MenuToggleHandleChange\r\n}\r\n\r\nexport default class MenuToggle extends Component<MenuToggleProps> {\r\n  constructor (props: MenuToggleProps) {\r\n    super(props)\r\n    this.handleClick = this.handleClick.bind(this)\r\n  }\r\n\r\n  get className () {\r\n    const positionClass = styles[this.props.position]\r\n    return `${styles.menuToggle} ${positionClass}`\r\n  }\r\n\r\n  isPosition (position: MenuPosition) {\r\n    return (this.props.position === position)\r\n  }\r\n\r\n  get icon () {\r\n    return this.isPosition('top')\r\n      ? this.props.isExpanded ? chevronUp : chevronDown\r\n      : this.isPosition('bottom')\r\n        ? this.props.isExpanded ? chevronDown : chevronUp\r\n        : undefined\r\n  }\r\n\r\n  handleClick () {\r\n    this.props.handleChange(this.props.position)\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className={this.className}>\r\n        <div\r\n          className={styles.notch}\r\n          onClick={this.handleClick}>\r\n          <IonIcon\r\n            className={styles.icon}\r\n            icon={this.icon} />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import { IonIcon } from '@ionic/react'\r\nimport React, { MouseEvent, Component } from 'react'\r\nimport {\r\n  personAddOutline,\r\n  handRightOutline,\r\n  closeCircleOutline,\r\n  videocamOutline,\r\n  micOutline,\r\n  laptopOutline,\r\n  easelOutline,\r\n  personRemoveOutline\r\n} from 'ionicons/icons'\r\nimport styles from './MenuItem.module.scss'\r\n\r\ntype Icons = Record<MenuItemName, string>\r\n\r\ntype MenuItemName = 'invite' |\r\n  'raiseHand' |\r\n  'end' |\r\n  'video' |\r\n  'audio' |\r\n  'screenShare' |\r\n  'whiteboard' |\r\n  'memberRemove'\r\n\r\nexport interface MenuItemProps {\r\n  name: MenuItemName\r\n  active: boolean\r\n  visibility: boolean\r\n  handleClick: (event: MouseEvent) => void\r\n}\r\n\r\nexport default class MenuItem extends Component<MenuItemProps> {\r\n  icons: Icons = {\r\n    invite: personAddOutline,\r\n    raiseHand: handRightOutline,\r\n    end: closeCircleOutline,\r\n    video: videocamOutline,\r\n    audio: micOutline,\r\n    screenShare: laptopOutline,\r\n    whiteboard: easelOutline,\r\n    memberRemove: personRemoveOutline\r\n  }\r\n\r\n  get iconClass () {\r\n    const activeClass = this.props.active && styles.active\r\n    return `${styles.icon} ${activeClass}`\r\n  }\r\n\r\n  get icon () {\r\n    return this.icons[this.props.name]\r\n  }\r\n\r\n  render () {\r\n    return this.props.visibility &&\r\n      <div\r\n        className={styles.menuItem}\r\n        onClick={this.props.handleClick}>\r\n        <IonIcon\r\n          className={this.iconClass}\r\n          icon={this.icon} />\r\n      </div>\r\n  }\r\n}\r\n","import { isPlatform } from '@ionic/react'\r\nimport React, { Component } from 'react'\r\nimport { MenuPosition } from '../Menu/Menu'\r\nimport MenuItem, { MenuItemProps } from '../MenuItem/MenuItem'\r\nimport styles from './MenuItems.module.scss'\r\n\r\ninterface MenuItemsProps {\r\n  position: MenuPosition\r\n  canInviteMember: boolean\r\n  canRaiseHand: boolean\r\n  canEndMeeting: boolean\r\n  canVideoMute: boolean\r\n  canAudioMute: boolean\r\n  canScreenShare: boolean\r\n  canWhiteboardEnable: boolean\r\n  canMemberRemove: boolean\r\n  screenShareVisibility: boolean\r\n  handleInviteMemberClick: () => void\r\n  handleRaiseHandClick: () => void\r\n  handleEndMeetingClick: () => void\r\n  handleVideoClick: () => void\r\n  handleAudioClick: () => void\r\n  handleScreenShareClick: () => void\r\n  handleWhiteboardClick: () => void\r\n  handleMemberRemoveClick: () => void\r\n}\r\n\r\ntype Items = Record<MenuPosition, MenuItemProps[]>\r\n\r\nexport default class MenuItems extends Component<MenuItemsProps> {\r\n  get items (): Items {\r\n    return {\r\n      top: [\r\n        {\r\n          name: 'screenShare',\r\n          active: this.props.canScreenShare,\r\n          visibility: this.props.screenShareVisibility,\r\n          handleClick: this.props.handleScreenShareClick\r\n        },\r\n        {\r\n          name: 'whiteboard',\r\n          active: this.props.canWhiteboardEnable,\r\n          visibility: true,\r\n          handleClick: this.props.handleWhiteboardClick\r\n        },\r\n        {\r\n          name: 'memberRemove',\r\n          active: true,\r\n          visibility: this.props.canMemberRemove,\r\n          handleClick: this.props.handleMemberRemoveClick\r\n        }\r\n      ],\r\n      bottom: [\r\n        {\r\n          name: 'invite',\r\n          active: this.props.canInviteMember,\r\n          visibility: true,\r\n          handleClick: this.props.handleInviteMemberClick\r\n        },\r\n        {\r\n          name: 'raiseHand',\r\n          active: this.props.canRaiseHand,\r\n          visibility: true,\r\n          handleClick: this.props.handleRaiseHandClick\r\n        },\r\n        {\r\n          name: 'end',\r\n          active: this.props.canEndMeeting,\r\n          visibility: true,\r\n          handleClick: this.props.handleEndMeetingClick\r\n        },\r\n        {\r\n          name: 'video',\r\n          active: this.props.canVideoMute,\r\n          visibility: true,\r\n          handleClick: this.props.handleVideoClick\r\n        },\r\n        {\r\n          name: 'audio',\r\n          active: this.props.canAudioMute,\r\n          visibility: true,\r\n          handleClick: this.props.handleAudioClick\r\n        }\r\n      ]\r\n    }\r\n  }\r\n\r\n  get className () {\r\n    const positionClass = styles[this.props.position]\r\n    const mobileClass = isPlatform('mobile') && styles.mobile\r\n    return `${styles.menuItems} ${positionClass} ${mobileClass}`\r\n  }\r\n\r\n  get menuItems () {\r\n    const items = this.items[this.props.position]\r\n    return items.map(item =>\r\n      <div\r\n        className={styles.item}\r\n        key={item.name}>\r\n        <MenuItem\r\n          name={item.name}\r\n          active={item.active}\r\n          visibility={item.visibility}\r\n          handleClick={item.handleClick} />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className={this.className}>\r\n        {this.menuItems}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import { isPlatform } from '@ionic/react'\r\nimport { SocialSharing } from '@ionic-native/social-sharing'\r\nimport React, { Component } from 'react'\r\nimport copyToClipboard from 'copy-to-clipboard'\r\nimport AlertService from '../../services/AlertService'\r\nimport MenuToggle, { MenuToggleHandleChange } from '../MenuToggle/MenuToggle'\r\nimport MenuItems from '../MenuItems/MenuItems'\r\nimport styles from './Menu.module.scss'\r\n\r\nexport type MenuPosition = 'top' | 'bottom'\r\n\r\ninterface MenuProps {\r\n  position: MenuPosition\r\n  canInviteMember: boolean\r\n  canRaiseHand: boolean\r\n  canEndMeeting: boolean\r\n  canVideoMute: boolean\r\n  canAudioMute: boolean\r\n  canScreenShare: boolean\r\n  canWhiteboardEnable: boolean\r\n  canMemberRemove: boolean\r\n  inviteText: string\r\n  isExpanded: boolean\r\n  handleRaiseHandClick: () => void\r\n  handleEndMeetingClick: () => void\r\n  handleVideoClick: () => void\r\n  handleAudioClick: () => void\r\n  handleScreenShareClick: () => void\r\n  handleWhiteboardClick: () => void\r\n  handleMemberRemoveClick: () => void\r\n  handleToggleChange: MenuToggleHandleChange\r\n}\r\n\r\ninterface MenuLocalState {\r\n  visibility: boolean\r\n}\r\n\r\nexport default class Menu extends Component<MenuProps, MenuLocalState> {\r\n  constructor (props: MenuProps) {\r\n    super(props)\r\n    this.state = {\r\n      visibility: true\r\n    }\r\n    this.handleInviteMemberClick = this.handleInviteMemberClick.bind(this)\r\n    this.handleToggleChange = this.handleToggleChange.bind(this)\r\n  }\r\n\r\n  get className () {\r\n    const positionClass = styles[this.props.position]\r\n    return `${styles.menu} ${positionClass}`\r\n  }\r\n\r\n  isPosition (position: MenuPosition) {\r\n    return (this.props.position === position)\r\n  }\r\n\r\n  handleToggleChange (position: MenuPosition) {\r\n    this.props.handleToggleChange(position)\r\n    const visibility = !this.props.isExpanded\r\n    this.setState({ visibility })\r\n  }\r\n\r\n  handleInviteMemberClick () {\r\n    if (!this.props.canInviteMember) return\r\n    const { inviteText } = this.props\r\n    if (isPlatform('hybrid')) SocialSharing.share(inviteText)\r\n    else {\r\n      copyToClipboard(inviteText)\r\n      AlertService.push('Invitation copied.')\r\n    }\r\n  }\r\n\r\n  menuToggle (postion: MenuPosition) {\r\n    return this.isPosition(postion) &&\r\n      <MenuToggle\r\n        isExpanded={this.props.isExpanded}\r\n        position={this.props.position}\r\n        handleChange={this.handleToggleChange} />\r\n  }\r\n\r\n  get screenShareVisibility () {\r\n    return !isPlatform('mobile')\r\n  }\r\n\r\n  get menuItems () {\r\n    return this.state.visibility &&\r\n      <MenuItems\r\n        position={this.props.position}\r\n        canInviteMember={this.props.canInviteMember}\r\n        canRaiseHand={this.props.canRaiseHand}\r\n        canEndMeeting={this.props.canEndMeeting}\r\n        canVideoMute={this.props.canVideoMute}\r\n        canAudioMute={this.props.canAudioMute}\r\n        canScreenShare={this.props.canScreenShare}\r\n        canWhiteboardEnable={this.props.canWhiteboardEnable}\r\n        canMemberRemove={this.props.canMemberRemove}\r\n        screenShareVisibility={this.screenShareVisibility}\r\n        handleInviteMemberClick={this.handleInviteMemberClick}\r\n        handleRaiseHandClick={this.props.handleRaiseHandClick}\r\n        handleEndMeetingClick={this.props.handleEndMeetingClick}\r\n        handleVideoClick={this.props.handleVideoClick}\r\n        handleAudioClick={this.props.handleAudioClick}\r\n        handleScreenShareClick={this.props.handleScreenShareClick}\r\n        handleWhiteboardClick={this.props.handleWhiteboardClick}\r\n        handleMemberRemoveClick={this.props.handleMemberRemoveClick} />\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className={this.className}>\r\n        {this.menuToggle('bottom')}\r\n        {this.menuItems}\r\n        {this.menuToggle('top')}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { VideoState } from '../../pages/Meeting/Meeting.state'\r\nimport styles from './Video.module.scss'\r\n\r\ninterface VideoProps {\r\n  video: VideoState\r\n}\r\n\r\ninterface VideoLocalState {\r\n  renderId: string\r\n}\r\n\r\nexport default class Video extends Component<VideoProps, VideoLocalState> {\r\n  constructor (props: VideoProps) {\r\n    super(props)\r\n    this.state = {\r\n      renderId: this.props.video.renderId\r\n    }\r\n    this.setSource = this.setSource.bind(this)\r\n  }\r\n\r\n  get className () {\r\n    const isScreen = (this.props.video.kind === 'screen')\r\n    const filpClass = !isScreen && styles.horizontalFlip\r\n    return `${styles.video} ${filpClass}`\r\n  }\r\n\r\n  setSource (element: HTMLVideoElement | null) {\r\n    const { video } = this.props\r\n    if (element && video) {\r\n      element.srcObject = video.stream\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate (props: VideoProps, state: VideoState) {\r\n    const { renderId } = props.video\r\n    const hasChangedRenderId = (renderId !== state.renderId)\r\n    if (hasChangedRenderId) this.setState({ renderId })\r\n    return hasChangedRenderId\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <video\r\n        className={this.className}\r\n        autoPlay={true}\r\n        muted={this.props.video.muted}\r\n        playsInline={true}\r\n        ref={element => this.setSource(element)} // Fix blank video\r\n      />\r\n    )\r\n  }\r\n}\r\n","import { IonFabButton, IonIcon } from '@ionic/react'\r\nimport React, { Component } from 'react'\r\nimport { handRightOutline, personRemoveOutline } from 'ionicons/icons'\r\nimport styles from './FloatButton.module.scss'\r\n\r\ntype FloatButtonName = 'removeHost' | 'raiseHand'\r\ntype Icons = Record<FloatButtonName, string>\r\ntype Colors = Record<FloatButtonName, string>\r\n\r\nexport interface FloatButtonProps {\r\n  name: FloatButtonName\r\n  handleClick?: () => void\r\n}\r\n\r\nexport default class FloatButton extends Component<FloatButtonProps> {\r\n  colors: Colors = {\r\n    removeHost: 'danger',\r\n    raiseHand: 'warning'\r\n  }\r\n\r\n  icons: Icons = {\r\n    removeHost: personRemoveOutline,\r\n    raiseHand: handRightOutline\r\n  }\r\n\r\n  get color () {\r\n    return this.colors[this.props.name]\r\n  }\r\n\r\n  get icon () {\r\n    return this.icons[this.props.name]\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className={styles.floatButton}>\r\n        <IonFabButton\r\n          className={styles.button}\r\n          color={this.color}\r\n          size=\"small\"\r\n          onClick={this.props.handleClick}>\r\n          <IonIcon\r\n            className={styles.icon}\r\n            icon={this.icon} />\r\n        </IonFabButton>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport FloatButton from '../FloatButton/FloatButton'\r\nimport styles from './RaiseHand.module.scss'\r\n\r\ninterface RaiseHandProps {\r\n  visibility: boolean\r\n}\r\n\r\nexport default class RaiseHand extends Component<RaiseHandProps> {\r\n  render () {\r\n    return this.props.visibility &&\r\n      <div className={styles.raiseHand}>\r\n        <FloatButton name=\"raiseHand\" />\r\n      </div>\r\n  }\r\n}\r\n","import { isPlatform } from '@ionic/react'\r\nimport React, { Component } from 'react'\r\nimport { VideoState } from '../../pages/Meeting/Meeting.state'\r\nimport Video from '../Video/Video'\r\nimport RaiseHand from '../RaiseHand/RaiseHand'\r\nimport styles from './VideoBlock.module.scss'\r\n\r\nexport type VideoBlockHandleClick = (video: VideoState) => void\r\n\r\nexport interface VideoBlockProps {\r\n  ratio: 'full' | 'square'\r\n  video: VideoState\r\n  handleClick: VideoBlockHandleClick\r\n}\r\n\r\nexport default class VideoBlock extends Component<VideoBlockProps> {\r\n  constructor (props: VideoBlockProps) {\r\n    super(props)\r\n    this.handleClick = this.handleClick.bind(this)\r\n  }\r\n\r\n  get className () {\r\n    const ratioClass = styles[this.props.ratio]\r\n    const mobileClass = isPlatform('mobile') && styles.mobile\r\n    return `${styles.videoBlock} ${ratioClass} ${mobileClass}`\r\n  }\r\n\r\n  handleClick () {\r\n    this.props.handleClick(this.props.video)\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div\r\n        className={this.className}\r\n        onClick={this.handleClick}>\r\n        <div className={styles.content}>\r\n          <Video video={this.props.video} />\r\n          <RaiseHand visibility={this.props.video.raiseHand} />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import WhiteboardCanvasService from './WhiteboardCanvasService'\r\n\r\nexport default class WhiteboardBrushService {\r\n  protected whiteboardCanvasService: WhiteboardCanvasService\r\n\r\n  constructor () {\r\n    this.whiteboardCanvasService = new WhiteboardCanvasService()\r\n  }\r\n\r\n  private get brush () {\r\n    return this.whiteboardCanvasService.getCanvas().freeDrawingBrush\r\n  }\r\n\r\n  setColor (color: string) {\r\n    this.brush.color = color\r\n  }\r\n\r\n  setSize (size: string) {\r\n    this.brush.width = parseInt(size, 10)\r\n  }\r\n}\r\n","import { isPlatform } from '@ionic/react'\r\nimport React, { Component } from 'react'\r\nimport WhiteboardCanvasService from '../../services/Whiteboard/WhiteboardCanvasService'\r\n\r\ninterface WhiteboardCanvasProps {\r\n  handleClick: () => void\r\n}\r\n\r\nexport default class WhiteboardCanvas extends Component<WhiteboardCanvasProps> {\r\n  whiteboardCanvasService: WhiteboardCanvasService\r\n\r\n  constructor (props: WhiteboardCanvasProps) {\r\n    super(props)\r\n    this.whiteboardCanvasService = new WhiteboardCanvasService()\r\n  }\r\n\r\n  setDimensions () {\r\n    const width = window.innerWidth\r\n    const mobileHeight = (width / (16 / 9))\r\n    const desktopHeight = window.innerHeight\r\n    const height = isPlatform('mobile') ? mobileHeight : desktopHeight\r\n    this.whiteboardCanvasService.setDimensions(width, height)\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.whiteboardCanvasService.initialize()\r\n    this.setDimensions()\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div\r\n        onMouseDown={this.props.handleClick}\r\n        onTouchStart={this.props.handleClick}>\r\n        <canvas id=\"whiteboardCanvas\" />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import { IonIcon, isPlatform } from '@ionic/react'\r\nimport React, { Component } from 'react'\r\nimport {\r\n  addOutline,\r\n  brushOutline,\r\n  colorPaletteOutline,\r\n  removeOutline,\r\n  trashOutline\r\n} from 'ionicons/icons'\r\nimport styles from './WhiteboardMenuItem.module.scss'\r\n\r\nexport type WhiteboardMenuItemName = 'color' | 'size' | 'zoomIn' | 'zoomOut' | 'clear'\r\n\r\ntype Icons = Record<WhiteboardMenuItemName, string>\r\n\r\ninterface WhiteboardMenuItemProps {\r\n  name: WhiteboardMenuItemName\r\n  handleClick: (name: WhiteboardMenuItemName) => void\r\n}\r\n\r\nexport default class WhiteboardMenuItem extends Component<WhiteboardMenuItemProps> {\r\n  icons: Icons = {\r\n    color: colorPaletteOutline,\r\n    size: brushOutline,\r\n    zoomIn: addOutline,\r\n    zoomOut: removeOutline,\r\n    clear: trashOutline\r\n  }\r\n\r\n  constructor (props: WhiteboardMenuItemProps) {\r\n    super(props)\r\n    this.handleClick = this.handleClick.bind(this)\r\n  }\r\n\r\n  get className () {\r\n    const mobileClass = isPlatform('mobile') && styles.mobile\r\n    return `${styles.whiteboardMenuItem} ${mobileClass}`\r\n  }\r\n\r\n  get icon () {\r\n    return this.icons[this.props.name]\r\n  }\r\n\r\n  handleClick () {\r\n    this.props.handleClick(this.props.name)\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonIcon\r\n        className={this.className}\r\n        icon={this.icon}\r\n        onClick={this.handleClick} />\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { WhiteboardBrushColorObject } from '../WhiteboardBrushColor/WhiteboardBrushColor'\r\nimport styles from './WhiteboardBrushColorItem.module.scss'\r\n\r\nexport type WhiteboardBrushColorItemChangeHandle = (color: WhiteboardBrushColorObject) => void\r\n\r\ninterface WhiteboardBrushColorItemProps {\r\n  active: boolean\r\n  color: WhiteboardBrushColorObject\r\n  handleClick: WhiteboardBrushColorItemChangeHandle\r\n}\r\n\r\nexport default class WhiteboardBrushColorItem extends Component<WhiteboardBrushColorItemProps> {\r\n  constructor (props: WhiteboardBrushColorItemProps) {\r\n    super(props)\r\n    this.handleClick = this.handleClick.bind(this)\r\n  }\r\n\r\n  get className () {\r\n    const activeClass = this.props.active && styles.active\r\n    return `${styles.whiteboardBrushColorItem} ${activeClass}`\r\n  }\r\n\r\n  get style () {\r\n    return { background: this.props.color.hex }\r\n  }\r\n\r\n  handleClick () {\r\n    this.props.handleClick(this.props.color)\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div\r\n        className={this.className}\r\n        style={this.style}\r\n        onClick={this.handleClick} />\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport WhiteboardBrushService from '../../services/Whiteboard/WhiteboardBrushService'\r\nimport WhiteboardBrushColorItem, { WhiteboardBrushColorItemChangeHandle } from '../WhiteboardBrushColorItem/WhiteboardBrushColorItem'\r\nimport styles from './WhiteboardBrushColor.module.scss'\r\n\r\nexport interface WhiteboardBrushColorObject {\r\n  name: string\r\n  hex: string\r\n}\r\n\r\ninterface WhiteboardBrushColorProps {\r\n  color: string\r\n  handleChange: WhiteboardBrushColorItemChangeHandle\r\n}\r\n\r\nexport default class WhiteboardBrushColor extends Component<WhiteboardBrushColorProps> {\r\n  static colors: WhiteboardBrushColorObject[] = [\r\n    { name: 'black', hex: '#000000' },\r\n    { name: 'brown', hex: '#795548' },\r\n    { name: 'red', hex: '#D0021B' },\r\n    { name: 'purple', hex: '#E040FB' },\r\n    { name: 'blue', hex: '#03A9F4' },\r\n    { name: 'green', hex: '#009688' },\r\n    { name: 'lime', hex: '#8BC34A' },\r\n    { name: 'yellow', hex: '#FFC107' },\r\n    { name: 'gray', hex: '#9E9E9E' }\r\n  ]\r\n\r\n  whiteboardBrushService: WhiteboardBrushService\r\n\r\n  constructor (props: WhiteboardBrushColorProps) {\r\n    super(props)\r\n    this.whiteboardBrushService = new WhiteboardBrushService()\r\n  }\r\n\r\n  isActiveColor (color: WhiteboardBrushColorObject) {\r\n    return (color.hex === this.props.color)\r\n  }\r\n\r\n  get colors () {\r\n    return WhiteboardBrushColor.colors.map(color =>\r\n      <WhiteboardBrushColorItem\r\n        color={color}\r\n        active={this.isActiveColor(color)}\r\n        handleClick={this.props.handleChange}\r\n        key={color.name} />\r\n    )\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className={styles.whiteboardBrushColor}>\r\n        {this.colors}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { ChangeEvent, Component } from 'react'\r\nimport WhiteboardBrushService from '../../services/Whiteboard/WhiteboardBrushService'\r\nimport styles from './WhiteboardBrushSize.module.scss'\r\n\r\nexport type WhiteboardBrushSizeChangeHandle = (event: ChangeEvent) => void\r\n\r\ninterface WhiteboardBrushSizeProps {\r\n  size: string\r\n  handleChange: WhiteboardBrushSizeChangeHandle\r\n}\r\n\r\nexport default class WhiteboardBrushSize extends Component<WhiteboardBrushSizeProps> {\r\n  whiteboardBrushService: WhiteboardBrushService\r\n\r\n  constructor (props: WhiteboardBrushSizeProps) {\r\n    super(props)\r\n    this.whiteboardBrushService = new WhiteboardBrushService()\r\n  }\r\n\r\n  get size () {\r\n    return `${this.props.size}x`\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className={styles.whiteboardBrushSize}>\r\n        <div className={styles.size}>{this.size}</div>\r\n        <input\r\n          className={styles.sizeInput}\r\n          type=\"range\"\r\n          min=\"1\"\r\n          max=\"10\"\r\n          value={this.props.size}\r\n          onChange={this.props.handleChange} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { WhiteboardActiveMenu } from '../Whiteboard/Whiteboard.state'\r\nimport WhiteboardBrushColor from '../WhiteboardBrushColor/WhiteboardBrushColor'\r\nimport { WhiteboardBrushColorItemChangeHandle } from '../WhiteboardBrushColorItem/WhiteboardBrushColorItem'\r\nimport WhiteboardBrushSize, { WhiteboardBrushSizeChangeHandle } from '../WhiteboardBrushSize/WhiteboardBrushSize'\r\nimport styles from './WhiteboardMenuContent.module.scss'\r\n\r\ninterface WhiteboardMenuContentProps {\r\n  active: WhiteboardActiveMenu\r\n  brushColor: string\r\n  brushSize: string\r\n  handleBrushColorChange: WhiteboardBrushColorItemChangeHandle\r\n  handleBrushSizeChange: WhiteboardBrushSizeChangeHandle\r\n}\r\n\r\nexport default class WhiteboardMenuContent extends Component<WhiteboardMenuContentProps> {\r\n  isActive (active: WhiteboardActiveMenu) {\r\n    return (this.props.active === active)\r\n  }\r\n\r\n  get className () {\r\n    const brushSizeWrapperClass = this.isActive('size') && styles.brushSizeWrapper\r\n    return `${styles.whiteboardMenuContent} ${brushSizeWrapperClass}`\r\n  }\r\n\r\n  get whiteboardBrushColor () {\r\n    return this.isActive('color') &&\r\n      <WhiteboardBrushColor\r\n        color={this.props.brushColor}\r\n        handleChange={this.props.handleBrushColorChange} />\r\n  }\r\n\r\n  get whiteboardBrushSize () {\r\n    return this.isActive('size') &&\r\n      <WhiteboardBrushSize\r\n        size={this.props.brushSize}\r\n        handleChange={this.props.handleBrushSizeChange} />\r\n  }\r\n\r\n  render () {\r\n    return this.props.active &&\r\n      <div className={this.className}>\r\n        { this.whiteboardBrushColor }\r\n        { this.whiteboardBrushSize }\r\n      </div>\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport WhiteboardCanvasService, { WhiteboardCanvasZoom } from '../../services/Whiteboard/WhiteboardCanvasService'\r\nimport { WhiteboardActiveMenu } from '../Whiteboard/Whiteboard.state'\r\nimport { WhiteboardBrushColorItemChangeHandle } from '../WhiteboardBrushColorItem/WhiteboardBrushColorItem'\r\nimport { WhiteboardBrushSizeChangeHandle } from '../WhiteboardBrushSize/WhiteboardBrushSize'\r\nimport WhiteboardMenuItem, { WhiteboardMenuItemName } from '../WhiteboardMenuItem/WhiteboardMenuItem'\r\nimport WhiteboardMenuContent from '../WhiteboardMenuContent/WhiteboardMenuContent'\r\nimport styles from './WhiteboardMenu.module.scss'\r\n\r\nexport type WhiteboardActiveMenuHandleClick = (activeMenu: WhiteboardActiveMenu) => void\r\n\r\ninterface WhiteboardMenuProps {\r\n  activeMenu: WhiteboardActiveMenu\r\n  brushColor: string\r\n  brushSize: string\r\n  handleBrushColorChange: WhiteboardBrushColorItemChangeHandle\r\n  handleBrushSizeChange: WhiteboardBrushSizeChangeHandle\r\n  handleCanvasClearClick: () => void\r\n  handleActiveMenuClick: WhiteboardActiveMenuHandleClick\r\n}\r\n\r\nexport default class WhiteboardMenu extends Component<WhiteboardMenuProps> {\r\n  whiteboardCanvasService: WhiteboardCanvasService\r\n\r\n  static items: WhiteboardMenuItemName[] = ['color', 'size', 'zoomIn', 'zoomOut', 'clear']\r\n\r\n  constructor (props: WhiteboardMenuProps) {\r\n    super(props)\r\n    this.whiteboardCanvasService = new WhiteboardCanvasService()\r\n    this.handleItemClick = this.handleItemClick.bind(this)\r\n  }\r\n\r\n  get menuItems () {\r\n    return WhiteboardMenu.items.map(item =>\r\n      <WhiteboardMenuItem\r\n        name={item}\r\n        handleClick={this.handleItemClick}\r\n        key={item} />\r\n    )\r\n  }\r\n\r\n  clearMenu () {\r\n    this.props.handleActiveMenuClick(null)\r\n  }\r\n\r\n  replaceActiveMenu (menuItem: WhiteboardActiveMenu) {\r\n    const isActive = (this.props.activeMenu === menuItem)\r\n    if (isActive) this.clearMenu()\r\n    else this.props.handleActiveMenuClick(menuItem)\r\n  }\r\n\r\n  zoomCanvas (type: WhiteboardCanvasZoom) {\r\n    this.whiteboardCanvasService.zoom(type)\r\n    this.clearMenu()\r\n  }\r\n\r\n  clearCanvas () {\r\n    this.whiteboardCanvasService.clear()\r\n    this.props.handleCanvasClearClick()\r\n    this.clearMenu()\r\n  }\r\n\r\n  handleItemClick (menuItem: WhiteboardMenuItemName) {\r\n    switch (menuItem) {\r\n      case 'color':\r\n        this.replaceActiveMenu('color')\r\n        break\r\n      case 'size':\r\n        this.replaceActiveMenu('size')\r\n        break\r\n      case 'zoomIn':\r\n        this.zoomCanvas('in')\r\n        break\r\n      case 'zoomOut':\r\n        this.zoomCanvas('out')\r\n        break\r\n      case 'clear':\r\n        this.clearCanvas()\r\n        break\r\n    }\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className={styles.whiteboardMenu}>\r\n        {this.menuItems}\r\n        <WhiteboardMenuContent\r\n          active={this.props.activeMenu}\r\n          brushColor={this.props.brushColor}\r\n          brushSize={this.props.brushSize}\r\n          handleBrushColorChange={this.props.handleBrushColorChange}\r\n          handleBrushSizeChange={this.props.handleBrushSizeChange} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { ChangeEvent, Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { forEach } from 'lodash'\r\nimport { IEvent } from 'fabric/fabric-impl'\r\nimport WhiteboardDrawingService from '../../services/Whiteboard/WhiteboardDrawingService'\r\nimport WhiteboardBrushService from '../../services/Whiteboard/WhiteboardBrushService'\r\nimport {\r\n  selectors,\r\n  actions,\r\n  WhiteboardState,\r\n  WhiteboardActions,\r\n  WhiteboardActiveMenu\r\n} from './Whiteboard.state'\r\nimport { MeetingWhiteboardDrawingsState } from '../../pages/Meeting/Meeting.state'\r\nimport { WhiteboardBrushColorObject } from '../WhiteboardBrushColor/WhiteboardBrushColor'\r\nimport WhiteboardCanvas from '../WhiteboardCanvas/WhiteboardCanvas'\r\nimport WhiteboardMenu from '../WhiteboardMenu/WhiteboardMenu'\r\nimport styles from './Whiteboard.module.scss'\r\n\r\nexport type WhiteboardDrawingAddHandle = (event: IEvent) => void\r\n\r\ninterface WhiteboardProps extends WhiteboardActions, WhiteboardState {\r\n  drawings: MeetingWhiteboardDrawingsState\r\n  handleCanvasClearClick: () => void\r\n  handleDrawingAdd: WhiteboardDrawingAddHandle\r\n}\r\n\r\nclass Whiteboard extends Component<WhiteboardProps> {\r\n  whiteboardDrawingService: WhiteboardDrawingService\r\n  whiteboardBrushService: WhiteboardBrushService\r\n\r\n  constructor (props: WhiteboardProps) {\r\n    super(props)\r\n    this.whiteboardDrawingService = new WhiteboardDrawingService()\r\n    this.whiteboardBrushService = new WhiteboardBrushService()\r\n    this.handleCanvasClick = this.handleCanvasClick.bind(this)\r\n    this.handleActiveMenuClick = this.handleActiveMenuClick.bind(this)\r\n    this.handleBrushColorChange = this.handleBrushColorChange.bind(this)\r\n    this.handleBrushSizeChange = this.handleBrushSizeChange.bind(this)\r\n  }\r\n\r\n  handleCanvasClick () {\r\n    this.props.replaceActiveMenu(null)\r\n  }\r\n\r\n  handleActiveMenuClick (activeMenu: WhiteboardActiveMenu) {\r\n    this.props.replaceActiveMenu(activeMenu)\r\n  }\r\n\r\n  handleAddDrawing () {\r\n    this.whiteboardDrawingService.handleAdd(event => {\r\n      this.props.handleDrawingAdd(event)\r\n    })\r\n  }\r\n\r\n  handleBrushColorChange (color: WhiteboardBrushColorObject) {\r\n    this.whiteboardBrushService.setColor(color.hex)\r\n    this.props.replaceColor(color.hex)\r\n  }\r\n\r\n  handleBrushSizeChange (event: ChangeEvent) {\r\n    const input = event.target as HTMLInputElement\r\n    const size = input.value\r\n    this.whiteboardBrushService.setSize(size)\r\n    this.props.replaceSize(size)\r\n  }\r\n\r\n  syncDrawing () {\r\n    const drawings = this.props.drawings\r\n    forEach(drawings, drawing => {\r\n      const isFromSocket: boolean = !drawing._set\r\n      if (isFromSocket) {\r\n        this.whiteboardDrawingService.parse(drawing, drawings => {\r\n          this.whiteboardDrawingService.add(drawings)\r\n        })\r\n      } else {\r\n        this.whiteboardDrawingService.add([drawing])\r\n      }\r\n    })\r\n  }\r\n\r\n  setPresets () {\r\n    this.whiteboardBrushService.setSize(this.props.brushSize)\r\n    this.whiteboardBrushService.setColor(this.props.brushColor)\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.handleAddDrawing()\r\n    this.syncDrawing()\r\n    this.setPresets()\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className={styles.whiteboard}>\r\n        <WhiteboardCanvas\r\n          handleClick={this.handleCanvasClick} />\r\n        <WhiteboardMenu\r\n          activeMenu={this.props.activeMenu}\r\n          brushColor={this.props.brushColor}\r\n          brushSize={this.props.brushSize}\r\n          handleBrushColorChange={this.handleBrushColorChange}\r\n          handleBrushSizeChange={this.handleBrushSizeChange}\r\n          handleCanvasClearClick={this.props.handleCanvasClearClick}\r\n          handleActiveMenuClick={this.handleActiveMenuClick} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(selectors, actions)(Whiteboard)\r\n","import { IonCol, isPlatform } from '@ionic/react'\r\nimport React, { Component } from 'react'\r\nimport { MeetingWhiteboardDrawingsState, VideoState } from '../../pages/Meeting/Meeting.state'\r\nimport VideoBlock, { VideoBlockHandleClick } from '../VideoBlock/VideoBlock'\r\nimport Whiteboard, { WhiteboardDrawingAddHandle } from '../Whiteboard/Whiteboard'\r\nimport styles from './ActiveVideo.module.scss'\r\ninterface ActiveVideoProps {\r\n  video: VideoState\r\n  whiteboardDrawings: MeetingWhiteboardDrawingsState\r\n  whiteboardEnabled: boolean\r\n  handleWhiteboardCanvasClearClick: () => void\r\n  handleWhiteboardDrawingAdd: WhiteboardDrawingAddHandle\r\n  handleVideoBlockClick: VideoBlockHandleClick\r\n}\r\n\r\nexport default class ActiveVideo extends Component<ActiveVideoProps> {\r\n  get className () {\r\n    const mobileClass = isPlatform('mobile') && styles.mobile\r\n    return `${styles.activeVideo} ${mobileClass}`\r\n  }\r\n\r\n  get videoBlockClassName () {\r\n    const visibilityClass = this.props.whiteboardEnabled && styles.hide // To fix no audio when whiteboard enable\r\n    return `${styles.videoBlock} ${visibilityClass}`\r\n  }\r\n\r\n  get videoBlock () {\r\n    return (\r\n      <div className={this.videoBlockClassName}>\r\n        <VideoBlock\r\n          ratio=\"full\"\r\n          video={this.props.video}\r\n          handleClick={this.props.handleVideoBlockClick} />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  get whiteboard () {\r\n    return this.props.whiteboardEnabled &&\r\n      <Whiteboard\r\n        drawings={this.props.whiteboardDrawings}\r\n        handleCanvasClearClick={this.props.handleWhiteboardCanvasClearClick}\r\n        handleDrawingAdd={this.props.handleWhiteboardDrawingAdd} />\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonCol\r\n        className={this.className}\r\n        size=\"12\" >\r\n        {this.whiteboard}\r\n        {this.videoBlock}\r\n      </IonCol>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport styles from './Skeleton.module.scss'\r\n\r\ninterface SkeletonProps {\r\n  width: string\r\n  height: string\r\n  marginTop?: string\r\n  marginBottom?: string\r\n  paddingBottom?: string\r\n  shape?: 'rectangle' | 'round'\r\n}\r\n\r\nexport default class Skeleton extends Component<SkeletonProps> {\r\n  static defaultProps = {\r\n    marginTop: '0',\r\n    marginBottom: '0',\r\n    paddingBottom: '0',\r\n    shape: 'rectangle'\r\n  }\r\n\r\n  get styles () {\r\n    return {\r\n      width: this.props.width,\r\n      height: this.props.height,\r\n      marginTop: this.props.marginTop,\r\n      marginBottom: this.props.marginBottom,\r\n      paddingBottom: this.props.paddingBottom\r\n    }\r\n  }\r\n\r\n  get className () {\r\n    const { shape } = this.props\r\n    const shapeClass = shape && styles[shape]\r\n    return `${styles.skeleton} ${shapeClass}`\r\n  }\r\n\r\n  render () {\r\n    return <div className={this.className} style={this.styles} />\r\n  }\r\n}\r\n","import { IonCol, IonIcon, isPlatform } from '@ionic/react'\r\nimport React, { Component } from 'react'\r\nimport { videocamOutline } from 'ionicons/icons'\r\nimport Skeleton from '../Skeleton/Skeleton'\r\nimport styles from './ActiveVideoSkeleton.module.scss'\r\n\r\ninterface ActiveVideoSkeletonProps {\r\n  visibility: boolean\r\n}\r\n\r\nexport default class ActiveVideoSkeleton extends Component<ActiveVideoSkeletonProps> {\r\n  get skeletonHeight () {\r\n    return isPlatform('mobile') ? 'calc(100vw / (16/9))' : '100vh'\r\n  }\r\n\r\n  render () {\r\n    return this.props.visibility &&\r\n      <IonCol size=\"12\">\r\n        <div className={styles.activeVideoSkeleton}>\r\n          <Skeleton\r\n            width=\"100%\"\r\n            height=\"0\"\r\n            paddingBottom={this.skeletonHeight} />\r\n          <IonIcon\r\n            className={styles.icon}\r\n            icon={videocamOutline} />\r\n        </div>\r\n      </IonCol>\r\n  }\r\n}\r\n","import { IonCol, IonContent, IonGrid, IonPage, IonRow, isPlatform } from '@ionic/react'\r\nimport React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { RouteComponentProps, withRouter } from 'react-router'\r\nimport { every, filter, find, forEach, includes } from 'lodash'\r\nimport { MediaConnection } from 'peerjs'\r\nimport { IEvent } from 'fabric/fabric-impl'\r\nimport routes from '../../routes'\r\nimport PeerService from '../../services/PeerService'\r\nimport MediaService from '../../services/MediaService'\r\nimport MeetingService from '../../services/MeetingService'\r\nimport VideoService from '../../services/VideoService'\r\nimport AuthService from '../../services/AuthService'\r\nimport AlertService from '../../services/AlertService'\r\nimport NotificationService from '../../services/NotificationService'\r\nimport WhiteboardDrawingService from '../../services/Whiteboard/WhiteboardDrawingService'\r\nimport WhiteboardCanvasService from '../../services/Whiteboard/WhiteboardCanvasService'\r\nimport ScreenCaptureService from '../../services/ScreenCaptureService'\r\nimport RTPSenderService from '../../services/RTPSenderService'\r\nimport StreamTrackService from '../../services/StreamTrackService'\r\nimport AppStorage from '../../components/App/App.storage'\r\nimport HostMiddleware from '../../middleware/HostMiddleware'\r\nimport MeetingRepository from '../../repositories/MeetingRepository'\r\nimport socket from './Meeting.socket'\r\nimport { selectors, actions, MeetingState, MeetingActions, VideoState, MeetingWhiteboardDrawingState } from './Meeting.state'\r\nimport Page from '../../components/Page/Page'\r\nimport Menu, { MenuPosition } from '../../components/Menu/Menu'\r\nimport ActiveVideo from '../../components/ActiveVideo/ActiveVideo'\r\nimport VideoBlock from '../../components/VideoBlock/VideoBlock'\r\nimport ActiveVideoSkeleton from '../../components/ActiveVideoSkeleton/ActiveVideoSkeleton'\r\nimport styles from './Meeting.module.scss'\r\n\r\ninterface MeetingProps extends MeetingState, MeetingActions, RouteComponentProps {}\r\n\r\nclass Meeting extends Component<MeetingProps> {\r\n  static raiseHandTimeout: number = 5000\r\n  static videoColumnSize: string = isPlatform('mobile') ? '4' : '2'\r\n  peerService: PeerService\r\n  mediaService: MediaService\r\n  meetingService: MeetingService\r\n  videoService: VideoService\r\n  authService: AuthService\r\n  notificationService: NotificationService\r\n  whiteboardDrawingService: WhiteboardDrawingService\r\n  whiteboardCanvasService: WhiteboardCanvasService\r\n  screenCaptureService: ScreenCaptureService\r\n  rtpSenderService: RTPSenderService\r\n  streamTrackService: StreamTrackService\r\n  appStorage: AppStorage\r\n  hostMiddleware: HostMiddleware\r\n  meetingRepository: MeetingRepository\r\n\r\n  constructor (props: MeetingProps) {\r\n    super(props)\r\n    this.peerService = new PeerService()\r\n    this.mediaService = new MediaService()\r\n    this.meetingService = new MeetingService()\r\n    this.videoService = new VideoService()\r\n    this.authService = new AuthService()\r\n    this.notificationService = new NotificationService()\r\n    this.whiteboardDrawingService = new WhiteboardDrawingService()\r\n    this.whiteboardCanvasService = new WhiteboardCanvasService()\r\n    this.screenCaptureService = new ScreenCaptureService()\r\n    this.rtpSenderService = new RTPSenderService()\r\n    this.streamTrackService = new StreamTrackService()\r\n    this.appStorage = new AppStorage()\r\n    this.hostMiddleware = new HostMiddleware()\r\n    this.hostMiddleware.auth(this.props.history)\r\n    this.meetingRepository = new MeetingRepository()\r\n    this.handleMenuRaiseHandClick = this.handleMenuRaiseHandClick.bind(this)\r\n    this.handleMenuEndMeetingClick = this.handleMenuEndMeetingClick.bind(this)\r\n    this.handleMenuVideoClick = this.handleMenuVideoClick.bind(this)\r\n    this.handleMenuAudioClick = this.handleMenuAudioClick.bind(this)\r\n    this.handleMenuScreenShareClick = this.handleMenuScreenShareClick.bind(this)\r\n    this.handleMenuWhiteboardClick = this.handleMenuWhiteboardClick.bind(this)\r\n    this.handleMenuMemberRemoveClick = this.handleMenuMemberRemoveClick.bind(this)\r\n    this.handleMenuToggleChange = this.handleMenuToggleChange.bind(this)\r\n    this.handleVideoBlockClick = this.handleVideoBlockClick.bind(this)\r\n    this.handleWhiteboardCanvasClearClick = this.handleWhiteboardCanvasClearClick.bind(this)\r\n    this.handleWhiteboardDrawingAdd = this.handleWhiteboardDrawingAdd.bind(this)\r\n  }\r\n\r\n  isMenuExpanded (position: MenuPosition) {\r\n    const { menuExpanded } = this.props\r\n    return includes(menuExpanded, position)\r\n  }\r\n\r\n  get canMenuTopSpace () {\r\n    return (this.activeVideo && this.isMenuExpanded('top'))\r\n  }\r\n\r\n  get className () {\r\n    const mobileClass = isPlatform('mobile') && styles.mobile\r\n    const menuTopSpaceClass = this.canMenuTopSpace && styles.menuTopSpace\r\n    return `${styles.meeting} ${mobileClass} ${menuTopSpaceClass}`\r\n  }\r\n\r\n  get activeVideo () {\r\n    return find(this.props.videos, 'active')\r\n  }\r\n\r\n  get activeVideoSkeletonVisibility () {\r\n    return !this.activeVideo\r\n  }\r\n\r\n  get activeVideoBlock () {\r\n    return this.activeVideo &&\r\n      <ActiveVideo\r\n        video={this.activeVideo}\r\n        whiteboardDrawings={this.props.whiteboardDrawings}\r\n        whiteboardEnabled={this.props.whiteboardEnabled}\r\n        handleWhiteboardCanvasClearClick={this.handleWhiteboardCanvasClearClick}\r\n        handleWhiteboardDrawingAdd={this.handleWhiteboardDrawingAdd}\r\n        handleVideoBlockClick={this.handleVideoBlockClick} />\r\n  }\r\n\r\n  get videos () {\r\n    const videos = filter(this.props.videos, { active: false })\r\n    return videos.map(video => this.video(video))\r\n  }\r\n\r\n  get userVideo () {\r\n    const { connectionId, videos } = this.props\r\n    return find(videos, { id: connectionId })\r\n  }\r\n\r\n  get canInviteMember () {\r\n    return Boolean(this.props.id)\r\n  }\r\n\r\n  get canRaiseHand () {\r\n    if (!this.userVideo) return false\r\n    return !this.userVideo.raiseHand\r\n  }\r\n\r\n  get canEndMeeting () {\r\n    return Boolean(this.props.id)\r\n  }\r\n\r\n  get canVideoMute () {\r\n    if (!this.userVideo) return false\r\n    return !this.userVideo.streamMuted.video\r\n  }\r\n\r\n  get canAudioMute () {\r\n    if (!this.userVideo) return false\r\n    return !this.userVideo.streamMuted.audio\r\n  }\r\n\r\n  get canScreenShare () {\r\n    const videos = this.props.videos\r\n    return every(videos, video => (video.kind !== 'screen'))\r\n  }\r\n\r\n  get canWhiteboardEnable () {\r\n    return !this.props.whiteboardEnabled\r\n  }\r\n\r\n  get inviteText () {\r\n    const url = `https://${process.env.REACT_APP_HOST}`\r\n    const { id } = this.props\r\n    return `Hi there,\\nYou can join the meeting from ${url}/join?id=${id}`\r\n  }\r\n\r\n  handleStreamStop () {\r\n    const screenStream = this.meetingService.getScreenStream()\r\n    const tracks = screenStream.getTracks()\r\n    forEach(tracks, track => {\r\n      track.onended = () => this.switchUserStreamToMedia()\r\n    })\r\n  }\r\n\r\n  switchUserStreamToMedia () {\r\n    this.mediaService.getStream(this.props.history, () => {\r\n      const mediaStream = this.meetingService.getMediaStream()\r\n      this.videoService.replaceUserStream(mediaStream, 'media')\r\n      this.rtpSenderService.replaceStream(mediaStream)\r\n      const screenStream = this.meetingService.getScreenStream()\r\n      this.streamTrackService.stop(screenStream)\r\n    })\r\n  }\r\n\r\n  switchUserStreamToScreen () {\r\n    this.screenCaptureService.getStream(() => {\r\n      const screenStream = this.meetingService.getScreenStream()\r\n      this.videoService.replaceUserStream(screenStream, 'screen')\r\n      this.rtpSenderService.replaceStream(screenStream)\r\n      this.handleStreamStop()\r\n      const mediaStream = this.meetingService.getMediaStream()\r\n      this.streamTrackService.stop(mediaStream)\r\n    })\r\n  }\r\n\r\n  handleMenuRaiseHandClick () {\r\n    if (this.userVideo?.raiseHand) return\r\n    const { id, connectionId } = this.props\r\n    socket.raiseHand.publish(id, connectionId)\r\n  }\r\n\r\n  handleMenuEndMeetingClick () {\r\n    const prompt = 'Are you sure to end meeting?'\r\n    AlertService.push(prompt, () => {\r\n      this.peerService.disconnect()\r\n    })\r\n  }\r\n\r\n  handleMenuVideoClick () {\r\n    if (this.userVideo) {\r\n      const enabled = this.mediaService.toggleVideoMute(this.userVideo.stream)\r\n      this.props.replaceVideoStreamMutedVideo(this.props.connectionId, !enabled)\r\n    }\r\n  }\r\n\r\n  handleMenuAudioClick () {\r\n    if (this.userVideo) {\r\n      const enabled = this.mediaService.toggleAudioMute(this.userVideo.stream)\r\n      this.props.replaceVideoStreamMutedAudio(this.props.connectionId, !enabled)\r\n    }\r\n  }\r\n\r\n  handleMenuScreenShareClick () {\r\n    if (this.canScreenShare) this.switchUserStreamToScreen()\r\n    else this.switchUserStreamToMedia()\r\n  }\r\n\r\n  handleMenuWhiteboardClick () {\r\n    const { id } = this.props\r\n    const whiteboardEnabled = !this.props.whiteboardEnabled\r\n    socket.whiteboardEnabled.publish(id, whiteboardEnabled)\r\n    this.props.replaceWhiteboardEnabled(whiteboardEnabled)\r\n  }\r\n\r\n  handleMenuMemberRemoveClick () {\r\n    if (this.activeVideo?.memberRemove) {\r\n      const { id } = this.props\r\n      socket.memberRemove.publish(id, this.activeVideo.id)\r\n    }\r\n  }\r\n\r\n  handleMenuToggleChange (position: MenuPosition) {\r\n    const isMenuExpanded = this.isMenuExpanded(position)\r\n    const { pullMenuExpanded, pushMenuExpanded } = this.props\r\n    const action = isMenuExpanded ? pullMenuExpanded : pushMenuExpanded\r\n    action(position)\r\n  }\r\n\r\n  handleVideoBlockClick (video: VideoState) {\r\n    this.props.replaceVideoActive(video.id, true)\r\n  }\r\n\r\n  handleWhiteboardCanvasClearClick () {\r\n    socket.whiteboardCanvasClear.publish(this.props.id)\r\n  }\r\n\r\n  handleWhiteboardDrawingAdd (event: IEvent) {\r\n    const { id } = this.props\r\n    const drawing = event.target as MeetingWhiteboardDrawingState\r\n    this.props.pushWhiteboardDrawing(drawing)\r\n    socket.whiteboardDrawingAdd.publish(id, drawing)\r\n  }\r\n\r\n  handleRemoteRaiseHand (meetingId: string) {\r\n    socket.raiseHand.subscribe(meetingId, connectionId => {\r\n      this.props.replaceVideoRaiseHand(connectionId, true)\r\n      setTimeout(() => {\r\n        this.props.replaceVideoRaiseHand(connectionId, false)\r\n      }, Meeting.raiseHandTimeout)\r\n    })\r\n  }\r\n\r\n  handleRemoteMemberRemove (meetingId: string) {\r\n    socket.memberRemove.subscribe(meetingId, connectionId => {\r\n      const isUser = this.meetingService.isUserMeeting(connectionId)\r\n      if (isUser) this.peerService.disconnect()\r\n      else {\r\n        this.videoService.pullVideo(connectionId)\r\n        this.meetingRepository.setHostVideoActive()\r\n      }\r\n    })\r\n  }\r\n\r\n  handleRemoteDisconnect (meetingId: string) {\r\n    socket.remoteDisconnect.subscribe(meetingId, connectionId => {\r\n      const isHostMeeting = this.meetingService.isHostMeeting(connectionId)\r\n      if (isHostMeeting) this.exitMeeting()\r\n      else this.videoService.pullVideo(connectionId)\r\n    })\r\n  }\r\n\r\n  handleRemoteRTPTrackReplacement (meetingId: string) {\r\n    socket.rtpTrackReplaced.subscribe(meetingId, payload => {\r\n      const { connectionId, kind } = payload\r\n      this.props.replaceVideoKind(connectionId, kind)\r\n      this.props.updateVideoRenderId(connectionId)\r\n    })\r\n  }\r\n\r\n  handleRemoteConferenceCall (meetingId: string, localStream: MediaStream) {\r\n    socket.conferenceCall.subscribe(meetingId, connectionId => {\r\n      this.notificationService.notifyMember(connectionId)\r\n      if (this.meetingService.canConferenceCall(connectionId)) {\r\n        this.peerService.call(connectionId, localStream, call => {\r\n          this.meetingService.pushCall(call)\r\n          this.handleCallStreaming(call)\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  handleRemoteWhiteboardEnabled (meetingId: string) {\r\n    socket.whiteboardEnabled.subscribe(meetingId, whiteboardEnabled => {\r\n      this.props.replaceWhiteboardEnabled(whiteboardEnabled)\r\n    })\r\n  }\r\n\r\n  handleRemoteWhiteboardDrawingAdd (meetingId: string) {\r\n    socket.whiteboardDrawingAdd.subscribe(meetingId, drawing => {\r\n      const isDrawingExists = this.whiteboardDrawingService.isExists(drawing)\r\n      if (!isDrawingExists) {\r\n        this.whiteboardDrawingService.parse(drawing, drawings => {\r\n          this.whiteboardDrawingService.add(drawings)\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  handleRemoteWhiteboardDrawingSync (localConnectionId: string) {\r\n    socket.whiteboardDrawingSync.subscribe(localConnectionId, whiteboardSync => {\r\n      const { drawings, whiteboardEnabled } = whiteboardSync\r\n      if (whiteboardEnabled) {\r\n        this.props.replaceWhiteboardEnabled(whiteboardEnabled)\r\n      }\r\n      this.props.replaceWhiteboardDrawings(drawings)\r\n      socket.whiteboardDrawingSync.unsubscribe(localConnectionId)\r\n    })\r\n  }\r\n\r\n  handleRemoteWhiteboardCanvasClear (meetingId: string) {\r\n    socket.whiteboardCanvasClear.subscribe(meetingId, () => {\r\n      this.whiteboardCanvasService.clear()\r\n      this.props.replaceWhiteboardDrawings([])\r\n    })\r\n  }\r\n\r\n  menu (position: MenuPosition) {\r\n    return this.activeVideo &&\r\n      <Menu\r\n        position={position}\r\n        canInviteMember={this.canInviteMember}\r\n        canRaiseHand={this.canRaiseHand}\r\n        canEndMeeting={this.canEndMeeting}\r\n        canVideoMute={this.canVideoMute}\r\n        canAudioMute={this.canAudioMute}\r\n        canScreenShare={this.canScreenShare}\r\n        canWhiteboardEnable={this.canWhiteboardEnable}\r\n        canMemberRemove={this.activeVideo.memberRemove}\r\n        inviteText={this.inviteText}\r\n        isExpanded={this.isMenuExpanded(position)}\r\n        handleRaiseHandClick={this.handleMenuRaiseHandClick}\r\n        handleEndMeetingClick={this.handleMenuEndMeetingClick}\r\n        handleVideoClick={this.handleMenuVideoClick}\r\n        handleAudioClick={this.handleMenuAudioClick}\r\n        handleScreenShareClick={this.handleMenuScreenShareClick}\r\n        handleWhiteboardClick={this.handleMenuWhiteboardClick}\r\n        handleMemberRemoveClick={this.handleMenuMemberRemoveClick}\r\n        handleToggleChange={this.handleMenuToggleChange}\r\n      />\r\n  }\r\n\r\n  video (video: VideoState) {\r\n    return (\r\n      <IonCol\r\n        size={Meeting.videoColumnSize}\r\n        key={video.id}>\r\n        <VideoBlock\r\n          ratio=\"square\"\r\n          video={video}\r\n          handleClick={this.handleVideoBlockClick} />\r\n      </IonCol>\r\n    )\r\n  }\r\n\r\n  socketUnsubscribe () {\r\n    const { id } = this.props\r\n    socket.raiseHand.unsubscribe(id)\r\n    socket.conferenceCall.unsubscribe(id)\r\n    socket.rtpTrackReplaced.unsubscribe(id)\r\n    socket.remoteDisconnect.unsubscribe(id)\r\n    socket.memberRemove.unsubscribe(id)\r\n    socket.whiteboardEnabled.unsubscribe(id)\r\n    socket.whiteboardDrawingAdd.unsubscribe(id)\r\n    socket.whiteboardCanvasClear.unsubscribe(id)\r\n  }\r\n\r\n  handleDisconnect () {\r\n    this.peerService.onDisconnect(() => {\r\n      const { id, connectionId } = this.props\r\n      socket.remoteDisconnect.publish(id, connectionId)\r\n      this.exitMeeting()\r\n    })\r\n  }\r\n\r\n  whiteboardDrawingSync (connectionId: string) {\r\n    const { whiteboardEnabled, whiteboardDrawings: drawings } = this.props\r\n    const whiteboardSync = { drawings, whiteboardEnabled }\r\n    socket.whiteboardDrawingSync.publish(connectionId, whiteboardSync)\r\n  }\r\n\r\n  exitMeeting () {\r\n    this.videoService.stopUserVideo()\r\n    this.meetingService.resetMeeting()\r\n    this.socketUnsubscribe()\r\n    this.peerService.disconnect()\r\n    this.authService.resetType()\r\n    this.props.replaceWhiteboardEnabled(false)\r\n    this.props.replaceWhiteboardDrawings([])\r\n    this.appStorage.removeAccessToken(() => {\r\n      this.props.history.push(routes.home.path)\r\n    })\r\n  }\r\n\r\n  handleUserStream (localConnectionId: string, localStream: MediaStream) {\r\n    this.videoService.createMediaVideo(localConnectionId, localStream, localVideo => {\r\n      this.videoService.pushVideo(localVideo)\r\n    })\r\n  }\r\n\r\n  handleCallStreaming (call: MediaConnection) {\r\n    this.peerService.onCalling(call, (remoteConnectionId, remoteStream) => {\r\n      this.videoService.createMediaVideo(remoteConnectionId, remoteStream, remoteVideo => {\r\n        this.videoService.pushVideo(remoteVideo)\r\n      })\r\n    })\r\n  }\r\n\r\n  handleReceiveCall (meetingId: string, localStream: MediaStream) {\r\n    this.peerService.onReceiveCall(call => {\r\n      this.meetingService.pushCall(call)\r\n      const { peer: connectionId } = call\r\n      this.peerService.answerCall(call, localStream)\r\n      this.whiteboardDrawingSync(connectionId)\r\n      socket.conferenceCall.publish(meetingId, connectionId)\r\n      this.notificationService.notifyHost(connectionId)\r\n      this.handleCallStreaming(call)\r\n    })\r\n  }\r\n\r\n  joinMeeting (meetingId: string, localConnectionId: string, localStream: MediaStream) {\r\n    if (this.meetingService.isMemberMeeting(localConnectionId)) {\r\n      this.peerService.call(meetingId, localStream, call => {\r\n        this.meetingService.pushCall(call)\r\n        this.handleCallStreaming(call)\r\n      })\r\n    }\r\n  }\r\n\r\n  handleMeeting () {\r\n    const { history } = this.props\r\n    this.peerService.handleErrors(history)\r\n    this.peerService.onOpen(localConnectionId => {\r\n      this.meetingService.setId(localConnectionId, meetingId => {\r\n        if (meetingId) {\r\n          this.handleRemoteRaiseHand(meetingId)\r\n          this.handleRemoteMemberRemove(meetingId)\r\n          this.handleDisconnect()\r\n          this.mediaService.getStream(history, localStream => {\r\n            this.handleUserStream(localConnectionId, localStream)\r\n            this.handleReceiveCall(meetingId, localStream)\r\n            this.joinMeeting(meetingId, localConnectionId, localStream)\r\n            this.handleRemoteDisconnect(meetingId)\r\n            this.handleRemoteRTPTrackReplacement(meetingId)\r\n            this.handleRemoteConferenceCall(meetingId, localStream)\r\n            this.handleRemoteWhiteboardEnabled(meetingId)\r\n            this.handleRemoteWhiteboardDrawingAdd(meetingId)\r\n            this.handleRemoteWhiteboardDrawingSync(localConnectionId)\r\n            this.handleRemoteWhiteboardCanvasClear(meetingId)\r\n          })\r\n        } else this.exitMeeting()\r\n      })\r\n    })\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    this.exitMeeting()\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.handleMeeting()\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonPage>\r\n        <IonContent>\r\n          <Page\r\n            invert={false}\r\n            container=\"full\">\r\n            <div className={this.className}>\r\n              <IonGrid>\r\n                <IonRow>\r\n                  {this.activeVideoBlock}\r\n                  <ActiveVideoSkeleton visibility={this.activeVideoSkeletonVisibility} />\r\n                </IonRow>\r\n                <IonRow>\r\n                  {this.videos}\r\n                </IonRow>\r\n              </IonGrid>\r\n              {this.menu('top')}\r\n              {this.menu('bottom')}\r\n            </div>\r\n          </Page>\r\n        </IonContent>\r\n      </IonPage>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(selectors, actions)(Meeting))\r\n","import RequestService from '../../services/RequestService'\r\n\r\ninterface CreateAdminPayload {\r\n  username: string\r\n  password: string\r\n  confirmPassword: string\r\n}\r\n\r\nexport default class InstallRequest {\r\n  private requestService: RequestService\r\n\r\n  constructor () {\r\n    this.requestService = new RequestService()\r\n  }\r\n\r\n  createAdmin (admin: CreateAdminPayload, callback: () => void) {\r\n    this.requestService.post('/admin', admin, response => {\r\n      if (response) callback()\r\n    })\r\n  }\r\n\r\n  validateInstall (callback: () => void) {\r\n    this.requestService.get('/admin', admin => {\r\n      if (admin) callback()\r\n    })\r\n  }\r\n}\r\n","import { IonCol, IonContent, IonGrid, IonPage, IonRow } from '@ionic/react'\r\nimport React, { ChangeEvent, Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { RouteComponentProps, withRouter } from 'react-router'\r\nimport routes from '../../routes'\r\nimport Request from './Install.request'\r\nimport { actions, selectors, InstallState, InstallActions } from './Install.state'\r\nimport Page from '../../components/Page/Page'\r\nimport Input from '../../components/Input/Input'\r\nimport Button from '../../components/Button/Button'\r\n\r\ninterface InstallProps extends\r\n  InstallState, InstallActions, RouteComponentProps {}\r\n\r\nclass Install extends Component<InstallProps> {\r\n  request: Request\r\n\r\n  constructor (props: any) {\r\n    super(props)\r\n    this.request = new Request()\r\n    this.handleInputChange = this.handleInputChange.bind(this)\r\n    this.handleCreateClick = this.handleCreateClick.bind(this)\r\n    this.validateInstall()\r\n  }\r\n\r\n  handleInputChange (event: ChangeEvent) {\r\n    const target = event.target as HTMLInputElement\r\n    const { value, name } = target\r\n    switch (name) {\r\n      case 'username':\r\n        this.props.replaceUsername(value)\r\n        break\r\n      case 'password':\r\n        this.props.replacePassword(value)\r\n        break\r\n      case 'confirmPassword':\r\n        this.props.replaceConfirmPassword(value)\r\n        break\r\n    }\r\n  }\r\n\r\n  handleCreateClick () {\r\n    const { username, password, confirmPassword } = this.props\r\n    const admin = { username, password, confirmPassword }\r\n    this.request.createAdmin(admin, () => {\r\n      this.props.history.push(routes.adminSignIn.path)\r\n    })\r\n  }\r\n\r\n  validateInstall () {\r\n    this.request.validateInstall(() => {\r\n      this.props.history.push(routes.adminSignIn.path)\r\n    })\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonPage>\r\n        <IonContent>\r\n          <Page\r\n            invert={false}\r\n            container=\"small\">\r\n            <IonGrid>\r\n              <IonRow>\r\n                <IonCol>\r\n                  <Input\r\n                    name=\"username\"\r\n                    type=\"text\"\r\n                    value={this.props.username}\r\n                    placeholder=\"Username\"\r\n                    handleChange={this.handleInputChange} />\r\n                  <Input\r\n                    name=\"password\"\r\n                    type=\"password\"\r\n                    value={this.props.password}\r\n                    placeholder=\"Password\"\r\n                    handleChange={this.handleInputChange} />\r\n                  <Input\r\n                    name=\"confirmPassword\"\r\n                    type=\"password\"\r\n                    value={this.props.confirmPassword}\r\n                    placeholder=\"Confirm password\"\r\n                    handleChange={this.handleInputChange} />\r\n                  <Button\r\n                    text=\"Create Admin\"\r\n                    handleClick={this.handleCreateClick} />\r\n                </IonCol>\r\n              </IonRow>\r\n            </IonGrid>\r\n          </Page>\r\n        </IonContent>\r\n      </IonPage>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(selectors, actions)(Install))\r\n","import RequestService from '../../services/RequestService'\r\nimport AppStorage from '../../components/App/App.storage'\r\n\r\ntype SignInCallback = () => void\r\n\r\ninterface SignInCredentials {\r\n  username: string\r\n  password: string\r\n}\r\n\r\nexport default class AdminSignInRequest {\r\n  private requestService: RequestService\r\n  private appStorage: AppStorage\r\n\r\n  constructor () {\r\n    this.requestService = new RequestService()\r\n    this.appStorage = new AppStorage()\r\n  }\r\n\r\n  signIn (credentials: SignInCredentials, callback: SignInCallback) {\r\n    this.requestService.post('/admin/signIn', credentials, response => {\r\n      if (response) {\r\n        this.appStorage.setAccessToken(response.accessToken, callback)\r\n      }\r\n    })\r\n  }\r\n}\r\n","import { IonCol, IonContent, IonGrid, IonPage, IonRow } from '@ionic/react'\r\nimport React, { ChangeEvent, Component } from 'react'\r\nimport { RouteComponentProps, withRouter } from 'react-router'\r\nimport { connect } from 'react-redux'\r\nimport routes from '../../routes'\r\nimport { actions, selectors, AdminSignInState, AdminSignInActions } from './AdminSignIn.state'\r\nimport Request from './AdminSignIn.request'\r\nimport Page from '../../components/Page/Page'\r\nimport Input from '../../components/Input/Input'\r\nimport Button from '../../components/Button/Button'\r\n\r\ninterface AdminSignInProps extends\r\n  AdminSignInState, AdminSignInActions, RouteComponentProps {}\r\n\r\nclass AdminSignIn extends Component<AdminSignInProps> {\r\n  request: Request\r\n\r\n  constructor (props: any) {\r\n    super(props)\r\n    this.request = new Request()\r\n    this.handleInputChange = this.handleInputChange.bind(this)\r\n    this.handleSignInClick = this.handleSignInClick.bind(this)\r\n  }\r\n\r\n  handleInputChange (event: ChangeEvent) {\r\n    const target = event.target as HTMLInputElement\r\n    const { value, name } = target\r\n    switch (name) {\r\n      case 'username':\r\n        this.props.replaceUsername(value)\r\n        break\r\n      case 'password':\r\n        this.props.replacePassword(value)\r\n        break\r\n    }\r\n  }\r\n\r\n  handleSignInClick () {\r\n    const { username, password } = this.props\r\n    const credentials = { username, password }\r\n    this.request.signIn(credentials, () => {\r\n      this.props.history.push(routes.hosts.path)\r\n    })\r\n  }\r\n\r\n  clearForm () {\r\n    this.props.replaceUsername('')\r\n    this.props.replacePassword('')\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    this.clearForm()\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonPage>\r\n        <IonContent>\r\n          <Page\r\n            invert={false}\r\n            container=\"small\">\r\n            <IonGrid>\r\n              <IonRow>\r\n                <IonCol>\r\n                  <Input\r\n                    name=\"username\"\r\n                    type=\"text\"\r\n                    value={this.props.username}\r\n                    placeholder=\"Username\"\r\n                    handleChange={this.handleInputChange} />\r\n                  <Input\r\n                    name=\"password\"\r\n                    type=\"password\"\r\n                    value={this.props.password}\r\n                    placeholder=\"Password\"\r\n                    handleChange={this.handleInputChange} />\r\n                  <Button\r\n                    text=\"Sign In\"\r\n                    handleClick={this.handleSignInClick} />\r\n                </IonCol>\r\n              </IonRow>\r\n            </IonGrid>\r\n          </Page>\r\n        </IonContent>\r\n      </IonPage>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(selectors, actions)(AdminSignIn))\r\n","import { History } from 'history'\r\nimport routes from '../routes'\r\nimport RequestService from '../services/RequestService'\r\n\r\nexport default class AdminMiddleware {\r\n  protected requestService: RequestService\r\n\r\n  constructor () {\r\n    this.requestService = new RequestService()\r\n  }\r\n\r\n  auth (history: History) {\r\n    this.requestService.get('/admin/auth', response => {\r\n      if (!response) history.push(routes.adminSignIn.path)\r\n    })\r\n  }\r\n}\r\n","import RequestService from '../../services/RequestService'\r\nimport { HostsState, HostState } from './Hosts.state'\r\n\r\nexport interface HostCreatePayload {\r\n  name: string\r\n  password: string\r\n  username: string\r\n}\r\n\r\ntype CreateHostCallback = (response: HostState) => void\r\ntype ListHostsCallback = (hosts: HostsState[]) => void\r\n\r\ninterface DeleteHostData {\r\n  id: number\r\n}\r\n\r\nexport default class HostsRequest {\r\n  private requestService: RequestService\r\n\r\n  constructor () {\r\n    this.requestService = new RequestService()\r\n  }\r\n\r\n  create (host: HostCreatePayload, callback: CreateHostCallback) {\r\n    this.requestService.post('/host', host, response => {\r\n      if (response) callback(response)\r\n    })\r\n  }\r\n\r\n  listHosts (callback: ListHostsCallback) {\r\n    this.requestService.get('/hosts', hosts => {\r\n      if (hosts) callback(hosts)\r\n    })\r\n  }\r\n\r\n  delete (host: DeleteHostData, callback: () => void) {\r\n    this.requestService.delete('/host', host, response => {\r\n      if (response) callback()\r\n    })\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { NavLink, RouteComponentProps, withRouter } from 'react-router-dom'\r\nimport routes from '../../routes'\r\nimport AppStorage from '../App/App.storage'\r\nimport styles from './AdminMenu.module.scss'\r\n\r\ninterface AdminMenuProps extends RouteComponentProps {}\r\n\r\nclass AdminMenu extends Component<AdminMenuProps> {\r\n  appStorage: AppStorage\r\n\r\n  constructor (props: AdminMenuProps) {\r\n    super(props)\r\n    this.appStorage = new AppStorage()\r\n    this.handleSignOutClick = this.handleSignOutClick.bind(this)\r\n  }\r\n\r\n  handleSignOutClick () {\r\n    this.appStorage.removeAccessToken(() => {\r\n      this.props.history.push(routes.adminSignIn.path)\r\n    })\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className={styles.adminMenu}>\r\n        <div className={styles.menuItems}>\r\n          <NavLink\r\n            className={styles.menuItem}\r\n            to={routes.hosts.path}\r\n            activeClassName={styles.active}>\r\n            Hosts\r\n          </NavLink>\r\n          <NavLink\r\n            className={styles.menuItem}\r\n            to={routes.privacyEdit.path}\r\n            activeClassName={styles.active}>\r\n            Privacy Policy\r\n          </NavLink>\r\n          <NavLink\r\n            className={styles.menuItem}\r\n            to=\"#\"\r\n            onClick={this.handleSignOutClick}>\r\n            Sign Out\r\n          </NavLink>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(AdminMenu)\r\n","import { IonCol, IonGrid, IonRow } from '@ionic/react'\r\nimport React, { ChangeEvent, Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport copyToClipboard from 'copy-to-clipboard'\r\nimport AlertService from '../../services/AlertService'\r\nimport { HostCreatePayload } from '../../pages/Hosts/Hosts.request'\r\nimport { selectors, actions, HostCreateState, HostCreateActions } from './HostCreate.state'\r\nimport Button from '../Button/Button'\r\nimport Input from '../Input/Input'\r\n\r\ninterface HostCreateProps extends HostCreateState, HostCreateActions {\r\n  handleCreateClick: (host: HostCreatePayload, callback: () => void) => void\r\n}\r\n\r\nclass HostCreate extends Component<HostCreateProps> {\r\n  constructor (props: HostCreateProps) {\r\n    super(props)\r\n    this.handleInputChange = this.handleInputChange.bind(this)\r\n    this.handleCreateHostClick = this.handleCreateHostClick.bind(this)\r\n  }\r\n\r\n  handleInputChange (event: ChangeEvent) {\r\n    const target = event.target as HTMLInputElement\r\n    const { value, name } = target\r\n    switch (name) {\r\n      case 'name':\r\n        this.props.replaceName(value)\r\n        break\r\n      case 'password':\r\n        this.props.replacePassword(value)\r\n        break\r\n      case 'username':\r\n        this.props.replaceUsername(value)\r\n        break\r\n    }\r\n  }\r\n\r\n  copyCredentials () {\r\n    const appUrl = `https://${process.env.REACT_APP_HOST}`\r\n    const { name, username, password } = this.props\r\n    const credentials = `Hi ${name},\\nYou can start a meeting from ${appUrl}/start using the following credentials:\\nUsername: ${username}\\nPassword: ${password}`\r\n    copyToClipboard(credentials)\r\n    AlertService.push('Credentials copied.')\r\n  }\r\n\r\n  clearForm () {\r\n    this.props.replaceName('')\r\n    this.props.replaceUsername('')\r\n    this.props.replacePassword('')\r\n  }\r\n\r\n  handleCreateHostClick () {\r\n    const { name, username, password } = this.props\r\n    const host = { name, username, password }\r\n    this.props.handleCreateClick(host, () => {\r\n      this.copyCredentials()\r\n      this.clearForm()\r\n    })\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonGrid>\r\n        <IonRow>\r\n          <IonCol>\r\n            <Input\r\n              name=\"name\"\r\n              type=\"text\"\r\n              value={this.props.name}\r\n              placeholder=\"Name\"\r\n              handleChange={this.handleInputChange} />\r\n            <Input\r\n              name=\"password\"\r\n              type=\"password\"\r\n              value={this.props.password}\r\n              placeholder=\"Password\"\r\n              handleChange={this.handleInputChange} />\r\n          </IonCol>\r\n          <IonCol>\r\n            <Input\r\n              name=\"username\"\r\n              type=\"text\"\r\n              value={this.props.username}\r\n              placeholder=\"Username\"\r\n              handleChange={this.handleInputChange} />\r\n            <Button\r\n              text=\"Create Host\"\r\n              handleClick={this.handleCreateHostClick} />\r\n          </IonCol>\r\n        </IonRow>\r\n      </IonGrid>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(selectors, actions)(HostCreate)\r\n","import { IonCard } from '@ionic/react'\r\nimport React, { Component } from 'react'\r\nimport moment from 'moment'\r\nimport { HostState } from '../../pages/Hosts/Hosts.state'\r\nimport FloatButton from '../FloatButton/FloatButton'\r\nimport styles from './Host.module.scss'\r\n\r\ninterface HostProps {\r\n  host: HostState\r\n  handleDeleteClick: (id: number) => void\r\n}\r\n\r\nexport default class Host extends Component<HostProps> {\r\n  constructor (props: HostProps) {\r\n    super(props)\r\n    this.handleDeleteClick = this.handleDeleteClick.bind(this)\r\n  }\r\n\r\n  get lastMeeting () {\r\n    const { lastMeetingAt } = this.props.host\r\n    return lastMeetingAt\r\n      ? moment(lastMeetingAt).format('LLL')\r\n      : '-'\r\n  }\r\n\r\n  handleDeleteClick () {\r\n    this.props.handleDeleteClick(this.props.host.id)\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonCard>\r\n        <div className={styles.host}>\r\n          <div className={styles.user}>\r\n            <h3 className={styles.name}>{this.props.host.name}</h3>\r\n            <div className={styles.username}>{this.props.host.username}</div>\r\n            <div className={styles.lastMeeting}>\r\n              <h3 className={styles.heading}>Last Meeting</h3>\r\n              <div className={styles.time}>{this.lastMeeting}</div>\r\n            </div>\r\n          </div>\r\n          <div className={styles.actions}>\r\n            <FloatButton\r\n              name=\"removeHost\"\r\n              handleClick={this.handleDeleteClick} />\r\n          </div>\r\n        </div>\r\n      </IonCard>\r\n    )\r\n  }\r\n}\r\n","import { IonCard } from '@ionic/react'\r\nimport React, { Component } from 'react'\r\nimport { random } from 'lodash'\r\nimport Skeleton from '../Skeleton/Skeleton'\r\nimport styles from './HostSkeleton.module.scss'\r\n\r\nexport default class HostSkeleton extends Component {\r\n  randomWidth (minWidth: number, maxWidth: number) {\r\n    return `${random(minWidth, maxWidth)}%`\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonCard>\r\n        <div className={styles.host}>\r\n          <div className={styles.user}>\r\n            <Skeleton\r\n              width={this.randomWidth(25, 35)}\r\n              height=\"12px\"\r\n              marginBottom=\"8px\" />\r\n            <Skeleton\r\n              width={this.randomWidth(25, 35)}\r\n              height=\"12px\"\r\n              marginBottom=\"22px\" />\r\n            <Skeleton\r\n              width=\"40%\"\r\n              height=\"15px\"\r\n              marginBottom=\"8px\" />\r\n            <Skeleton\r\n              width=\"65%\"\r\n              height=\"12px\" />\r\n          </div>\r\n          <div className={styles.actions}>\r\n            <Skeleton\r\n              width=\"35px\"\r\n              height=\"35px\"\r\n              shape=\"round\" />\r\n          </div>\r\n        </div>\r\n      </IonCard>\r\n    )\r\n  }\r\n}\r\n","import { IonCol, IonContent, IonGrid, IonPage, IonRow } from '@ionic/react'\r\nimport React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { RouteComponentProps, withRouter } from 'react-router'\r\nimport { isEmpty, range } from 'lodash'\r\nimport AdminMiddleware from '../../middleware/AdminMiddleware'\r\nimport AlertService from '../../services/AlertService'\r\nimport Request, { HostCreatePayload } from './Hosts.request'\r\nimport { selectors, actions, HostState, HostsState, HostsActions } from './Hosts.state'\r\nimport Page from '../../components/Page/Page'\r\nimport AdminMenu from '../../components/AdminMenu/AdminMenu'\r\nimport HostCreate from '../../components/HostCreate/HostCreate'\r\nimport Host from '../../components/Host/Host'\r\nimport HostSkeleton from '../../components/HostSkeleton/HostSkeleton'\r\n\r\ninterface HostsProps extends HostsState, HostsActions, RouteComponentProps {}\r\n\r\nclass Hosts extends Component<HostsProps> {\r\n  static skeletonsLength = 2\r\n  adminMiddleware: AdminMiddleware\r\n  request: Request\r\n\r\n  constructor (props: HostsProps) {\r\n    super(props)\r\n    this.adminMiddleware = new AdminMiddleware()\r\n    this.request = new Request()\r\n    this.handleCreateHostClick = this.handleCreateHostClick.bind(this)\r\n    this.handleHostDeleteClick = this.handleHostDeleteClick.bind(this)\r\n  }\r\n\r\n  setHosts () {\r\n    this.request.listHosts(hosts => this.props.replaceHosts(hosts))\r\n  }\r\n\r\n  deleteHost (id: number) {\r\n    const payload = { id }\r\n    this.request.delete(payload, () => this.props.pullHost(id))\r\n  }\r\n\r\n  handleHostDeleteClick (id: number) {\r\n    AlertService.push(\r\n      'Are you sure to delete the host?',\r\n      () => this.deleteHost(id)\r\n    )\r\n  }\r\n\r\n  host (host: HostState) {\r\n    return (\r\n      <IonCol\r\n        size=\"12\"\r\n        sizeSm=\"6\"\r\n        key={host.username}>\r\n        <Host\r\n          host={host}\r\n          handleDeleteClick={this.handleHostDeleteClick} />\r\n      </IonCol>\r\n    )\r\n  }\r\n\r\n  get hosts () {\r\n    const { hosts } = this.props\r\n    return hosts.map(host => this.host(host))\r\n  }\r\n\r\n  hostSkeleton (host: number) {\r\n    return (\r\n      <IonCol\r\n        size=\"12\"\r\n        sizeSm=\"6\"\r\n        key={host}>\r\n        <HostSkeleton />\r\n      </IonCol>\r\n    )\r\n  }\r\n\r\n  get hostSkeletons () {\r\n    const { hosts } = this.props\r\n    if (isEmpty(hosts)) {\r\n      const hostSkeletons = range(Hosts.skeletonsLength)\r\n      return hostSkeletons.map(host => this.hostSkeleton(host))\r\n    }\r\n  }\r\n\r\n  handleCreateHostClick (host: HostCreatePayload, callback: () => void) {\r\n    this.request.create(host, host => {\r\n      this.props.pushHost(host)\r\n      callback()\r\n    })\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.adminMiddleware.auth(this.props.history)\r\n    this.setHosts()\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonPage>\r\n        <IonContent>\r\n          <Page\r\n            invert={false}\r\n            container=\"regular\">\r\n            <IonGrid>\r\n              <IonRow>\r\n                <IonCol>\r\n                  <AdminMenu />\r\n                  <HostCreate handleCreateClick={this.handleCreateHostClick} />\r\n                </IonCol>\r\n              </IonRow>\r\n              <IonRow>\r\n                {this.hosts}\r\n                {this.hostSkeletons}\r\n              </IonRow>\r\n            </IonGrid>\r\n          </Page>\r\n        </IonContent>\r\n      </IonPage>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(selectors, actions)(Hosts))\r\n","import Quill from 'quill'\r\n\r\nexport default class EditorService {\r\n  private static instance: EditorService\r\n  private static editor: Quill\r\n\r\n  constructor () {\r\n    if (!EditorService.instance) {\r\n      EditorService.instance = this\r\n    }\r\n    return EditorService.instance\r\n  }\r\n\r\n  private getDelta (content: any) {\r\n    return EditorService.editor.clipboard.convert(content)\r\n  }\r\n\r\n  private getContent () {\r\n    return EditorService.editor.root.innerHTML\r\n  }\r\n\r\n  get toolbarOptions () {\r\n    return [\r\n      ['bold', 'italic', 'underline'],\r\n      [{ header: 1 }, { header: 2 }],\r\n      [{ list: 'ordered' }, { list: 'bullet' }],\r\n      [{ align: [] }],\r\n      ['link']\r\n    ]\r\n  }\r\n\r\n  get options () {\r\n    return {\r\n      modules: {\r\n        toolbar: this.toolbarOptions,\r\n        clipboard: {\r\n          matchVisual: false\r\n        }\r\n      },\r\n      theme: 'snow'\r\n    }\r\n  }\r\n\r\n  initialize (container: string) {\r\n    EditorService.editor = new Quill(container, this.options)\r\n  }\r\n\r\n  setContent (content: string) {\r\n    const delta = this.getDelta(content)\r\n    EditorService.editor.setContents(delta, 'silent')\r\n  }\r\n\r\n  onContentChange (callback: (content: string) => void) {\r\n    EditorService.editor.on('text-change', () => {\r\n      const content = this.getContent()\r\n      callback(content)\r\n    })\r\n  }\r\n}\r\n","import RequestService from '../../services/RequestService'\r\nimport AlertService from '../../services/AlertService'\r\n\r\nexport default class PrivacyEditRequest {\r\n  private requestService: RequestService\r\n\r\n  constructor () {\r\n    this.requestService = new RequestService()\r\n  }\r\n\r\n  read (callback: (body: string) => void) {\r\n    this.requestService.get('/privacy', response => {\r\n      if (response) callback(response.body)\r\n    })\r\n  }\r\n\r\n  update (body: string) {\r\n    this.requestService.post('/privacy', { body }, response => {\r\n      if (response) AlertService.push('Privacy updated.')\r\n    })\r\n  }\r\n}\r\n","import { IonCol, IonContent, IonGrid, IonPage, IonRow } from '@ionic/react'\r\nimport React, { Component } from 'react'\r\nimport { RouteComponentProps, withRouter } from 'react-router'\r\nimport { connect } from 'react-redux'\r\nimport AdminMiddleware from '../../middleware/AdminMiddleware'\r\nimport EditorService from '../../services/Editor/EditorService'\r\nimport Request from './PrivacyEdit.request'\r\nimport { actions, selectors, PrivacyEditState, PrivacyEditActions } from './PrivacyEdit.state'\r\nimport Page from '../../components/Page/Page'\r\nimport AdminMenu from '../../components/AdminMenu/AdminMenu'\r\nimport Button from '../../components/Button/Button'\r\nimport styles from './PrivacyEdit.module.scss'\r\n\r\ninterface PrivacyEditProps extends\r\n  PrivacyEditState, PrivacyEditActions, RouteComponentProps {}\r\n\r\nclass PrivacyEdit extends Component<PrivacyEditProps> {\r\n  adminMiddleware: AdminMiddleware\r\n  editorService: EditorService\r\n  request: Request\r\n\r\n  constructor (props: PrivacyEditProps) {\r\n    super(props)\r\n    this.adminMiddleware = new AdminMiddleware()\r\n    this.editorService = new EditorService()\r\n    this.request = new Request()\r\n    this.handleSaveClick = this.handleSaveClick.bind(this)\r\n  }\r\n\r\n  setPrivacy () {\r\n    this.request.read(privacy => {\r\n      this.props.replacePrivacy(privacy)\r\n      this.editorService.setContent(privacy)\r\n    })\r\n  }\r\n\r\n  handlePrivacyChange () {\r\n    this.editorService.onContentChange(privacy => {\r\n      this.props.replacePrivacy(privacy)\r\n    })\r\n  }\r\n\r\n  handleSaveClick () {\r\n    this.request.update(this.props.privacy)\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.adminMiddleware.auth(this.props.history)\r\n    this.editorService.initialize('#privacyEitor')\r\n    this.setPrivacy()\r\n    this.handlePrivacyChange()\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonPage>\r\n        <IonContent>\r\n          <Page\r\n            invert={false}\r\n            container=\"regular\">\r\n            <IonGrid>\r\n              <IonRow>\r\n                <IonCol>\r\n                  <AdminMenu />\r\n                  <div className={styles.privacyEdit}>\r\n                    <div id=\"privacyEitor\" />\r\n                    <div className={styles.save}>\r\n                      <Button\r\n                        text=\"Save\"\r\n                        handleClick={this.handleSaveClick} />\r\n                    </div>\r\n                  </div>\r\n                </IonCol>\r\n              </IonRow>\r\n            </IonGrid>\r\n          </Page>\r\n        </IonContent>\r\n      </IonPage>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(selectors, actions)(PrivacyEdit))\r\n","import RequestService from '../../services/RequestService'\r\n\r\nexport default class PrivacyRequest {\r\n  private requestService: RequestService\r\n\r\n  constructor () {\r\n    this.requestService = new RequestService()\r\n  }\r\n\r\n  read (callback: (body: string) => void) {\r\n    this.requestService.get('/privacy', response => {\r\n      if (response) callback(response.body)\r\n    })\r\n  }\r\n}\r\n","import React, { Component, Fragment } from 'react'\r\nimport { random, range } from 'lodash'\r\nimport Skeleton from '../Skeleton/Skeleton'\r\n\r\ninterface PrivacySkeletonProps {\r\n  visibility: boolean\r\n}\r\n\r\nexport default class PrivacySkeleton extends Component<PrivacySkeletonProps> {\r\n  get heading () {\r\n    return (\r\n      <Skeleton\r\n        width={this.randomWidth(30, 40)}\r\n        height=\"18px\"\r\n        marginBottom=\"25px\"\r\n        marginTop=\"25px\" />\r\n    )\r\n  }\r\n\r\n  randomWidth (minWidth: number, maxWidth: number) {\r\n    return `${random(minWidth, maxWidth)}%`\r\n  }\r\n\r\n  paragraph (lines: number) {\r\n    return (\r\n      range(lines).map(line =>\r\n        <Skeleton\r\n          width={this.randomWidth(80, 100)}\r\n          height=\"11px\"\r\n          marginBottom=\"5px\"\r\n          key={line} />\r\n      )\r\n    )\r\n  }\r\n\r\n  render () {\r\n    return this.props.visibility &&\r\n      <Fragment>\r\n        <div>{this.paragraph(3)}</div>\r\n        {this.heading}\r\n        <div>{this.paragraph(5)}</div>\r\n      </Fragment>\r\n  }\r\n}\r\n","import { IonContent, IonPage, IonCol, IonGrid, IonRow } from '@ionic/react'\r\nimport React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { actions, selectors, PrivacyState, PrivacyActions } from './Privacy.state'\r\nimport PrivacyRequest from './Privacy.request'\r\nimport Page from '../../components/Page/Page'\r\nimport PrivacySkeleton from '../../components/PrivacySkeleton/PrivacySkeleton'\r\nimport styles from './Privacy.module.scss'\r\n\r\ninterface PrivacyProps extends PrivacyState, PrivacyActions {}\r\n\r\nclass Privacy extends Component<PrivacyProps> {\r\n  request: PrivacyRequest\r\n\r\n  constructor (props: PrivacyProps) {\r\n    super(props)\r\n    this.request = new PrivacyRequest()\r\n  }\r\n\r\n  get privacyHTML () {\r\n    return { __html: this.props.privacy || '' }\r\n  }\r\n\r\n  get skeletonVisibility () {\r\n    return !this.props.privacy\r\n  }\r\n\r\n  setPrivacy () {\r\n    this.request.read(privacy => this.props.replacePrivacy(privacy))\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.setPrivacy()\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonPage>\r\n        <IonContent>\r\n          <Page\r\n            invert={false}\r\n            container=\"regular\">\r\n            <IonGrid>\r\n              <IonRow>\r\n                <IonCol>\r\n                  <div className={styles.privacy}>\r\n                    <h1>Privacy Policy</h1>\r\n                    <div\r\n                      className={styles.content}\r\n                      dangerouslySetInnerHTML={this.privacyHTML} />\r\n                    <PrivacySkeleton visibility={this.skeletonVisibility} />\r\n                  </div>\r\n                </IonCol>\r\n              </IonRow>\r\n            </IonGrid>\r\n          </Page>\r\n        </IonContent>\r\n      </IonPage>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(selectors, actions)(Privacy)\r\n","import { IonCol, IonContent, IonGrid, IonPage, IonRow } from '@ionic/react'\r\nimport React, { Component } from 'react'\r\nimport { RouteComponentProps, withRouter } from 'react-router'\r\nimport routes from '../../routes'\r\nimport Page from '../../components/Page/Page'\r\nimport Button from '../../components/Button/Button'\r\nimport styles from './NotFound.module.scss'\r\n\r\ninterface NotFoundProps extends RouteComponentProps {}\r\n\r\nclass NotFound extends Component<NotFoundProps> {\r\n  constructor (props: NotFoundProps) {\r\n    super(props)\r\n    this.handleReturnHomeClick = this.handleReturnHomeClick.bind(this)\r\n  }\r\n\r\n  handleReturnHomeClick () {\r\n    this.props.history.push(routes.home.path)\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonPage>\r\n        <IonContent>\r\n          <Page\r\n            invert={false}\r\n            container=\"small\">\r\n            <IonGrid>\r\n              <IonRow>\r\n                <IonCol>\r\n                  <div className={styles.notFound}>\r\n                    <h1 className={styles.heading}>404</h1>\r\n                    <p className={styles.description}>Page Not Found</p>\r\n                    <Button\r\n                      text=\"Return to Home\"\r\n                      handleClick={this.handleReturnHomeClick} />\r\n                  </div>\r\n                </IonCol>\r\n              </IonRow>\r\n            </IonGrid>\r\n          </Page>\r\n        </IonContent>\r\n      </IonPage>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(NotFound)\r\n","import Preload from './pages/Preload/Preload'\r\nimport Home from './pages/Home/Home'\r\nimport Join from './pages/Join/Join'\r\nimport Start from './pages/Start/Start'\r\nimport Meeting from './pages/Meeting/Meeting'\r\nimport Install from './pages/Install/Install'\r\nimport AdminSignIn from './pages/AdminSignIn/AdminSignIn'\r\nimport Hosts from './pages/Hosts/Hosts'\r\nimport PrivacyEdit from './pages/PrivacyEdit/PrivacyEdit'\r\nimport Privacy from './pages/Privacy/Privacy'\r\nimport NotFound from './pages/NotFound/NotFound'\r\n\r\nexport default {\r\n  preload: { path: '/', component: Preload },\r\n  home: { path: '/home', component: Home },\r\n  join: { path: '/join', component: Join },\r\n  start: { path: '/start', component: Start },\r\n  meeting: { path: '/meeting', component: Meeting },\r\n  install: { path: '/install', component: Install },\r\n  adminSignIn: { path: '/admin', component: AdminSignIn },\r\n  hosts: { path: '/hosts', component: Hosts },\r\n  privacyEdit: { path: '/privacy/edit', component: PrivacyEdit },\r\n  privacy: { path: '/privacy', component: Privacy },\r\n  notFound: { path: '*', component: NotFound }\r\n}\r\n","import { IonRouterOutlet } from '@ionic/react'\r\nimport { IonReactRouter } from '@ionic/react-router'\r\nimport React, { Component } from 'react'\r\nimport { Provider as ReduxProvider } from 'react-redux'\r\nimport store from '../../store'\r\n\r\ninterface ProviderProps {}\r\n\r\nexport default class Provider extends Component<ProviderProps> {\r\n  render () {\r\n    return (\r\n      <ReduxProvider store={store}>\r\n        <IonReactRouter>\r\n          <IonRouterOutlet>\r\n            {this.props.children}\r\n          </IonRouterOutlet>\r\n        </IonReactRouter>\r\n      </ReduxProvider>\r\n    )\r\n  }\r\n}\r\n","import { IonApp, setupConfig } from '@ionic/react'\r\nimport React, { Component, ReactPropTypes } from 'react'\r\nimport { Route, Switch } from 'react-router-dom'\r\nimport routes from '../../routes'\r\nimport SocketService from '../../services/SocketService'\r\nimport AlertService from '../../services/AlertService'\r\nimport LocalStorage from './App.storage'\r\nimport Provider from '../Provider/Provider'\r\nimport '../../theme/bootstrap.scss'\r\n\r\nexport default class App extends Component {\r\n  localStorage: LocalStorage\r\n\r\n  constructor (props: ReactPropTypes) {\r\n    super(props)\r\n    this.localStorage = new LocalStorage()\r\n    this.setupConfig()\r\n    SocketService.connect()\r\n  }\r\n\r\n  setupConfig () {\r\n    setupConfig({ mode: 'md' })\r\n  }\r\n\r\n  async handlePwaInstall (event: Event) {\r\n    const deferredPrompt: any = event\r\n    deferredPrompt.prompt()\r\n    const choiceResult = await deferredPrompt.userChoice\r\n    const isAccepted = (choiceResult.outcome === 'accepted')\r\n    if (isAccepted) AlertService.pull()\r\n  }\r\n\r\n  promptPwaInstall () {\r\n    this.localStorage.checkPwaPrompted(pwaPrompted => {\r\n      if (pwaPrompted) return\r\n      window.addEventListener('beforeinstallprompt', event => {\r\n        event.preventDefault()\r\n        this.localStorage.setPwaInstallPrompted(() => {\r\n          const installHandler = () => this.handlePwaInstall(event)\r\n          AlertService.push('Install app?', installHandler)\r\n        })\r\n      })\r\n    })\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.promptPwaInstall()\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <IonApp>\r\n        <Provider>\r\n          <Switch>\r\n            <Route\r\n              path={routes.preload.path}\r\n              component={routes.preload.component}\r\n              exact={true} />\r\n            <Route\r\n              path={routes.home.path}\r\n              component={routes.home.component}\r\n              exact={true} />\r\n            <Route\r\n              path={routes.join.path}\r\n              component={routes.join.component}\r\n              exact={true} />\r\n            <Route\r\n              path={routes.start.path}\r\n              component={routes.start.component}\r\n              exact={true} />\r\n            <Route\r\n              path={routes.meeting.path}\r\n              component={routes.meeting.component}\r\n              exact={true} />\r\n            <Route\r\n              path={routes.install.path}\r\n              component={routes.install.component}\r\n              exact={true} />\r\n            <Route\r\n              path={routes.adminSignIn.path}\r\n              component={routes.adminSignIn.component}\r\n              exact={true} />\r\n            <Route\r\n              path={routes.hosts.path}\r\n              component={routes.hosts.component}\r\n              exact={true} />\r\n            <Route\r\n              path={routes.privacy.path}\r\n              component={routes.privacy.component}\r\n              exact={true} />\r\n            <Route\r\n              path={routes.privacyEdit.path}\r\n              component={routes.privacyEdit.component}\r\n              exact={true} />\r\n            <Route\r\n              path={routes.notFound.path}\r\n              component={routes.notFound.component}\r\n              exact={true} />\r\n          </Switch>\r\n        </Provider>\r\n      </IonApp>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport ServiceWorkerService from './services/ServiceWorkerService'\r\nimport App from './components/App/App'\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n)\r\n\r\nServiceWorkerService.registerWorker()\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"alert\":\"Alert_alert__2j1qM\",\"cursor\":\"Alert_cursor__1gESW\",\"content\":\"Alert_content__5ozA0\",\"icon\":\"Alert_icon__2JAk6\",\"message\":\"Alert_message__3Q1cm\",\"actions\":\"Alert_actions__xNWp7\",\"cancel\":\"Alert_cancel__2hV9X\",\"proceed\":\"Alert_proceed__1WEvF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"host\":\"Host_host__5UBHq\",\"user\":\"Host_user__gNOv3\",\"name\":\"Host_name__388jT\",\"username\":\"Host_username__3vIjJ\",\"lastMeeting\":\"Host_lastMeeting__Rz7Vu\",\"heading\":\"Host_heading__1H5l_\",\"time\":\"Host_time__2_weU\",\"actions\":\"Host_actions__1p3R3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"adminMenu\":\"AdminMenu_adminMenu__3X4sH\",\"menuItems\":\"AdminMenu_menuItems__1ZCWE\",\"menuItem\":\"AdminMenu_menuItem__29oR7\",\"active\":\"AdminMenu_active__aA2dh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1v0yI\",\"logo\":\"Header_logo__3T0lc\",\"tagline\":\"Header_tagline__22Om1\",\"invert\":\"Header_invert__2OkNe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"copyright\":\"Copyright_copyright__23gHt\",\"link\":\"Copyright_link__18MGR\",\"text\":\"Copyright_text__1fcWP\",\"invert\":\"Copyright_invert__qZf26\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"Page_page__A7lqB\",\"fadeIn\":\"Page_fadeIn__3vNfI\",\"main\":\"Page_main__1BVN_\",\"invert\":\"Page_invert__2RMSY\",\"full\":\"Page_full__2A7lk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menuToggle\":\"MenuToggle_menuToggle__3JFXp\",\"notch\":\"MenuToggle_notch__V_sE6\",\"icon\":\"MenuToggle_icon__4AKvO\",\"top\":\"MenuToggle_top__KUvL0\",\"bottom\":\"MenuToggle_bottom__3v6IZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menuItems\":\"MenuItems_menuItems__2o-Zz\",\"item\":\"MenuItems_item__3bxG9\",\"top\":\"MenuItems_top__1Wvd5\",\"bottom\":\"MenuItems_bottom__dgiLZ\",\"mobile\":\"MenuItems_mobile__1Y_QT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"videoBlock\":\"VideoBlock_videoBlock__23j3p\",\"full\":\"VideoBlock_full__3wdvz\",\"mobile\":\"VideoBlock_mobile__32Zs6\",\"square\":\"VideoBlock_square__MIbfa\",\"content\":\"VideoBlock_content__14Ktc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"activeVideo\":\"ActiveVideo_activeVideo__1j08x\",\"mobile\":\"ActiveVideo_mobile__2_pbU\",\"videoBlock\":\"ActiveVideo_videoBlock__CxhYc\",\"hide\":\"ActiveVideo_hide__3REMM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menuItem\":\"MenuItem_menuItem__22Hzp\",\"icon\":\"MenuItem_icon__13emC\",\"active\":\"MenuItem_active__3zHYA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"floatButton\":\"FloatButton_floatButton__19o4O\",\"button\":\"FloatButton_button__2X4df\",\"icon\":\"FloatButton_icon__3u2hZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"whiteboardBrushSize\":\"WhiteboardBrushSize_whiteboardBrushSize__2deKv\",\"size\":\"WhiteboardBrushSize_size__o7vsk\",\"sizeInput\":\"WhiteboardBrushSize_sizeInput__3yFYh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"meeting\":\"Meeting_meeting__3fRJr\",\"mobile\":\"Meeting_mobile__6tMY8\",\"menuTopSpace\":\"Meeting_menuTopSpace__1DKGm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"host\":\"HostSkeleton_host__1bWhC\",\"user\":\"HostSkeleton_user__1MMZ8\",\"actions\":\"HostSkeleton_actions__1bFH1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notFound\":\"NotFound_notFound__3CEjn\",\"heading\":\"NotFound_heading__2lNQV\",\"description\":\"NotFound_description__1uh8N\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__3eZVY\",\"small\":\"Container_small__PZBi1\",\"regular\":\"Container_regular__3d77r\",\"full\":\"Container_full__3XsvV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"floatingAnimation\":\"FloatingAnimation_floatingAnimation__2VgT0\",\"flip\":\"FloatingAnimation_flip__Bka3_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__2Lf63\",\"content\":\"Button_content__1y604\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"Menu_menu__2xbQm\",\"top\":\"Menu_top__2gHwG\",\"bottom\":\"Menu_bottom__3BB0i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"video\":\"Video_video__1kg4-\",\"horizontalFlip\":\"Video_horizontalFlip__1s0Zk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"whiteboardMenuItem\":\"WhiteboardMenuItem_whiteboardMenuItem__fdCVE\",\"mobile\":\"WhiteboardMenuItem_mobile__3QVFn\"};"],"sourceRoot":""}